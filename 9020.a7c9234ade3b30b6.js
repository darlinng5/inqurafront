"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9020],{2384:(A,C,i)=>{i.d(C,{b:()=>n});class n{}},7116:(A,C,i)=>{i.d(C,{R:()=>f});var n=i(4650),p=i(3162);let f=(()=>{class g{constructor(){}static#e=this.\u0275fac=function(h){return new(h||g)};static#t=this.\u0275cmp=n.Xpm({type:g,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(h,M){1&h&&n._UZ(0,"mat-progress-bar",0)},dependencies:[p.pW],encapsulation:2})}return g})()},9020:(A,C,i)=>{i.r(C),i.d(C,{CostumerModule:()=>G});var n=i(6895),p=i(9197),f=i(1546),g=i(805);class v{}var e=i(4650),h=i(7747),M=i(5384),d=i(99),m=i(2453),s=i(1383),_=i(5593),c=i(1493),T=i(1740),b=i(4006),S=i(7116),y=i(7913),I=i(5047);function N(r,Z){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function E(r,Z){if(1&r){const t=e.EpF();e.TgZ(0,"div",30),e._UZ(1,"p-toast"),e.TgZ(2,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA()()}}function P(r,Z){1&r&&(e.TgZ(0,"tr")(1,"th",32),e._uU(2,"Rtn "),e._UZ(3,"p-sortIcon",33),e.qZA(),e.TgZ(4,"th",34),e._uU(5,"Nombre "),e._UZ(6,"p-sortIcon",35),e.qZA(),e.TgZ(7,"th",36),e._uU(8,"Apellido "),e._UZ(9,"p-sortIcon",37),e.qZA(),e.TgZ(10,"th",38),e._uU(11,"Direcci\xf3n "),e._UZ(12,"p-sortIcon",39),e.qZA(),e.TgZ(13,"th",40),e._uU(14,"Celular "),e._UZ(15,"p-sortIcon",41),e.qZA(),e.TgZ(16,"th",42),e._uU(17,"Email "),e._UZ(18,"p-sortIcon",43),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Options"),e.qZA()())}function U(r,Z){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"button",44),e.NdJ("click",function(){const u=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editCustomer(u))}),e.qZA()()()}if(2&r){const t=Z.$implicit;e.xp6(2),e.Oqu(t.rtn),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.middleName),e.xp6(2),e.Oqu(t.address),e.xp6(2),e.Oqu(t.cellPhone),e.xp6(2),e.Oqu(t.email)}}function x(r,Z){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function D(r,Z){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Cantidad de dias"),e.qZA(),e.TgZ(3,"div",13)(4,"p-inputNumber",45),e.NdJ("ngModelChange",function(o){e.CHM(t);const u=e.oxw();return e.KtG(u.CustomerSelectd.creditDaysRestrictions=o)}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.CustomerSelectd.creditDaysRestrictions)}}function J(r,Z){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Cantidad en Monto"),e.qZA(),e.TgZ(3,"div",13)(4,"p-inputNumber",46),e.NdJ("ngModelChange",function(o){e.CHM(t);const u=e.oxw();return e.KtG(u.CustomerSelectd.creditMontRestrictions=o)}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.CustomerSelectd.creditMontRestrictions)}}function R(r,Z){if(1&r){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveCostumer())}),e.qZA()}}const w=function(){return{"min-width":"50rem"}},O=function(){return[10,25,50]},B=function(){return{width:"1250px"}};let F=(()=>{class r{constructor(t,a,o,u){this.router=t,this.productService=a,this.eventService=o,this.messageService=u,this.CustomerSelectd=new v,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.selectedOption="Ninguno",this.AccessName="/pages/costumer"}ngOnInit(){const a=this.eventService.getPermisionsException().split(",").map(o=>o.trim());this.redirect=a.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(o=>this.products1=o),this.GetCostumers()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0,this.CustomerSelectd=new v,this.CustomerSelectd.comunicationPreference="Ninguno"}editCustomer(t){this.isCreating=!1,this.CustomerSelectd=t,this.showDialog=!0,console.log(this.CustomerSelectd)}saveCostumer(){const t={...this.CustomerSelectd};t.id=t.id??0,t.rtn=t.rtn??"",t.name=t.name??"",t.middleName=t.middleName??"",t.address=t.address??"",t.cellphone=t.cellphone??"",t.email=t.email??"",t.userIdentifiquer=this.eventService.getToken(),this.isCreating?this.AddNewCostumer(t):this.EditCostumerService(t)}AddNewCostumer(t){this.showProgressBar=!0,this.productService.AddNewCostumer(t).subscribe(a=>{a.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El cliente "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCostumers()):this.messageService.add({severity:"error",summary:"Error",detail:a.message,life:3e3}),this.showProgressBar=!1})}EditCostumerService(t){this.showProgressBar=!0,this.productService.EditCostumer(t).subscribe(a=>{a.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El cliente "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCostumers()):this.messageService.add({severity:"error",summary:"Error",detail:a.message,life:3e3}),this.showProgressBar=!1})}GetCostumers(){this.showProgressBar=!0,this.productService.GetCostumerByEnterprise(this.eventService.getToken()).subscribe(t=>{t.data?this.costumer=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(p.F0),e.Y36(h.M),e.Y36(M.P),e.Y36(g.ez))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e._Bn([g.ez])],decls:70,vars:28,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","RTN",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Apellido",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Celular",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Direcci\xf3n",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Email",3,"ngModel","ngModelChange"],[2,"display","inline-block"],["type","radio","name","contact","value","Ninguno",3,"ngModel","ngModelChange"],["type","radio","name","contact","value","Correo",3,"ngModel","ngModelChange"],[2,"display","inline-block","margin-left","10px"],["type","radio","name","contact","value","WhatsApp",3,"ngModel","ngModelChange"],[1,"field","col"],["for","isCreating"],["id","sc",2,"margin-left","10px",3,"ngModel","ngModelChange"],["class","field grid",4,"ngIf"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","rtn",2,"width","20%"],["field","rtn"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","middleName",2,"width","20%"],["field","middleName"],["pSortableColumn","address",2,"width","20%"],["field","address"],["pSortableColumn","cellPhone",2,"width","20%"],["field","cellPhone"],["pSortableColumn","email",2,"width","20%"],["field","email"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["id","quantity",3,"ngModel","ngModelChange"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(a,o){1&a&&(e.YNc(0,N,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,E,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,P,21,0,"ng-template",7),e.YNc(9,U,15,6,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(l){return o.showDialog=l}),e.YNc(11,x,2,0,"div",0),e.TgZ(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"RTN"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.rtn=l}),e.qZA()()(),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Nombre"),e.qZA(),e.TgZ(21,"div",13)(22,"input",15),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.name=l}),e.qZA()()(),e.TgZ(23,"div",11)(24,"label",12),e._uU(25,"Apellido"),e.qZA(),e.TgZ(26,"div",13)(27,"input",16),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.middleName=l}),e.qZA()()(),e.TgZ(28,"div",11)(29,"label",12),e._uU(30,"Celular"),e.qZA(),e.TgZ(31,"div",13)(32,"input",17),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.cellphone=l}),e.qZA()()(),e.TgZ(33,"div",11)(34,"label",12),e._uU(35,"Direcci\xf3n"),e.qZA(),e.TgZ(36,"div",13)(37,"input",18),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.address=l}),e.qZA()()(),e.TgZ(38,"div",11)(39,"label",12),e._uU(40,"Correo"),e.qZA(),e.TgZ(41,"div",13)(42,"input",19),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.email=l}),e.qZA()()(),e.TgZ(43,"div",11)(44,"label",12),e._uU(45,"Preferencia de contacto"),e.qZA(),e.TgZ(46,"div",13)(47,"div",20)(48,"label")(49,"input",21),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.comunicationPreference=l}),e.qZA(),e._uU(50," Ninguno "),e.qZA()(),e.TgZ(51,"div",20)(52,"label")(53,"input",22),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.comunicationPreference=l}),e.qZA(),e._uU(54," Correo "),e.qZA()(),e.TgZ(55,"div",23)(56,"label")(57,"input",24),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.comunicationPreference=l}),e.qZA(),e._uU(58," WhatsApp "),e.qZA()()()(),e.TgZ(59,"div",25)(60,"label",26),e._uU(61,"Restriccion Credito en dias"),e.qZA(),e.TgZ(62,"p-inputSwitch",27),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.hasCreditRestrictionInDays=l}),e.qZA()(),e.YNc(63,D,5,1,"div",28),e.TgZ(64,"div",25)(65,"label",26),e._uU(66,"Restriccion Credito en Monto"),e.qZA(),e.TgZ(67,"p-inputSwitch",27),e.NdJ("ngModelChange",function(l){return o.CustomerSelectd.hasCreditRestrictionInMont=l}),e.qZA()(),e.YNc(68,J,5,1,"div",28),e.qZA(),e.YNc(69,R,2,0,"ng-template",29),e.qZA()),2&a&&(e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("value",o.costumer)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(25,w))("rowsPerPageOptions",e.DdM(26,O)),e.xp6(3),e.Akn(e.DdM(27,B)),e.Q6J("visible",o.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar),e.xp6(6),e.Q6J("ngModel",o.CustomerSelectd.rtn),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.name),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.middleName),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.cellphone),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.address),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.email),e.xp6(7),e.Q6J("ngModel",o.CustomerSelectd.comunicationPreference),e.xp6(4),e.Q6J("ngModel",o.CustomerSelectd.comunicationPreference),e.xp6(4),e.Q6J("ngModel",o.CustomerSelectd.comunicationPreference),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.hasCreditRestrictionInDays),e.xp6(1),e.Q6J("ngIf",o.CustomerSelectd.hasCreditRestrictionInDays),e.xp6(4),e.Q6J("ngModel",o.CustomerSelectd.hasCreditRestrictionInMont),e.xp6(1),e.Q6J("ngIf",o.CustomerSelectd.hasCreditRestrictionInMont))},dependencies:[n.O5,d.iA,g.jx,d.lQ,d.fz,m.FN,s.o,_.Hq,c.V,T.o,b.Fj,b._,b.JJ,b.On,S.R,y.Ql,I.Rn],encapsulation:2})}return r})(),q=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild([{path:"",component:F,canActivate:[f.j]}]),p.Bz]})}return r})();var Q=i(4891);let G=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.oAB({type:r});static#n=this.\u0275inj=e.cJS({imports:[n.ez,q,d.U$,m.EV,s.V,_.hJ,c.S,T.j,b.u5,Q.E,y.Iu,I.L$]})}return r})()},7083:(A,C,i)=>{i.d(C,{K:()=>e});var n=i(529),p=i(2340),f=i(2384),g=i(4650);const v=p.N.baseUrl;let e=(()=>{class h{constructor(d){this.http=d}addUser(d){return this.http.post(`${v}auth/register`,d)}login(d,m){var s=new f.b;return s.email=d,s.password=m,this.http.post(`${v}auth/login`,s)}GetUserPermisions(){const _={headers:new n.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",_)}static#e=this.\u0275fac=function(m){return new(m||h)(g.LFG(n.eN))};static#t=this.\u0275prov=g.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},1546:(A,C,i)=>{i.d(C,{j:()=>v});var n=i(4650),p=i(5384),f=i(9197),g=i(7083);let v=(()=>{class e{constructor(M,d,m){this.eventService=M,this.router=d,this._userService=m,this.isTokenValid=!1}canActivate(M,d){const m=this.eventService.getToken();return(""==m||null==m||null==m)&&this.router.navigateByUrl("/auth/login"),!0}static#e=this.\u0275fac=function(d){return new(d||e)(n.LFG(p.P),n.LFG(f.F0),n.LFG(g.K))};static#t=this.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},1383:(A,C,i)=>{i.d(C,{V:()=>m,o:()=>d});var n=i(4650),p=i(6895),f=i(805);function g(s,_){1&s&&n.GkF(0)}function v(s,_){if(1&s&&(n.TgZ(0,"div",3),n.YNc(1,g,1,0,"ng-container",4),n.qZA()),2&s){const c=n.oxw();n.xp6(1),n.Q6J("ngTemplateOutlet",c.leftTemplate)}}function e(s,_){1&s&&n.GkF(0)}function h(s,_){if(1&s&&(n.TgZ(0,"div",5),n.YNc(1,e,1,0,"ng-container",4),n.qZA()),2&s){const c=n.oxw();n.xp6(1),n.Q6J("ngTemplateOutlet",c.rightTemplate)}}const M=["*"];let d=(()=>{class s{constructor(c){this.el=c}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(c=>{switch(c.getType()){case"left":this.leftTemplate=c.template;break;case"right":this.rightTemplate=c.template}})}}return s.\u0275fac=function(c){return new(c||s)(n.Y36(n.SBq))},s.\u0275cmp=n.Xpm({type:s,selectors:[["p-toolbar"]],contentQueries:function(c,T,b){if(1&c&&n.Suo(b,f.jx,4),2&c){let S;n.iGM(S=n.CRH())&&(T.templates=S)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:M,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(c,T){1&c&&(n.F$t(),n.TgZ(0,"div",0),n.Hsn(1),n.YNc(2,v,2,1,"div",1),n.YNc(3,h,2,1,"div",2),n.qZA()),2&c&&(n.Tol(T.styleClass),n.Q6J("ngClass","p-toolbar p-component")("ngStyle",T.style),n.xp6(2),n.Q6J("ngIf",T.leftTemplate),n.xp6(1),n.Q6J("ngIf",T.rightTemplate))},dependencies:[p.mk,p.O5,p.tP,p.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),s})(),m=(()=>{class s{}return s.\u0275fac=function(c){return new(c||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[p.ez]}),s})()}}]);
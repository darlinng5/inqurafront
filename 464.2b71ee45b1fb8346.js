"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[464],{464:(x,m,r)=>{r.r(m),r.d(m,{InventoryModule:()=>z});var c=r(9808),h=r(5077),g=r(9783);class y{}var e=r(5e3),d=r(7747),v=r(5384),l=r(5315),u=r(7010),p=r(3075),_=r(845),I=r(7116),b=r(6768),C=r(7773),Z=r(3407);function A(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function M(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",25),e.TgZ(4,"app-drop-down",26),e.NdJ("ValueSelectedChange",function(o){e.CHM(n);const a=e.oxw(2);return e.KtG(a.filterProduct(o))}),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("DropDownDataSource",n.products)}}function J(t,s){1&t&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function N(t,s){if(1&t){const n=e.EpF();e.YNc(0,M,5,2,"div",16),e.YNc(1,J,3,0,"div",0),e.TgZ(2,"div",17)(3,"div",18)(4,"label",19),e._uU(5,"Precio de Compra"),e.qZA(),e.TgZ(6,"p-inputNumber",20),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.buyCost=o)}),e.qZA()(),e.TgZ(7,"div",18)(8,"label",21),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",22),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.quantity=o)}),e.qZA()()(),e.TgZ(11,"div",17)(12,"div",18)(13,"label",23),e._uU(14,"Precio de Venta"),e.qZA(),e.TgZ(15,"p-inputNumber",20),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.priceSale=o)}),e.qZA()()()}if(2&t){const n=e.oxw();e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",n.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.priceSale)}}function S(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.postTransaccion(o.inventoryTransaccion))}),e.qZA()}}function D(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",25),e.TgZ(4,"app-drop-down",26),e.NdJ("ValueSelectedChange",function(o){e.CHM(n);const a=e.oxw(2);return e.KtG(a.filterProduct(o))}),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("DropDownDataSource",n.products)}}function w(t,s){1&t&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function q(t,s){if(1&t){const n=e.EpF();e.YNc(0,D,5,2,"div",16),e.YNc(1,w,3,0,"div",0),e.TgZ(2,"div",17)(3,"div",18)(4,"label",19),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",20),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.buyCost=o)}),e.qZA()(),e.TgZ(7,"div",18)(8,"label",21),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",22),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.quantity=o)}),e.qZA()()(),e.TgZ(11,"div",17)(12,"div",18)(13,"label",23),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",29),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.description=o)}),e.qZA()()()}if(2&t){const n=e.oxw();e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",n.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.description)}}function U(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.postTransaccion(o.inventoryTransaccion))}),e.qZA()}}function R(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",25),e.TgZ(4,"app-drop-down",26),e.NdJ("ValueSelectedChange",function(o){e.CHM(n);const a=e.oxw(2);return e.KtG(a.filterProduct(o))}),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("DropDownDataSource",n.products)}}function E(t,s){1&t&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function H(t,s){if(1&t){const n=e.EpF();e.YNc(0,R,5,2,"div",16),e.YNc(1,E,3,0,"div",0),e.TgZ(2,"div",17)(3,"div",18)(4,"label",19),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",20),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.buyCost=o)}),e.qZA()(),e.TgZ(7,"div",18)(8,"label",21),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",22),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.quantity=o)}),e.qZA()()(),e.TgZ(11,"div",17)(12,"div",18)(13,"label",23),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",29),e.NdJ("ngModelChange",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.inventoryTransaccion.description=o)}),e.qZA()()()}if(2&t){const n=e.oxw();e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",n.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",n.inventoryTransaccion.description)}}function B(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.postTransaccion(o.inventoryTransaccion))}),e.qZA()}}const T=function(){return{width:"2.5rem",height:"2.5rem"}},f=function(){return{width:"650px"}};let P=(()=>{class t{constructor(n,i,o){this.productService=n,this.eventService=i,this.messageService=o,this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1,this.inventoryTransaccion=new y,this.isLoading=!1,this.getProductValues()}setInventaryTransaction(n){"Buy"==n?(this.transaccionInventaryType="Buy",this.showBuyDialog=!0):"AdjustmentAdd"==n?(this.transaccionInventaryType="AdjustmentAdd",this.showAddDialog=!0):"AdjustmentReduce"==n&&(this.transaccionInventaryType="AdjustmentReduce",this.showReduceDialog=!0)}hideDialog(){this.transaccionInventaryType="",this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1}getProductValues(){this.isLoading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(n=>{n.data&&(this.products=n.data),this.isLoading=!1})}filterProduct(n){this.inventoryTransaccion.productId=n}postTransaccion(n){this.isLoading=!0,this.inventoryTransaccion.productId=null==this.inventoryTransaccion.productId?0:this.inventoryTransaccion.productId,this.inventoryTransaccion.buyCost=null==n.buyCost?0:n.buyCost,this.inventoryTransaccion.priceSale=null==n.priceSale?0:n.priceSale,this.inventoryTransaccion.quantity=null==n.quantity?0:n.quantity,this.inventoryTransaccion.transaccionType=null==this.transaccionInventaryType?"":this.transaccionInventaryType,this.inventoryTransaccion.wareHouse=0,this.inventoryTransaccion.description=null==n.description?"":n.description,this.inventoryTransaccion.userId=this.eventService.getToken(),this.hideDialog(),this.productService.AddProductTransaccion(this.inventoryTransaccion).subscribe(i=>{this.messageService.add(i.data?{severity:"success",summary:"Success",detail:"Se ha guardado de forma correcta",life:3e3}:{severity:"error",summary:"error",detail:i.message,life:3e3}),this.isLoading=!1})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.M),e.Y36(v.P),e.Y36(g.ez))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([g.ez])],decls:49,vars:22,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12","lg:col-6","xl:col-3",3,"click"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-plus-circle","text-green-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"pi","pi-minus-circle","text-red-500","text-xl"],["header","Agregar Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Ajuste de inventario: Agregar",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Ajuste de inventario: Rebajar",1,"p-fluid",3,"visible","modal","visibleChange"],["class","field",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["for","quantity"],["id","quantity",3,"ngModel","ngModelChange"],["for","productPrice"],[1,"field"],["for","status"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(e.YNc(0,A,2,0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return i.setInventaryTransaction("Buy")}),e.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"span",5),e._uU(8,"Compras"),e.qZA()(),e.TgZ(9,"div",6),e._UZ(10,"i",7),e.qZA()(),e.TgZ(11,"span",8),e._uU(12,"Agregar"),e.qZA(),e._UZ(13,"span",9),e.qZA()(),e.TgZ(14,"div",2),e.NdJ("click",function(){return i.setInventaryTransaction("AdjustmentAdd")}),e.TgZ(15,"div",3)(16,"div",4)(17,"div")(18,"span",5),e._uU(19,"Ajuste:Agregar"),e.qZA()(),e.TgZ(20,"div",6),e._UZ(21,"i",7),e.qZA()(),e.TgZ(22,"span",8),e._uU(23,"Agregar"),e.qZA(),e._UZ(24,"span",9),e.qZA()(),e.TgZ(25,"div",2),e.NdJ("click",function(){return i.setInventaryTransaction("AdjustmentReduce")}),e.TgZ(26,"div",3)(27,"div",4)(28,"div")(29,"span",5),e._uU(30,"Ajuste:Reducir"),e.qZA()(),e.TgZ(31,"div",6),e._UZ(32,"i",10),e.qZA()(),e.TgZ(33,"span",8),e._uU(34,"Reducir"),e.qZA(),e._UZ(35,"span",9),e.qZA()()(),e.TgZ(36,"div")(37,"u")(38,"li"),e._uU(39," Primero "),e.qZA()()(),e.TgZ(40,"p-dialog",11),e.NdJ("visibleChange",function(a){return i.showBuyDialog=a}),e.YNc(41,N,16,5,"ng-template",12),e.YNc(42,S,2,0,"ng-template",13),e.qZA(),e.TgZ(43,"p-dialog",14),e.NdJ("visibleChange",function(a){return i.showAddDialog=a}),e.YNc(44,q,16,5,"ng-template",12),e.YNc(45,U,2,0,"ng-template",13),e.qZA(),e.TgZ(46,"p-dialog",15),e.NdJ("visibleChange",function(a){return i.showReduceDialog=a}),e.YNc(47,H,16,5,"ng-template",12),e.YNc(48,B,2,0,"ng-template",13),e.qZA()),2&n&&(e.Q6J("ngIf",i.isLoading),e.xp6(9),e.Q6J("ngStyle",e.DdM(16,T)),e.xp6(11),e.Q6J("ngStyle",e.DdM(17,T)),e.xp6(11),e.Q6J("ngStyle",e.DdM(18,T)),e.xp6(9),e.Akn(e.DdM(19,f)),e.Q6J("visible",i.showBuyDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(20,f)),e.Q6J("visible",i.showAddDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(21,f)),e.Q6J("visible",i.showReduceDialog)("modal",!0))},dependencies:[c.O5,c.PC,l.V,g.jx,u.Rn,p.Fj,p.JJ,p.Q7,p.On,_.Hq,I.R,b.t,C.FN,Z.g],styles:["div[_ngcontent-%COMP%]:hover {\n  cursor: pointer;\n}"]}),t})(),Q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild([{path:"",component:P}]),h.Bz]}),t})();var F=r(4891);let z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,Q,l.S,u.L$,p.u5,_.hJ,F.E,C.EV,Z.A]}),t})()},3407:(x,m,r)=>{r.d(m,{A:()=>e,g:()=>y});var c=r(5e3),h=r(9808),g=r(3075);let y=(()=>{class d{constructor(l,u,p,_){this.el=l,this.ngModel=u,this.control=p,this.cd=_,this.onResize=new c.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(l){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(l){this.autoResize&&this.resize(l)}onBlur(l){this.autoResize&&this.resize(l)}resize(l){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(l||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return d.\u0275fac=function(l){return new(l||d)(c.Y36(c.SBq),c.Y36(g.On,8),c.Y36(g.a5,8),c.Y36(c.sBO))},d.\u0275dir=c.lG2({type:d,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(l,u){1&l&&c.NdJ("input",function(_){return u.onInput(_)})("focus",function(_){return u.onFocus(_)})("blur",function(_){return u.onBlur(_)}),2&l&&c.ekj("p-filled",u.filled)("p-inputtextarea-resizable",u.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),d})(),e=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=c.oAB({type:d}),d.\u0275inj=c.cJS({imports:[h.ez]}),d})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7071],{7071:(f,g,e)=>{e.r(g),e.d(g,{CategoryModule:()=>J});var a=e(6895),m=e(9197),d=e(1546),l=e(805);class h{}var t=e(4650),p=e(7747),v=e(5384),r=e(99),c=e(2453),u=e(1383),y=e(5593),D=e(1493),I=e(1740),T=e(4006),P=e(7116);function Z(o,C){1&o&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function E(o,C){if(1&o){const n=t.EpF();t.TgZ(0,"div",17),t._UZ(1,"p-toast"),t.TgZ(2,"button",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.openNew())}),t.qZA()()}}function A(o,C){1&o&&(t.TgZ(0,"tr")(1,"th",19),t._uU(2,"Nombre "),t._UZ(3,"p-sortIcon",20),t.qZA(),t.TgZ(4,"th",21),t._uU(5,"Descripcion "),t._UZ(6,"p-sortIcon",22),t.qZA()())}function b(o,C){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&o){const n=C.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.description)}}function N(o,C){1&o&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function U(o,C){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.hideDialog())}),t.qZA(),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.saveCostumer())}),t.qZA()}}const O=function(){return{"min-width":"50rem"}},R=function(){return[10,25,50]},B=function(){return{width:"850px"}};let w=(()=>{class o{constructor(n,s,i,M){this.router=n,this.productService=s,this.eventService=i,this.messageService=M,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/category"}ngOnInit(){const s=this.eventService.getPermisionsException().split(",").map(i=>i.trim());this.redirect=s.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.GetCategory()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var n=new h;n.name=null==this.categoryName?"":this.categoryName,n.description=null==this.categoryDescription?"":this.categoryDescription,n.userIdentifiquer=this.eventService.getToken(),n.isCreating=this.isCreating,this.AddNewCategory(n)}AddNewCategory(n){this.showProgressBar=!0,this.productService.AddNewCategory(n).subscribe(s=>{s.data?(this.messageService.add({severity:"success",summary:"Success",detail:"La Categoria"+n.name+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCategory()):this.messageService.add({severity:"error",summary:"Error",detail:s.message,life:3e3}),this.showProgressBar=!1})}GetCategory(){this.showProgressBar=!0,this.productService.GetCategories(this.eventService.getToken()).subscribe(n=>{n.data?this.category=n.data:this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(m.F0),t.Y36(p.M),t.Y36(v.P),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t._Bn([l.ez])],decls:24,vars:17,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Descripcion",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","description",2,"width","20%"],["field","description"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(s,i){1&s&&(t.YNc(0,Z,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),t.YNc(6,E,3,0,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6),t.YNc(8,A,7,0,"ng-template",7),t.YNc(9,b,5,2,"ng-template",8),t.qZA()()()()(),t.TgZ(10,"p-dialog",9),t.NdJ("visibleChange",function(_){return i.showDialog=_}),t.YNc(11,N,2,0,"div",0),t.TgZ(12,"div",10)(13,"div",11)(14,"label",12),t._uU(15,"Nombre"),t.qZA(),t.TgZ(16,"div",13)(17,"input",14),t.NdJ("ngModelChange",function(_){return i.categoryName=_}),t.qZA()()(),t.TgZ(18,"div",11)(19,"label",12),t._uU(20,"Descripcion"),t.qZA(),t.TgZ(21,"div",13)(22,"input",15),t.NdJ("ngModelChange",function(_){return i.categoryDescription=_}),t.qZA()()()(),t.YNc(23,U,2,0,"ng-template",16),t.qZA()),2&s&&(t.Q6J("ngIf",i.showProgressBar),t.xp6(7),t.Q6J("value",i.category)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",t.DdM(14,O))("rowsPerPageOptions",t.DdM(15,R)),t.xp6(3),t.Akn(t.DdM(16,B)),t.Q6J("visible",i.showDialog)("modal",!0),t.xp6(1),t.Q6J("ngIf",i.showProgressBar),t.xp6(6),t.Q6J("ngModel",i.categoryName),t.xp6(5),t.Q6J("ngModel",i.categoryDescription))},dependencies:[a.O5,r.iA,l.jx,r.lQ,r.fz,c.FN,u.o,y.Hq,D.V,I.o,T.Fj,T.JJ,T.On,P.R],encapsulation:2})}return o})(),x=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild([{path:"",component:w,canActivate:[d.j]}]),m.Bz]})}return o})();var S=e(4891);let J=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez,x,r.U$,c.EV,u.V,y.hJ,D.S,I.j,T.u5,S.E]})}return o})()},2384:(f,g,e)=>{e.d(g,{b:()=>a});class a{}},7116:(f,g,e)=>{e.d(g,{R:()=>d});var a=e(4650),m=e(3162);let d=(()=>{class l{constructor(){}static#t=this.\u0275fac=function(p){return new(p||l)};static#e=this.\u0275cmp=a.Xpm({type:l,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(p,v){1&p&&a._UZ(0,"mat-progress-bar",0)},dependencies:[m.pW],encapsulation:2})}return l})()},7083:(f,g,e)=>{e.d(g,{K:()=>t});var a=e(529),m=e(2340),d=e(2384),l=e(4650);const h=m.N.baseUrl;let t=(()=>{class p{constructor(r){this.http=r}addUser(r){return this.http.post(`${h}auth/register`,r)}login(r,c){var u=new d.b;return u.email=r,u.password=c,this.http.post(`${h}auth/login`,u)}GetUserPermisions(){const y={headers:new a.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",y)}static#t=this.\u0275fac=function(c){return new(c||p)(l.LFG(a.eN))};static#e=this.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1546:(f,g,e)=>{e.d(g,{j:()=>h});var a=e(4650),m=e(5384),d=e(9197),l=e(7083);let h=(()=>{class t{constructor(v,r,c){this.eventService=v,this.router=r,this._userService=c,this.isTokenValid=!1}canActivate(v,r){const c=this.eventService.getToken();return(""==c||null==c||null==c)&&this.router.navigateByUrl("/auth/login"),!0}static#t=this.\u0275fac=function(r){return new(r||t)(a.LFG(m.P),a.LFG(d.F0),a.LFG(l.K))};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);
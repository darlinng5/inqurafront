"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[5463],{7116:(y,m,r)=>{r.d(m,{R:()=>g});var l=r(4650),u=r(3162);let g=(()=>{class d{constructor(){}static#t=this.\u0275fac=function(p){return new(p||d)};static#e=this.\u0275cmp=l.Xpm({type:d,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(p,b){1&p&&l._UZ(0,"mat-progress-bar",0)},dependencies:[u.pW],encapsulation:2})}return d})()},5463:(y,m,r)=>{r.r(m),r.d(m,{PolistModule:()=>z});var l=r(6895),u=r(9197),g=r(805);class d{constructor(a,e,o,i,s){this.numeroOrden=a,this.fecha=e,this.company=i,this.proveedor=o,this.productos=s,this.calcularTotales()}calcularTotales(){this.subtotal=this.productos.reduce((a,e)=>a+e.total,0),this.total=this.subtotal}}class O{constructor(a,e,o,i,s,c){this.name="",this.address="",this.city="",this.state="",this.zipCode="",this.phone="",this.name=a,this.address=e,this.city=o,this.state=i,this.zipCode=s,this.phone=c}}class h{constructor(a,e,o,i){this.nombre=a,this.direccion=e,this.ciudadEstadoCP=o,this.telefono=i}}class p{constructor(a,e,o){this.cantidad=a,this.descripcion=e,this.precioUnitario=o,this.total=a*o}}var b=r(6166),U=r(4159),A=r.n(U),t=r(4650),L=r(5384),M=r(7747),f=r(99),_=r(5593),v=r(2453),w=r(7116),Z=r(1493),T=r(5108);function q(n,a){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createNew())}),t.qZA(),t.TgZ(2,"span",15)(3,"input",16,17),t.NdJ("input",function(i){t.CHM(e);const s=t.oxw(),c=t.MAs(4);return t.KtG(s.onGlobalFilter(c,i))}),t.qZA()()()}}function N(n,a){1&n&&(t.TgZ(0,"tr")(1,"th")(2,"div",18),t._uU(3," ID "),t._UZ(4,"p-columnFilter",19),t.qZA()(),t.TgZ(5,"th")(6,"div",18),t._uU(7," OC "),t._UZ(8,"p-columnFilter",20),t.qZA()(),t.TgZ(9,"th")(10,"div",18),t._uU(11," Proveedor "),t._UZ(12,"p-columnFilter",21),t.qZA()(),t.TgZ(13,"th")(14,"div",18),t._uU(15," Estado "),t._UZ(16,"p-columnFilter",22),t.qZA()(),t.TgZ(17,"th")(18,"div",18),t._uU(19," Fecha "),t._UZ(20,"p-columnFilter",23),t.qZA()(),t.TgZ(21,"th",24),t._uU(22," Acciones "),t.qZA()())}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",25)(13,"p-button",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.editPo(s))}),t.qZA(),t.TgZ(14,"p-button",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.deletePo(s))}),t.qZA(),t.TgZ(15,"p-button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.viewPo(s))}),t.qZA()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.supplier),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Oqu(t.lcZ(11,5,e.date))}}function E(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"No se encontraron datos."),t.qZA()())}function B(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"Cargando datos, por favor espera..."),t.qZA()())}function j(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"currency"),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Oqu(t.gM2(7,4,e.precioUnitario,"L.","symbol-narrow","1.2-2")),t.xp6(3),t.Oqu(t.gM2(10,9,e.total,"L.","symbol-narrow","1.2-2"))}}function k(n,a){if(1&n&&(t.TgZ(0,"div",30)(1,"div",31)(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",32)(7,"div")(8,"h3"),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11),t._UZ(12,"br"),t._uU(13),t._UZ(14,"br"),t._uU(15),t.qZA()(),t._UZ(16,"div"),t.qZA(),t.TgZ(17,"div",33)(18,"h3"),t._uU(19,"Proveedor:"),t.qZA(),t.TgZ(20,"p"),t._uU(21),t._UZ(22,"br"),t._uU(23),t._UZ(24,"br"),t._uU(25),t._UZ(26,"br"),t._uU(27),t.qZA()(),t.TgZ(28,"table")(29,"thead")(30,"tr")(31,"th"),t._uU(32,"Cantidad"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Descripci\xf3n"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Precio Unitario"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Total"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,j,11,14,"tr",34),t.qZA()(),t.TgZ(41,"div",35)(42,"p"),t._uU(43),t.ALo(44,"currency"),t.qZA(),t.TgZ(45,"p"),t._uU(46),t.ALo(47,"currency"),t.qZA()(),t.TgZ(48,"div",36),t._UZ(49,"hr",37),t.TgZ(50,"p",38),t._uU(51,"Responsable"),t.qZA()(),t.TgZ(52,"div",36),t._UZ(53,"hr",37),t.TgZ(54,"p",38),t._uU(55,"Autorizado por"),t.qZA()()(),t.TgZ(56,"div",39)(57,"p"),t._uU(58,"inQura Cloud | www.inqura.cloud"),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" Orden de Compra #: ",e.purchaseOrder.numeroOrden,""),t.xp6(2),t.hij("Fecha: ",e.purchaseOrder.fecha,""),t.xp6(4),t.Oqu(e.purchaseOrder.company.name),t.xp6(2),t.Oqu(e.purchaseOrder.company.address),t.xp6(2),t.hij(" ",e.purchaseOrder.company.city,""),t.xp6(2),t.hij(" Tel: ",e.purchaseOrder.company.phone,""),t.xp6(6),t.Oqu(e.purchaseOrder.proveedor.nombre),t.xp6(2),t.hij(" ",e.purchaseOrder.proveedor.direccion,""),t.xp6(2),t.hij(" ",e.purchaseOrder.proveedor.ciudadEstadoCP,""),t.xp6(2),t.hij(" Tel: ",e.purchaseOrder.proveedor.telefono,""),t.xp6(13),t.Q6J("ngForOf",e.purchaseOrder.productos),t.xp6(3),t.hij("Subtotal: ",t.gM2(44,13,e.purchaseOrder.subtotal,"L.","symbol-narrow","1.2-2"),""),t.xp6(3),t.hij("Total: ",t.gM2(47,18,e.purchaseOrder.total,"L.","symbol-narrow","1.2-2"),"")}}const J=function(){return["supplier","name","status"]},I=function(){return{width:"1050px"}};let D=(()=>{class n{constructor(e,o,i,s){this.router=e,this.messageService=o,this.eventService=i,this.productService=s,this.poList=[],this.loading=!1,this.numeroOrden="OC-2024-001",this.fecha="05/08/2024",this.purchaseOrder=new d("OC-2023-001","2023-08-17",new h("Electr\xf3nica Moderna S.A.","Av. Tecnolog\xeda 123","Ciudad Innovaci\xf3n, Estado Digital, CP 12345","(987) 654-3210"),new O("Name","Address","City","state","ZipCode","Phone"),[new p(5,"Laptop Ultrabook X1",15e3),new p(10,'Monitor 4K 27"',5e3),new p(20,"Teclado mec\xe1nico RGB",1200)])}ngOnInit(){this.getPoList(),this.poList=[]}onGlobalFilter(e,o){e.filterGlobal(o.target.value,"contains")}createNew(){let e={queryParams:{po:JSON.stringify(0)}};this.router.navigate(["/pages/po"],e)}editPo(e){let o={queryParams:{po:JSON.stringify(e.id)}};this.router.navigate(["/pages/po"],o)}viewPo(e){this.GetPurchaseOrder(e.id)}hideDialog(){this.showViewPo=!1}deletePo(e){this.isLoading=!0;const o=this.eventService.getToken();this.productService.DeletePo(e.id,o).subscribe(i=>{console.log(i),i.data?(this.messageService.add({severity:"success",summary:"Success",detail:"Exito al guardar los datos",life:3e3}),this.getPoList()):this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3}),this.isLoading=!1},i=>{this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3})})}getPoList(){this.isLoading=!0;const e=this.eventService.getToken();this.productService.GetPoList(e).subscribe(o=>{o.data?(this.poList=[],this.poList=o.data):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.isLoading=!1},o=>{this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3})})}GetPurchaseOrder(e){this.isLoading=!0,this.productService.getPurchaseOrderToPrint(e,this.eventService.getToken()).subscribe(o=>{this.purchaseOrder=o.data,this.isLoading=!1,this.showViewPo=!0},o=>{this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:6e3})})}printReport(){this.showViewPo=!1,this.isLoading=!0;const e=document.getElementById("print-section"),o=new b.ZP("p","pt","a4");A()(e,{background:"white",scale:3}).then(s=>{const c=s.toDataURL("image/PNG"),x=o.getImageProperties(c),C=o.internal.pageSize.getWidth()-30;o.addImage(c,"PNG",15,15,C,x.height*C/x.width,void 0,"FAST");const V=o.output("blob"),$=URL.createObjectURL(V);this.isLoading=!1,window.open($,"_blank")})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(u.F0),t.Y36(g.ez),t.Y36(L.P),t.Y36(M.M))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-po-list-table"]],features:[t._Bn([g.ez])],decls:14,vars:13,consts:[[1,"card","px-6","py-6"],[4,"ngIf"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Visualizar orden de compra",1,"p-fluid",3,"visible","modal","visibleChange"],["align","right"],["pButton","","label","Imprimir","icon","pi pi-print",1,"p-button-outlined","mb-2",3,"click"],["pTemplate","content"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Nueva Orden de Compra","icon","pi pi-plus",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","id","display","menu","placeholder","Buscar por ID"],["type","text","field","name","display","menu","placeholder","Buscar por #OC"],["type","text","field","supplier","display","menu","placeholder","Buscar por Proveedor"],["type","text","field","status","display","menu","placeholder","Buscar por Estado"],["type","date","field","date","display","menu","placeholder","dd/MM/yyyy"],[2,"width","12rem"],[2,"min-width","12rem"],["icon","pi pi-pencil","styleClass","p-button-rounded p-button-warning p-button-text",3,"click"],["icon","pi pi-trash","styleClass","p-button-rounded p-button-danger p-button-text",3,"click"],["icon","pi pi-eye","styleClass","p-button-rounded p-button-info p-button-text",3,"click"],["colspan","5"],["id","print-section",1,"orden-compra"],[1,"header"],[1,"company-info"],[1,"order-details"],[4,"ngFor","ngForOf"],[1,"total"],[2,"text-align","center","margin-top","50px"],[2,"width","50%","margin","0 auto"],[2,"margin-top","10px"],[1,"footer"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,q,2,0,"div",1),t._UZ(2,"p-toast"),t.TgZ(3,"p-table",2,3),t.YNc(5,F,5,0,"ng-template",4),t.YNc(6,N,23,0,"ng-template",5),t.YNc(7,S,16,7,"ng-template",6),t.YNc(8,E,3,0,"ng-template",7),t.YNc(9,B,3,0,"ng-template",8),t.qZA(),t.TgZ(10,"p-dialog",9),t.NdJ("visibleChange",function(c){return i.showViewPo=c}),t.TgZ(11,"p-divider",10)(12,"button",11),t.NdJ("click",function(){return i.printReport()}),t.qZA()(),t.YNc(13,k,59,23,"ng-template",12),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("value",i.poList)("rows",10)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",t.DdM(11,J)),t.xp6(7),t.Akn(t.DdM(12,I)),t.Q6J("visible",i.showViewPo)("modal",!0))},dependencies:[l.sg,l.O5,f.iA,g.jx,f.xl,_.Hq,_.zx,v.FN,w.R,Z.V,T.i,l.H9,l.uU],styles:["[_ngcontent-%COMP%]:root{--primary-color: #023b78;--secondary-color: #1565bb;--background-color: #f0f8ff;--text-color: #333;--border-color: #ccc;--hover-color: #e9ecef;--highlight-color: #d0e4ff}.p-datatable-gridlines[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover{background-color:var(--highlight-color)}.p-datatable-gridlines[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .p-datatable-gridlines[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color)}.p-button-rounded[_ngcontent-%COMP%]{border-radius:50%}.p-button-warning[_ngcontent-%COMP%]{background-color:var(--secondary-color)!important;border-color:var(--secondary-color)!important}.p-button-danger[_ngcontent-%COMP%]{background-color:#f44336!important;border-color:#f44336!important}.orden-compra[_ngcontent-%COMP%]{font-family:Arial,sans-serif;line-height:1.6;color:#333;max-width:800px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{background-color:#1e3a8a;color:#fff;padding:20px;text-align:center;margin-bottom:20px}.company-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.order-details[_ngcontent-%COMP%]{border:2px solid #1e3a8a;padding:10px;margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #1e3a8a;padding:10px;text-align:left}th[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff}.total[_ngcontent-%COMP%]{text-align:right;font-weight:700}.footer[_ngcontent-%COMP%]{background-color:#1e3a8a;color:#fff;text-align:center;padding:10px;position:fixed;bottom:0;width:100%;left:0}@media print{.footer[_ngcontent-%COMP%]{position:fixed;bottom:0}.orden-compra[_ngcontent-%COMP%]{margin-bottom:50px}}"]})}return n})(),G=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild([{path:"",component:D}]),u.Bz]})}return n})();var R=r(4006),Y=r(4891);let z=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[l.ez,G,R.u5,f.U$,_.hJ,v.EV,Y.E,Z.S,T.x]})}return n})()}}]);
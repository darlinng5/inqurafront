"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9932],{9932:(T,d,n)=>{n.r(d),n.d(d,{SupplierModule:()=>B});var l=n(6895),m=n(9197),g=n(1546),p=n(805);class v{}var e=n(4650),u=n(7747),f=n(5384),r=n(99),a=n(2453),h=n(1383),Z=n(5593),A=n(1493),S=n(1740),M=n(4006),N=n(7116);function I(i,C){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function U(i,C){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"p-toast"),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA()()}}function P(i,C){1&i&&(e.TgZ(0,"tr")(1,"th",22),e._uU(2,"Rtn "),e._UZ(3,"p-sortIcon",23),e.qZA(),e.TgZ(4,"th",24),e._uU(5,"Nombre "),e._UZ(6,"p-sortIcon",25),e.qZA(),e.TgZ(7,"th",26),e._uU(8,"Apellido "),e._UZ(9,"p-sortIcon",27),e.qZA(),e.TgZ(10,"th",28),e._uU(11,"Direcci\xf3n "),e._UZ(12,"p-sortIcon",29),e.qZA(),e.TgZ(13,"th",30),e._uU(14,"Celular "),e._UZ(15,"p-sortIcon",31),e.qZA()())}function b(i,C){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&i){const t=C.$implicit;e.xp6(2),e.Oqu(t.rtn),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.middleName),e.xp6(2),e.Oqu(t.address),e.xp6(2),e.Oqu(t.cellPhone)}}function E(i,C){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function y(i,C){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveCostumer())}),e.qZA()}}const R=function(){return{"min-width":"50rem"}},D=function(){return[10,25,50]},O=function(){return{width:"850px"}};let x=(()=>{class i{constructor(t,s,o,_){this.router=t,this.productService=s,this.eventService=o,this.messageService=_,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/supplier"}ngOnInit(){const s=this.eventService.getPermisionsException().split(",").map(o=>o.trim());this.redirect=s.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(o=>this.products1=o),this.GetSuppliers()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var t=new v;t.id=this.isCreating?0:this.costumerId,t.rtn=null==this.costumerRTN?"":this.costumerRTN,t.name=null==this.costumerName?"":this.costumerName,t.middleName=null==this.costumerMiddleName?"":this.costumerMiddleName,t.address=null==this.costumerAddress?"":this.costumerAddress,t.cellphone=null==this.costumerCellphone?"":this.costumerCellphone,t.userIdentifiquer=this.eventService.getToken(),t.isCreating=this.isCreating,this.AddNewCostumer(t)}AddNewCostumer(t){this.showProgressBar=!0,this.productService.AddNewSupplier(t).subscribe(s=>{s.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El proveedor "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetSuppliers()):this.messageService.add({severity:"error",summary:"Error",detail:s.message,life:3e3}),this.showProgressBar=!1})}GetSuppliers(){this.showProgressBar=!0,this.productService.GetSupplierByEnterprise(this.eventService.getToken()).subscribe(t=>{t.data?this.costumer=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(s){return new(s||i)(e.Y36(m.F0),e.Y36(u.M),e.Y36(f.P),e.Y36(p.ez))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e._Bn([p.ez])],decls:39,vars:20,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","RTN",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Apellido",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Celular",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Direcci\xf3n",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","rtn",2,"width","20%"],["field","rtn"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","middleName",2,"width","20%"],["field","middleName"],["pSortableColumn","address",2,"width","20%"],["field","address"],["pSortableColumn","cellPhone",2,"width","20%"],["field","cellPhone"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(s,o){1&s&&(e.YNc(0,I,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,U,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,P,16,0,"ng-template",7),e.YNc(9,b,11,5,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(c){return o.showDialog=c}),e.YNc(11,E,2,0,"div",0),e.TgZ(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"RTN"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(c){return o.costumerRTN=c}),e.qZA()()(),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Nombre"),e.qZA(),e.TgZ(21,"div",13)(22,"input",15),e.NdJ("ngModelChange",function(c){return o.costumerName=c}),e.qZA()()(),e.TgZ(23,"div",11)(24,"label",12),e._uU(25,"Apellido"),e.qZA(),e.TgZ(26,"div",13)(27,"input",16),e.NdJ("ngModelChange",function(c){return o.costumerMiddleName=c}),e.qZA()()(),e.TgZ(28,"div",11)(29,"label",12),e._uU(30,"Celular"),e.qZA(),e.TgZ(31,"div",13)(32,"input",17),e.NdJ("ngModelChange",function(c){return o.costumerCellphone=c}),e.qZA()()(),e.TgZ(33,"div",11)(34,"label",12),e._uU(35,"Direcci\xf3n"),e.qZA(),e.TgZ(36,"div",13)(37,"input",18),e.NdJ("ngModelChange",function(c){return o.costumerAddress=c}),e.qZA()()()(),e.YNc(38,y,2,0,"ng-template",19),e.qZA()),2&s&&(e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("value",o.costumer)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(17,R))("rowsPerPageOptions",e.DdM(18,D)),e.xp6(3),e.Akn(e.DdM(19,O)),e.Q6J("visible",o.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar),e.xp6(6),e.Q6J("ngModel",o.costumerRTN),e.xp6(5),e.Q6J("ngModel",o.costumerName),e.xp6(5),e.Q6J("ngModel",o.costumerMiddleName),e.xp6(5),e.Q6J("ngModel",o.costumerCellphone),e.xp6(5),e.Q6J("ngModel",o.costumerAddress))},dependencies:[l.O5,r.iA,p.jx,r.lQ,r.fz,a.FN,h.o,Z.Hq,A.V,S.o,M.Fj,M.JJ,M.On,N.R],encapsulation:2})}return i})(),J=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"",component:x,canActivate:[g.j]}]),m.Bz]})}return i})();var w=n(4891);let B=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[l.ez,J,r.U$,a.EV,h.V,Z.hJ,A.S,S.j,M.u5,w.E]})}return i})()},2384:(T,d,n)=>{n.d(d,{b:()=>l});class l{}},7116:(T,d,n)=>{n.d(d,{R:()=>g});var l=n(4650),m=n(3162);let g=(()=>{class p{constructor(){}static#e=this.\u0275fac=function(u){return new(u||p)};static#t=this.\u0275cmp=l.Xpm({type:p,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(u,f){1&u&&l._UZ(0,"mat-progress-bar",0)},dependencies:[m.pW],encapsulation:2})}return p})()},7083:(T,d,n)=>{n.d(d,{K:()=>e});var l=n(529),m=n(2340),g=n(2384),p=n(4650);const v=m.N.baseUrl;let e=(()=>{class u{constructor(r){this.http=r}addUser(r){return this.http.post(`${v}auth/register`,r)}login(r,a){var h=new g.b;return h.email=r,h.password=a,this.http.post(`${v}auth/login`,h)}GetUserPermisions(){const Z={headers:new l.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",Z)}static#e=this.\u0275fac=function(a){return new(a||u)(p.LFG(l.eN))};static#t=this.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},1546:(T,d,n)=>{n.d(d,{j:()=>v});var l=n(4650),m=n(5384),g=n(9197),p=n(7083);let v=(()=>{class e{constructor(f,r,a){this.eventService=f,this.router=r,this._userService=a,this.isTokenValid=!1}canActivate(f,r){const a=this.eventService.getToken();return(""==a||null==a||null==a)&&this.router.navigateByUrl("/auth/login"),!0}static#e=this.\u0275fac=function(r){return new(r||e)(l.LFG(m.P),l.LFG(g.F0),l.LFG(p.K))};static#t=this.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);
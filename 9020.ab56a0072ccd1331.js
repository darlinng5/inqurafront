"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9020],{9020:(Q,C,r)=>{r.r(C),r.d(C,{CostumerModule:()=>F});var f=r(9808),p=r(7449),M=r(1546),c=r(9783);class v{}var e=r(5e3),b=r(7747),N=r(5384),u=r(8952),Z=r(7773),_=r(4534),T=r(845),A=r(5315),S=r(1424),m=r(3075),x=r(7116);function w(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"p-toast"),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openNew())}),e.qZA()()}}function U(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",23),e._uU(2,"Rtn "),e._UZ(3,"p-sortIcon",24),e.qZA(),e.TgZ(4,"th",25),e._uU(5,"Nombre "),e._UZ(6,"p-sortIcon",26),e.qZA(),e.TgZ(7,"th",27),e._uU(8,"Apellido "),e._UZ(9,"p-sortIcon",28),e.qZA(),e.TgZ(10,"th",29),e._uU(11,"Direcci\xf3n "),e._UZ(12,"p-sortIcon",30),e.qZA(),e.TgZ(13,"th",31),e._uU(14,"Celular "),e._UZ(15,"p-sortIcon",32),e.qZA(),e.TgZ(16,"th",33),e._uU(17,"Email "),e._UZ(18,"p-sortIcon",34),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Options"),e.qZA()())}function J(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.editCustomer(s))}),e.qZA()()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.rtn),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.middleName),e.xp6(2),e.Oqu(t.address),e.xp6(2),e.Oqu(t.cellPhone),e.xp6(2),e.Oqu(t.email)}}function q(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function P(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideDialog())}),e.qZA(),e.TgZ(1,"button",37),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveCostumer())}),e.qZA()}}const B=function(){return{"min-width":"50rem"}},D=function(){return[10,25,50]},E=function(){return{width:"850px"}};let I=(()=>{class n{constructor(t,o,i,s){this.router=t,this.productService=o,this.eventService=i,this.messageService=s,this.CustomerSelectd=new v,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/costumer"}ngOnInit(){const o=this.eventService.getPermisionsException().split(",").map(i=>i.trim());this.redirect=o.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(i=>this.products1=i),this.GetCostumers()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0,this.CustomerSelectd=new v}editCustomer(t){this.isCreating=!1,this.CustomerSelectd=t,this.showDialog=!0}saveCostumer(){var t,o,i,s,d,g,h;const l=Object.assign({},this.CustomerSelectd);l.id=null!==(t=l.id)&&void 0!==t?t:0,l.rtn=null!==(o=l.rtn)&&void 0!==o?o:"",l.name=null!==(i=l.name)&&void 0!==i?i:"",l.middleName=null!==(s=l.middleName)&&void 0!==s?s:"",l.address=null!==(d=l.address)&&void 0!==d?d:"",l.cellphone=null!==(g=l.cellphone)&&void 0!==g?g:"",l.email=null!==(h=l.email)&&void 0!==h?h:"",l.userIdentifiquer=this.eventService.getToken(),this.isCreating?this.AddNewCostumer(l):this.EditCostumerService(l)}AddNewCostumer(t){this.showProgressBar=!0,this.productService.AddNewCostumer(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El cliente "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCostumers()):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}EditCostumerService(t){this.showProgressBar=!0,this.productService.EditCostumer(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El cliente "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCostumers()):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}GetCostumers(){this.showProgressBar=!0,this.productService.GetCostumerByEnterprise(this.eventService.getToken()).subscribe(t=>{t.data?this.costumer=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(b.M),e.Y36(N.P),e.Y36(c.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([c.ez])],decls:44,vars:21,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","RTN",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Apellido",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Celular",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Direcci\xf3n",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Email",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","rtn",2,"width","20%"],["field","rtn"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","middleName",2,"width","20%"],["field","middleName"],["pSortableColumn","address",2,"width","20%"],["field","address"],["pSortableColumn","cellPhone",2,"width","20%"],["field","cellPhone"],["pSortableColumn","email",2,"width","20%"],["field","email"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,w,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,y,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,U,21,0,"ng-template",7),e.YNc(9,J,15,6,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(s){return o.showDialog=s}),e.YNc(11,q,2,0,"div",0),e.TgZ(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"RTN"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.rtn=s}),e.qZA()()(),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Nombre"),e.qZA(),e.TgZ(21,"div",13)(22,"input",15),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.name=s}),e.qZA()()(),e.TgZ(23,"div",11)(24,"label",12),e._uU(25,"Apellido"),e.qZA(),e.TgZ(26,"div",13)(27,"input",16),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.middleName=s}),e.qZA()()(),e.TgZ(28,"div",11)(29,"label",12),e._uU(30,"Celular"),e.qZA(),e.TgZ(31,"div",13)(32,"input",17),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.cellphone=s}),e.qZA()()(),e.TgZ(33,"div",11)(34,"label",12),e._uU(35,"Direcci\xf3n"),e.qZA(),e.TgZ(36,"div",13)(37,"input",18),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.address=s}),e.qZA()()(),e.TgZ(38,"div",11)(39,"label",12),e._uU(40,"Correo"),e.qZA(),e.TgZ(41,"div",13)(42,"input",19),e.NdJ("ngModelChange",function(s){return o.CustomerSelectd.email=s}),e.qZA()()()(),e.YNc(43,P,2,0,"ng-template",20),e.qZA()),2&t&&(e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("value",o.costumer)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(18,B))("rowsPerPageOptions",e.DdM(19,D)),e.xp6(3),e.Akn(e.DdM(20,E)),e.Q6J("visible",o.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar),e.xp6(6),e.Q6J("ngModel",o.CustomerSelectd.rtn),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.name),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.middleName),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.cellphone),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.address),e.xp6(5),e.Q6J("ngModel",o.CustomerSelectd.email))},dependencies:[f.O5,u.iA,c.jx,u.lQ,u.fz,Z.FN,_.o,T.Hq,A.V,S.o,m.Fj,m.JJ,m.On,x.R],encapsulation:2}),n})(),R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild([{path:"",component:I,canActivate:[M.j]}]),p.Bz]}),n})();var O=r(4891);let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,R,u.U$,Z.EV,_.V,T.hJ,A.S,S.j,m.u5,O.E]}),n})()}}]);
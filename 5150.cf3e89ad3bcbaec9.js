"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[5150],{6768:(f,u,t)=>{t.d(u,{t:()=>e});var i=t(4650),m=t(7747),h=t(5384),l=t(4006),g=t(2210);let e=(()=>{class c{constructor(s,r){this.commonService=s,this.eventService=r,this.ValueSelectedChange=new i.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#e=this.\u0275fac=function(r){return new(r||c)(i.Y36(m.M),i.Y36(h.P))};static#t=this.\u0275cmp=i.Xpm({type:c,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(r,d){1&r&&(i.TgZ(0,"p-dropdown",0),i.NdJ("onClick",function(){return d.selectedValue()})("onChange",function(){return d.changeValue()})("ngModelChange",function(P){return d.selectedData=P}),i.qZA()),2&r&&i.Q6J("filter",d.Filter)("options",d.data)("ngModel",d.selectedData)},dependencies:[l.JJ,l.On,g.Lt],encapsulation:2})}return c})()},2384:(f,u,t)=>{t.d(u,{b:()=>i});class i{}},7116:(f,u,t)=>{t.d(u,{R:()=>h});var i=t(4650),m=t(3162);let h=(()=>{class l{constructor(){}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275cmp=i.Xpm({type:l,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(c,v){1&c&&i._UZ(0,"mat-progress-bar",0)},dependencies:[m.pW],encapsulation:2})}return l})()},5150:(f,u,t)=>{t.r(u),t.d(u,{PayTypeModule:()=>x});var i=t(6895),m=t(9197),h=t(1546),l=t(805);class g{}var e=t(4650),c=t(7747),v=t(5384),s=t(99),r=t(2453),d=t(1383),_=t(5593),P=t(1493),M=t(1740),D=t(4006),E=t(7116),Z=t(6768);function I(o,y){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function S(o,y){if(1&o){const n=e.EpF();e.TgZ(0,"div",17),e._UZ(1,"p-toast"),e.TgZ(2,"button",18),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.openNew())}),e.qZA()()}}function A(o,y){1&o&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2,"Nombre"),e._UZ(3,"p-sortIcon",20),e.qZA(),e.TgZ(4,"th",21),e._uU(5,"Descripcion "),e._UZ(6,"p-sortIcon",22),e.qZA(),e.TgZ(7,"th",23),e._uU(8,"Tipo "),e._UZ(9,"p-sortIcon",24),e.qZA()())}function w(o,y){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const n=y.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.description),e.xp6(2),e.Oqu(n.type)}}function U(o,y){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function O(o,y){if(1&o){const n=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"label",12),e._uU(3,"Tipo"),e.qZA(),e.TgZ(4,"div",13)(5,"app-drop-down",25),e.NdJ("ValueSelectedChange",function(a){e.CHM(n);const T=e.oxw();return e.KtG(T.filterPayTypeGeneric(a))}),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(5),e.Q6J("IsCreating",!0)("DropDownDataSource",n.payTypeGeneric)}}function N(o,y){if(1&o){const n=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.saveCostumer())}),e.qZA()}}const b=function(){return{"min-width":"50rem"}},R=function(){return[10,25,50]},B=function(){return{width:"850px"}};let G=(()=>{class o{constructor(n,p,a,T){this.router=n,this.productService=p,this.eventService=a,this.messageService=T,this.payTypeData=[],this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.isLoadingPayGeneric=!0,this.redirect=!1,this.AccessName="/pages/pay-type",this.GetGenericPayTypes(),this.GetPayTypes()}ngOnInit(){const p=this.eventService.getPermisionsException().split(",").map(a=>a.trim());this.redirect=p.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(a=>this.products1=a)}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var n=new g;n.name=null==this.payName?"":this.payName,n.description=null==this.payDescription?"":this.payDescription,n.id=this.payTypeId,n.userId=this.eventService.getToken(),this.AddNewPayType(n)}AddNewPayType(n){this.showProgressBar=!0,this.productService.AddNewPayTypeEnterprise(n).subscribe(p=>{p.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El tipo de pago "+n.name+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetPayTypes()):this.messageService.add({severity:"error",summary:"Error",detail:p.message,life:3e3}),this.showProgressBar=!1})}filterPayTypeGeneric(n){this.payTypeId=n}GetGenericPayTypes(){this.isLoadingPayGeneric=!0,this.productService.GetGenericPayTypes(this.eventService.getToken()).subscribe(n=>{n.data?this.payTypeGeneric=n.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3}),this.isLoadingPayGeneric=!1})}GetPayTypes(){this.showProgressBar=!0,this.productService.GetPayTypesReport(this.eventService.getToken()).subscribe(n=>{n.data?this.payTypeData=n.data:this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(p){return new(p||o)(e.Y36(m.F0),e.Y36(c.M),e.Y36(v.P),e.Y36(l.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e._Bn([l.ez])],decls:31,vars:18,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Descripci\xf3n",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","rtn"],["pSortableColumn","description",2,"width","20%"],["field","name"],["pSortableColumn","type",2,"width","20%"],["field","middleName"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(p,a){1&p&&(e.YNc(0,I,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,S,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,A,10,0,"ng-template",7),e.YNc(9,w,7,3,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(C){return a.showDialog=C}),e.YNc(11,U,2,0,"div",0),e.TgZ(12,"div",10),e.YNc(13,O,6,2,"div",0),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Nombre"),e.qZA(),e.TgZ(17,"div",13)(18,"input",14),e.NdJ("ngModelChange",function(C){return a.payName=C}),e.qZA()()(),e.TgZ(19,"div",11)(20,"label",12),e._uU(21,"Descripci\xf3n"),e.qZA(),e.TgZ(22,"div",13)(23,"input",15),e.NdJ("ngModelChange",function(C){return a.payDescription=C}),e.qZA()()(),e.TgZ(24,"div",11),e._UZ(25,"label",12)(26,"div",13),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"label",12)(29,"div",13),e.qZA()(),e.YNc(30,N,2,0,"ng-template",16),e.qZA()),2&p&&(e.Q6J("ngIf",a.showProgressBar),e.xp6(7),e.Q6J("value",a.payTypeData)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(15,b))("rowsPerPageOptions",e.DdM(16,R)),e.xp6(3),e.Akn(e.DdM(17,B)),e.Q6J("visible",a.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",a.showProgressBar),e.xp6(2),e.Q6J("ngIf",!a.isLoadingPayGeneric),e.xp6(5),e.Q6J("ngModel",a.payName),e.xp6(5),e.Q6J("ngModel",a.payDescription))},dependencies:[i.O5,s.iA,l.jx,s.lQ,s.fz,r.FN,d.o,_.Hq,P.V,M.o,D.Fj,D.JJ,D.On,E.R,Z.t],encapsulation:2})}return o})(),F=(()=>{class o{static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"",component:G,canActivate:[h.j]}]),m.Bz]})}return o})();var J=t(4891);let x=(()=>{class o{static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[i.ez,F,s.U$,r.EV,d.V,_.hJ,P.S,M.j,D.u5,J.E]})}return o})()},7083:(f,u,t)=>{t.d(u,{K:()=>e});var i=t(529),m=t(2340),h=t(2384),l=t(4650);const g=m.N.baseUrl;let e=(()=>{class c{constructor(s){this.http=s}addUser(s){return this.http.post(`${g}auth/register`,s)}login(s,r){var d=new h.b;return d.email=s,d.password=r,this.http.post(`${g}auth/login`,d)}GetUserPermisions(){const _={headers:new i.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",_)}static#e=this.\u0275fac=function(r){return new(r||c)(l.LFG(i.eN))};static#t=this.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},1546:(f,u,t)=>{t.d(u,{j:()=>g});var i=t(4650),m=t(5384),h=t(9197),l=t(7083);let g=(()=>{class e{constructor(v,s,r){this.eventService=v,this.router=s,this._userService=r,this.isTokenValid=!1}canActivate(v,s){const r=this.eventService.getToken();return(""==r||null==r||null==r)&&this.router.navigateByUrl("/auth/login"),!0}static#e=this.\u0275fac=function(s){return new(s||e)(i.LFG(m.P),i.LFG(h.F0),i.LFG(l.K))};static#t=this.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);
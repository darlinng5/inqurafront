"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9238],{9238:(C,l,t)=>{t.r(l),t.d(l,{RecoveryPasswordModule:()=>A});var d=t(6895),a=t(9197),p=t(805),e=t(4650),w=t(8568),g=t(7747),c=t(5384),m=t(3425),i=t(4006),f=t(1740),y=t(2453),P=t(7116);function x(s,h){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function b(s,h){if(1&s){const n=e.EpF();e.TgZ(0,"p-password",10),e.NdJ("ngModelChange",function(o){e.CHM(n);const u=e.oxw();return e.KtG(u.newPassword=o)}),e.qZA()}if(2&s){const n=e.oxw();e.Q6J("ngModel",n.newPassword)("toggleMask",!0)}}function M(s,h){if(1&s){const n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.RequestPassword())}),e._uU(1,"Cambiar Contrase\xf1a"),e.qZA()}if(2&s){const n=e.oxw();e.Q6J("disabled",n.loading)}}function R(s,h){if(1&s){const n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.RequestPassword())}),e._uU(1,"Recuperar Contrase\xf1a"),e.qZA()}if(2&s){const n=e.oxw();e.Q6J("disabled",n.loading)}}let T=(()=>{class s{constructor(n,r,o,u,v,Y){this.layoutService=n,this.router=r,this.productService=o,this.eventService=u,this.messageService=v,this.route=Y,this.loading=!1,this.warehouseId=0,this.newPassword="",this.isConfirmPassword=!1,this.route.queryParams.subscribe(B=>{this.token=B.token,null!=this.token&&(this.isConfirmPassword=!0),console.log(this.token)})}RequestPassword(){this.isConfirmPassword?this.ConfirmNewPassword():this.RequestNewPassword()}ConfirmNewPassword(){this.loading=!0,this.productService.ConfirmPassword(this.email,this.newPassword,this.token).subscribe(n=>{n.data?(this.messageService.add({severity:"success",summary:"Success",detail:"Se ha cambiado su contrase\xf1a de forma correcta",life:8e3}),this.router.navigate(["/auth/login"])):this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.loading=!1},n=>{this.messageService.add({severity:"error",summary:"Error",detail:n,life:3e3}),this.loading=!1})}RequestNewPassword(){this.loading=!0,this.productService.recoveryPassword(this.email).subscribe(n=>{this.messageService.add(n.data?{severity:"success",summary:"Success",detail:"Se ha enviado un correo con un link, favor revise el correo y siga las instrucciones",life:8e3}:{severity:"error",summary:"Error",detail:n.message,life:3e3}),this.loading=!1},n=>{this.messageService.add({severity:"error",summary:"Error",detail:n,life:3e3}),this.loading=!1})}static#e=this.\u0275fac=function(r){return new(r||s)(e.Y36(w.P),e.Y36(a.F0),e.Y36(g.M),e.Y36(c.P),e.Y36(p.ez),e.Y36(a.gz))};static#n=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-revovery-password"]],features:[e._Bn([p.ez])],decls:15,vars:5,consts:[[4,"ngIf"],[1,"tarjeta"],[1,"center-card"],[1,"card"],[1,"card-header"],[1,"card-body"],["matInput","","pInputText","","placeholder","Correo","type","text",1,"w-full","mb-3",2,"padding","1rem",3,"ngModel","ngModelChange"],["id","password1","matInput","","placeholder","Escriba la nueva contrase\xf1a","styleClass","w-full mb-3",3,"ngModel","toggleMask","ngModelChange",4,"ngIf"],[1,"card-footer"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["id","password1","matInput","","placeholder","Escriba la nueva contrase\xf1a","styleClass","w-full mb-3",3,"ngModel","toggleMask","ngModelChange"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(r,o){1&r&&(e.TgZ(0,"body"),e.YNc(1,x,2,0,"div",0),e._UZ(2,"p-toast"),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),e._uU(8,"Recuperar contrase\xf1a"),e.qZA()(),e.TgZ(9,"div",5)(10,"input",6),e.NdJ("ngModelChange",function(v){return o.email=v}),e.qZA(),e.YNc(11,b,1,2,"p-password",7),e.qZA(),e.TgZ(12,"div",8),e.YNc(13,M,2,1,"button",9),e.YNc(14,R,2,1,"button",9),e.qZA()()()()()),2&r&&(e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(9),e.Q6J("ngModel",o.email),e.xp6(1),e.Q6J("ngIf",o.isConfirmPassword),e.xp6(2),e.Q6J("ngIf",o.isConfirmPassword),e.xp6(1),e.Q6J("ngIf",!o.isConfirmPassword))},dependencies:[d.O5,m.ro,i.Fj,i.JJ,i.On,f.o,y.FN,P.R],styles:[".center-card[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n.card[_ngcontent-%COMP%] {\n  width: 50%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n  transition: 0.3s;\n  border-radius: 5px;\n  padding: 20px;\n  text-align: center;\n}\n\n.card-header[_ngcontent-%COMP%] {\n  background-color: #f1f1f1;\n  padding: 20px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n\n.card-body[_ngcontent-%COMP%] {\n  padding: 20px;\n}\n\n.card-footer[_ngcontent-%COMP%] {\n  background-color: #f1f1f1;\n  padding: 20px;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n\nselect.form-control[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n\n.btn[_ngcontent-%COMP%] {\n  width: 100%;\n  background-color: #344ab7;\n  color: white;\n  padding: 14px 20px;\n  margin: 8px 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.btn[_ngcontent-%COMP%]:hover {\n  background-color: #45a049;\n}"]})}return s})(),S=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#n=this.\u0275mod=e.oAB({type:s});static#t=this.\u0275inj=e.cJS({imports:[a.Bz.forChild([{path:"",component:T}]),a.Bz]})}return s})();var Z=t(5132),E=t(5108),J=t(9364),F=t(9764),I=t(5593),O=t(2174),N=t(4891);let A=(()=>{class s{static#e=this.\u0275fac=function(r){return new(r||s)};static#n=this.\u0275mod=e.oAB({type:s});static#t=this.\u0275inj=e.cJS({imports:[d.ez,S,E.x,Z.l,J.S,F.Q,I.hJ,m.gz,i.UX,O.fx,i.u5,f.j,y.EV,N.E,f.j,i.u5]})}return s})()},7116:(C,l,t)=>{t.d(l,{R:()=>p});var d=t(4650),a=t(3162);let p=(()=>{class e{constructor(){}static#e=this.\u0275fac=function(c){return new(c||e)};static#n=this.\u0275cmp=d.Xpm({type:e,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(c,m){1&c&&d._UZ(0,"mat-progress-bar",0)},dependencies:[a.pW],encapsulation:2})}return e})()}}]);
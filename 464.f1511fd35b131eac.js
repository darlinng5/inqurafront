"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[464],{6768:(de,Y,A)=>{A.d(Y,{t:()=>B});var M=A(4650),C=A(7747),X=A(5384),j=A(4006),ie=A(2210);let B=(()=>{class e{constructor(U,Z){this.commonService=U,this.eventService=Z,this.ValueSelectedChange=new M.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#e=this.\u0275fac=function(Z){return new(Z||e)(M.Y36(C.M),M.Y36(X.P))};static#t=this.\u0275cmp=M.Xpm({type:e,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(Z,D){1&Z&&(M.TgZ(0,"p-dropdown",0),M.NdJ("onClick",function(){return D.selectedValue()})("onChange",function(){return D.changeValue()})("ngModelChange",function(G){return D.selectedData=G}),M.qZA()),2&Z&&M.Q6J("filter",D.Filter)("options",D.data)("ngModel",D.selectedData)},dependencies:[j.JJ,j.On,ie.Lt],encapsulation:2})}return e})()},7116:(de,Y,A)=>{A.d(Y,{R:()=>X});var M=A(4650),C=A(3162);let X=(()=>{class j{constructor(){}static#e=this.\u0275fac=function(e){return new(e||j)};static#t=this.\u0275cmp=M.Xpm({type:j,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(e,k){1&e&&M._UZ(0,"mat-progress-bar",0)},dependencies:[C.pW],encapsulation:2})}return j})()},464:(de,Y,A)=>{A.r(Y),A.d(Y,{InventoryModule:()=>d});var M=A(6895),C=A(9197),X=A(1546),j=A(805);class ie{}var B=A(5401),e=A(4650),k=A(529),U=A(7747),Z=A(5384),D=A(1493),re=A(5047),G=A(4006),Te=A(5593),$=A(7116),me=A(6768),z=A(2453),ge=A(3054);function Se(s,o){1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function xe(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",29),e.NdJ("ValueSelectedChange",function(a){e.CHM(r);const f=e.oxw(2);return e.KtG(f.filterProduct(a))}),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!0)("DropDownDataSource",r.products)}}function L(s,o){1&s&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function Ae(s,o){if(1&s){const r=e.EpF();e.YNc(0,xe,5,3,"div",18),e.YNc(1,L,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Precio de Compra"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=a)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=a)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Precio de Venta"),e.qZA(),e.TgZ(15,"p-inputNumber",22),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.priceSale=a)}),e.qZA()()(),e.TgZ(16,"div",19)(17,"div",20)(18,"label",25),e._uU(19,"Descripci\xf3n"),e.qZA(),e.TgZ(20,"textarea",26),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=a)}),e.qZA()()()}if(2&s){const r=e.oxw();e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",r.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.priceSale),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.description)}}function ke(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.postTransaccion(a.inventoryTransaccion))}),e.qZA()}}function ue(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Sucursales"),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",32),e.NdJ("ValueSelectedChange",function(a){e.CHM(r);const f=e.oxw(2);return e.KtG(f.filterWareHouse(a))}),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!1)("DropDownDataSource",r.wareHouseDropDown)}}function oe(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",29),e.NdJ("ValueSelectedChange",function(a){e.CHM(r);const f=e.oxw(2);return e.KtG(f.filterProduct(a))}),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!0)("DropDownDataSource",r.products)}}function J(s,o){1&s&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function ve(s,o){if(1&s){const r=e.EpF();e.YNc(0,ue,5,3,"div",18),e.YNc(1,oe,5,3,"div",18),e.YNc(2,J,3,0,"div",0),e.TgZ(3,"div",19)(4,"div",20)(5,"label",23),e._uU(6,"Cantidad"),e.qZA(),e.TgZ(7,"p-inputNumber",24),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=a)}),e.qZA()()(),e._UZ(8,"div",19),e.TgZ(9,"div",19)(10,"div",20)(11,"label",25),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"textarea",26),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=a)}),e.qZA()()()}if(2&s){const r=e.oxw();e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.quantity),e.xp6(6),e.Q6J("ngModel",r.inventoryTransaccion.description)}}function ye(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.postTransaccion(a.inventoryTransaccion))}),e.qZA()}}function be(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",33),e.NdJ("ValueSelectedChange",function(a){e.CHM(r);const f=e.oxw(2);return e.KtG(f.filterProduct(a))}),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(4),e.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",r.products)}}function Ce(s,o){1&s&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function W(s,o){if(1&s){const r=e.EpF();e.YNc(0,be,5,3,"div",18),e.YNc(1,Ce,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=a)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=a)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",26),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=a)}),e.qZA()()()}if(2&s){const r=e.oxw();e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",r.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.description)}}function we(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.postTransaccion(a.inventoryTransaccion))}),e.qZA()}}function Re(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",33),e.NdJ("ValueSelectedChange",function(a){e.CHM(r);const f=e.oxw(2);return e.KtG(f.filterProduct(a))}),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(4),e.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",r.products)}}function Me(s,o){1&s&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function Ue(s,o){if(1&s){const r=e.EpF();e.YNc(0,Re,5,3,"div",18),e.YNc(1,Me,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=a)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=a)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",26),e.NdJ("ngModelChange",function(a){e.CHM(r);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=a)}),e.qZA()()()}if(2&s){const r=e.oxw();e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",r.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",r.inventoryTransaccion.description)}}function fe(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.postTransaccion(a.inventoryTransaccion))}),e.qZA()}}const i=function(){return{width:"2.5rem",height:"2.5rem"}},t=function(){return{width:"650px"}};let n=(()=>{class s{constructor(r,h,a,f,v){this.router=r,this.http=h,this.productService=a,this.eventService=f,this.messageService=v,this.wareHouseSelectd="0",this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1,this.inventoryTransaccion=new ie,this.isLoading=!1,this.showTransferDialog=!1,this.redirect=!1,this.AccessName="/pages/inventory",this.getProductValues(),this.GetWareHouseByRole()}ngOnInit(){this.wareHouseSelectd="0";const h=this.eventService.getPermisionsException().split(",").map(a=>a.trim());this.redirect=h.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized")}setInventaryTransaction(r){"Buy"==r?(this.transaccionInventaryType="Buy",this.showBuyDialog=!0):"AdjustmentAdd"==r?(this.transaccionInventaryType="AdjustmentAdd",this.showAddDialog=!0):"AdjustmentReduce"==r?(this.transaccionInventaryType="AdjustmentReduce",this.showReduceDialog=!0):"Shared"==r&&(this.transaccionInventaryType="Shared",this.showTransferDialog=!0)}hideDialog(){this.transaccionInventaryType="",this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1,this.showTransferDialog=!1}getProductValues(){this.isLoading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(r=>{r.data&&(this.products=r.data),this.isLoading=!1})}filterProduct(r){this.inventoryTransaccion.productId=r}postTransaccion(r){this.isLoading=!0,this.inventoryTransaccion.productId=null==this.inventoryTransaccion.productId?0:this.inventoryTransaccion.productId,this.inventoryTransaccion.buyCost=null==r.buyCost?0:r.buyCost,this.inventoryTransaccion.priceSale=null==r.priceSale?0:r.priceSale,this.inventoryTransaccion.quantity=null==r.quantity?0:r.quantity,this.inventoryTransaccion.transaccionType=null==this.transaccionInventaryType?"":this.transaccionInventaryType,this.inventoryTransaccion.wareHouse=this.wareHouseSelectd,this.inventoryTransaccion.description=null==r.description?"":r.description,this.inventoryTransaccion.userId=this.eventService.getToken(),this.hideDialog(),console.log(this.inventoryTransaccion),this.productService.AddProductTransaccion(this.inventoryTransaccion).subscribe(h=>{this.messageService.add(h.data?{severity:"success",summary:"Success",detail:"Se ha guardado de forma correcta",life:3e3}:{severity:"error",summary:"error",detail:h.message,life:3e3}),this.isLoading=!1})}startRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.recorder=new B(r,{type:"audio",mimeType:"audio/wav"}),this.recorder.startRecording()})}stopRecording(){this.recorder.stopRecording(()=>{const r=this.recorder.getBlob(),h=URL.createObjectURL(r);console.log(h),console.log("Tama\xf1o del audioBlob:",r.size);const a=new FormData;a.append("audioStream",r,"audio.wav"),fetch("http://localhost:5134/api/Product/PostAudio",{method:"GET",body:a}).then(f=>{if(f.ok)return f.json();throw new Error("Error en la solicitud")}).then(f=>{console.log("Respuesta:",f)}).catch(f=>{console.error("Error en la solicitud:",f)})})}filterWareHouse(r){this.wareHouseSelectd=r}GetWareHouseByRole(){this.productService.GetWareHouseByRoleValues(this.eventService.getToken()).subscribe(r=>{r.data&&(this.wareHouseDropDown=r.data,this.wareHouseDropDown=this.wareHouseDropDown.filter(h=>"0"!==h.value)),this.isLoading=!1})}static#e=this.\u0275fac=function(h){return new(h||s)(e.Y36(C.F0),e.Y36(k.eN),e.Y36(U.M),e.Y36(Z.P),e.Y36(j.ez))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([j.ez])],decls:59,vars:29,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12","lg:col-6","xl:col-3",3,"click"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-plus-circle","text-green-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"pi","pi-share-alt","text-orange-500","text-xl"],[1,"pi","pi-minus-circle","text-red-500","text-xl"],["header","Agregar Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Transferir Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Ajuste de inventario: Agregar",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Ajuste de inventario: Rebajar",1,"p-fluid",3,"visible","modal","visibleChange"],["class","field",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["for","quantity"],["id","quantity",3,"ngModel","ngModelChange"],["for","productPrice"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"field"],["for","status"],[3,"IsCreating","showFilter","DropDownDataSource","ValueSelectedChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[2,"width","100%",3,"IsCreating","showFilter","DropDownDataSource","ValueSelectedChange"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"]],template:function(h,a){1&h&&(e.YNc(0,Se,2,0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return a.setInventaryTransaction("Buy")}),e.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"span",5),e._uU(8,"Compras"),e.qZA()(),e.TgZ(9,"div",6),e._UZ(10,"i",7),e.qZA()(),e.TgZ(11,"span",8),e._uU(12,"Agregar"),e.qZA(),e._UZ(13,"span",9),e.qZA()(),e.TgZ(14,"div",2),e.NdJ("click",function(){return a.setInventaryTransaction("Shared")}),e.TgZ(15,"div",3)(16,"div",4)(17,"div")(18,"span",5),e._uU(19,"Tranferencias"),e.qZA()(),e.TgZ(20,"div",6),e._UZ(21,"i",10),e.qZA()(),e.TgZ(22,"span",8),e._uU(23,"Transferir"),e.qZA(),e._UZ(24,"span",9),e.qZA()(),e.TgZ(25,"div",2),e.NdJ("click",function(){return a.setInventaryTransaction("AdjustmentAdd")}),e.TgZ(26,"div",3)(27,"div",4)(28,"div")(29,"span",5),e._uU(30,"Ajuste:Agregar"),e.qZA()(),e.TgZ(31,"div",6),e._UZ(32,"i",7),e.qZA()(),e.TgZ(33,"span",8),e._uU(34,"Agregar"),e.qZA(),e._UZ(35,"span",9),e.qZA()(),e.TgZ(36,"div",2),e.NdJ("click",function(){return a.setInventaryTransaction("AdjustmentReduce")}),e.TgZ(37,"div",3)(38,"div",4)(39,"div")(40,"span",5),e._uU(41,"Ajuste:Reducir"),e.qZA()(),e.TgZ(42,"div",6),e._UZ(43,"i",11),e.qZA()(),e.TgZ(44,"span",8),e._uU(45,"Reducir"),e.qZA(),e._UZ(46,"span",9),e.qZA()()(),e.TgZ(47,"p-dialog",12),e.NdJ("visibleChange",function(v){return a.showBuyDialog=v}),e.YNc(48,Ae,21,6,"ng-template",13),e.YNc(49,ke,2,0,"ng-template",14),e.qZA(),e.TgZ(50,"p-dialog",15),e.NdJ("visibleChange",function(v){return a.showTransferDialog=v}),e.YNc(51,ve,14,5,"ng-template",13),e.YNc(52,ye,2,0,"ng-template",14),e.qZA(),e.TgZ(53,"p-dialog",16),e.NdJ("visibleChange",function(v){return a.showAddDialog=v}),e.YNc(54,W,16,5,"ng-template",13),e.YNc(55,we,2,0,"ng-template",14),e.qZA(),e.TgZ(56,"p-dialog",17),e.NdJ("visibleChange",function(v){return a.showReduceDialog=v}),e.YNc(57,Ue,16,5,"ng-template",13),e.YNc(58,fe,2,0,"ng-template",14),e.qZA()),2&h&&(e.Q6J("ngIf",a.isLoading),e.xp6(9),e.Q6J("ngStyle",e.DdM(21,i)),e.xp6(11),e.Q6J("ngStyle",e.DdM(22,i)),e.xp6(11),e.Q6J("ngStyle",e.DdM(23,i)),e.xp6(11),e.Q6J("ngStyle",e.DdM(24,i)),e.xp6(5),e.Akn(e.DdM(25,t)),e.Q6J("visible",a.showBuyDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(26,t)),e.Q6J("visible",a.showTransferDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(27,t)),e.Q6J("visible",a.showAddDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(28,t)),e.Q6J("visible",a.showReduceDialog)("modal",!0))},dependencies:[M.O5,M.PC,D.V,j.jx,re.Rn,G.Fj,G.JJ,G.Q7,G.On,Te.Hq,$.R,me.t,z.FN,ge.g],styles:["div[_ngcontent-%COMP%]:hover {\n  cursor: pointer;\n}"]})}return s})(),u=(()=>{class s{static#e=this.\u0275fac=function(h){return new(h||s)};static#t=this.\u0275mod=e.oAB({type:s});static#n=this.\u0275inj=e.cJS({imports:[C.Bz.forChild([{path:"",component:n,canActivate:[X.j]}]),C.Bz]})}return s})();var p=A(4891);let d=(()=>{class s{static#e=this.\u0275fac=function(h){return new(h||s)};static#t=this.\u0275mod=e.oAB({type:s});static#n=this.\u0275inj=e.cJS({imports:[M.ez,u,D.S,re.L$,G.u5,Te.hJ,p.E,z.EV,ge.A]})}return s})()},5401:(de,Y)=>{var M,i;function C(i,t){if(!i)throw"First parameter is required.";t=new X(i,t=t||{type:"video"});var n=this;function p(y){y&&(t.initCallback=function(){y(),y=t.initCallback=null});var m=new j(i,t);(g=new m(i,t)).record(),f("recording"),t.disableLogs||console.log("Initialized recorderType:",g.constructor.name,"for output-type:",t.type)}function d(y){if(y=y||function(){},g){if("paused"===n.state)return n.resumeRecording(),void setTimeout(function(){d(y)},1);"recording"!==n.state&&!t.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?g.stop(m):(g.stop(),m()),f("stopped")}else b();function m(w){if(g){Object.keys(g).forEach(function(_){"function"!=typeof g[_]&&(n[_]=g[_])});var l=g.blob;if(!l){if(!w)throw"Recording failed.";g.blob=l=w}if(l&&!t.disableLogs&&console.log(l.type,"->",ge(l.size)),y){var c;try{c=D.createObjectURL(l)}catch{}"function"==typeof y.call?y.call(n,c):y(c)}t.autoWriteToDisk&&h(function(_){var T={};T[t.type+"Blob"]=_,W.Store(T)})}else"function"==typeof y.call?y.call(n,""):y("")}}function r(y){postMessage((new FileReaderSync).readAsDataURL(y))}function h(y,m){if(!y)throw"Pass a callback function over getDataURL.";var w=m?m.blob:(g||{}).blob;if(!w)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){h(y,m)},1e3);if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var l=function _(T){try{var I=D.createObjectURL(new Blob([T.toString(),"this.onmessage =  function (eee) {"+T.name+"(eee.data);}"],{type:"application/javascript"})),x=new Worker(I);return D.revokeObjectURL(I),x}catch{}}(r);l.onmessage=function(T){y(T.data)},l.postMessage(w)}else{var c=new FileReader;c.readAsDataURL(w),c.onload=function(T){y(T.target.result)}}}function a(y){if(y=y||0,"paused"!==n.state){if("stopped"!==n.state){if(y>=n.recordingDuration)return void d(n.onRecordingStopped);y+=1e3,setTimeout(function(){a(y)},1e3)}}else setTimeout(function(){a(y)},1e3)}function f(y){n&&(n.state=y,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,y):n.onStateChanged(y))}var v='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function b(){!0!==t.disableLogs&&console.warn(v)}var g,R={startRecording:function u(y){return t.disableLogs||console.log("RecordRTC version: ",n.version),y&&(t=new X(i,y)),t.disableLogs||console.log("started recording "+t.type+" stream."),g?(g.clearRecordedData(),g.record(),f("recording"),n.recordingDuration&&a(),n):(p(function(){n.recordingDuration&&a()}),n)},stopRecording:d,pauseRecording:function s(){g?"recording"===n.state?(f("paused"),g.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):b()},resumeRecording:function o(){g?"paused"===n.state?(f("recording"),g.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):b()},initRecorder:p,setRecordingDuration:function(y,m){if(typeof y>"u")throw"recordingDuration is required.";if("number"!=typeof y)throw"recordingDuration must be a number.";return n.recordingDuration=y,n.onRecordingStopped=m||function(){},{onRecordingStopped:function(w){n.onRecordingStopped=w}}},clearRecordedData:function(){g?(g.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):b()},getBlob:function(){if(g)return g.blob;b()},getDataURL:h,toURL:function(){if(g)return D.createObjectURL(g.blob);b()},getInternalRecorder:function(){return g},save:function(y){g?Se(g.blob,y):b()},getFromDisk:function(y){g?C.getFromDisk(t.type,y):b()},setAdvertisementArray:function(y){t.advertisement=[];for(var m=y.length,w=0;w<m;w++)t.advertisement.push({duration:w,image:y[w]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"===n.state&&!t.disableLogs&&console.warn("Stop an active recorder."),g&&"function"==typeof g.clearRecordedData&&g.clearRecordedData(),g=null,f("inactive"),n.blob=null},onStateChanged:function(y){t.disableLogs||console.log("Recorder state changed:",y)},state:"inactive",getState:function(){return n.state},destroy:function(){var y=t.disableLogs;t={disableLogs:!0},n.reset(),f("destroyed"),R=n=null,ue.AudioContextConstructor&&(ue.AudioContextConstructor.close(),ue.AudioContextConstructor=null),t.disableLogs=y,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return n=R,R;for(var S in R)this[S]=R[S];return n=this,R}function X(i,t){return!t.recorderType&&!t.type&&(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===be||t.recorderType===ye||t.recorderType===fe?t.type="video":t.recorderType===we?t.type="gif":t.recorderType===ve?t.type="audio":t.recorderType===J&&(L(i,"audio").length&&L(i,"video").length||!L(i,"audio").length&&L(i,"video").length?t.type="video":L(i,"audio").length&&!L(i,"video").length&&(t.type="audio"))),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0])),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function j(i,t){var n;return($||re||G)&&(n=ve),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!$&&(n=J),"video"===t.type&&($||G)&&(n=be,typeof ReadableStream<"u"&&(n=fe)),"gif"===t.type&&(n=we),"canvas"===t.type&&(n=ye),oe()&&n!==ye&&n!==we&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(L(i,"video").length||L(i,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=J):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=J)),i instanceof Array&&i.length&&(n=Me),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&me&&(n=J),n}function ie(i){this.addStream=function(t){t&&(i=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var n,t=this.mediaType,u=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof t.audio&&oe()&&!L(i,"audio").length&&(t.audio=!1),"function"!=typeof t.video&&oe()&&!L(i,"video").length&&(t.video=!1),"function"!=typeof t.gif&&oe()&&!L(i,"video").length&&(t.gif=!1),!t.audio&&!t.video&&!t.gif)throw"MediaStream must have either audio or video tracks.";if(t.audio&&(n=null,"function"==typeof t.audio&&(n=t.audio),this.audioRecorder=new C(i,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:n,mimeType:u.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),t.video||this.audioRecorder.startRecording()),t.video){n=null,"function"==typeof t.video&&(n=t.video);var p=i;if(oe()&&t.audio&&"function"==typeof t.audio){var d=L(i,"video")[0];Te?((p=new z).addTrack(d),n&&n===be&&(n=J)):(p=new z).addTrack(d)}this.videoRecorder=new C(p,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:n,mimeType:u.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),t.audio||this.videoRecorder.startRecording()}if(t.audio&&t.video){var s=this,o=!0===oe();(t.audio instanceof ve&&t.video||!0!==t.audio&&!0!==t.video&&t.audio!==t.video)&&(o=!1),!0===o?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder(function(){s.audioRecorder.initRecorder(function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()})})}t.gif&&(n=null,"function"==typeof t.gif&&(n=t.gif),this.gifRecorder=new C(i,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:n,mimeType:u.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(n){t(n,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(n){t(n,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(n){t(n,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(t){var n={};return this.audioRecorder&&(n.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(n.video=this.videoRecorder.getBlob()),this.gifRecorder&&(n.gif=this.gifRecorder.getBlob()),t&&t(n),n},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(t){function n(p,d){if(typeof Worker<"u"){var s=function u(p){var o,d=D.createObjectURL(new Blob([p.toString(),"this.onmessage =  function (eee) {"+p.name+"(eee.data);}"],{type:"application/javascript"})),s=new Worker(d);if(typeof D<"u")o=D;else{if(!(typeof webkitURL<"u"))throw"Neither URL nor webkitURL detected.";o=webkitURL}return o.revokeObjectURL(d),s}(function(h){postMessage((new FileReaderSync).readAsDataURL(h))});s.onmessage=function(r){d(r.data)},s.postMessage(p)}else{var o=new FileReader;o.readAsDataURL(p),o.onload=function(r){d(r.target.result)}}}this.getBlob(function(p){p.audio&&p.video?n(p.audio,function(d){n(p.video,function(s){t({audio:d,video:s})})}):p.audio?n(p.audio,function(d){t({audio:d})}):p.video&&n(p.video,function(d){t({video:d})})})},this.writeToDisk=function(){C.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(t){(t=t||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof t.audio?t.audio:""),t.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof t.video?t.video:""),t.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof t.gif?t.gif:"")}}C.version="5.6.2",de.exports=C,void 0!==(M=function(){return C}.apply(Y,[]))&&(de.exports=M),C.getFromDisk=function(i,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===i?"blobs":i+" blob ")+" from disk!"),W.Fetch(function(n,u){"all"!==i&&u===i+"Blob"&&t&&t(n),"all"===i&&t&&t(n,u.replace("Blob",""))})},C.writeToDisk=function(i){console.log("Writing recorded blob(s) to disk!"),(i=i||{}).audio&&i.video&&i.gif?i.audio.getDataURL(function(t){i.video.getDataURL(function(n){i.gif.getDataURL(function(u){W.Store({audioBlob:t,videoBlob:n,gifBlob:u})})})}):i.audio&&i.video?i.audio.getDataURL(function(t){i.video.getDataURL(function(n){W.Store({audioBlob:t,videoBlob:n})})}):i.audio&&i.gif?i.audio.getDataURL(function(t){i.gif.getDataURL(function(n){W.Store({audioBlob:t,gifBlob:n})})}):i.video&&i.gif?i.video.getDataURL(function(t){i.gif.getDataURL(function(n){W.Store({videoBlob:t,gifBlob:n})})}):i.audio?i.audio.getDataURL(function(t){W.Store({audioBlob:t})}):i.video?i.video.getDataURL(function(t){W.Store({videoBlob:t})}):i.gif&&i.gif.getDataURL(function(t){W.Store({gifBlob:t})})},ie.getFromDisk=C.getFromDisk,ie.writeToDisk=C.writeToDisk,C.MRecordRTC=ie,(i=typeof global<"u"?global:null)&&(typeof window<"u"||typeof global>"u"||(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),(typeof global.console.log>"u"||typeof global.console.error>"u")&&(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),typeof document>"u"&&(i.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return t},i.HTMLVideoElement=function(){}),typeof location>"u"&&(i.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(i.screen={width:0,height:0}),typeof D>"u"&&(i.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),i.window=global));var e=window.requestAnimationFrame;if(typeof e>"u")if(typeof webkitRequestAnimationFrame<"u")e=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")e=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")e=msRequestAnimationFrame;else if(typeof e>"u"){var k=0;e=function(i,t){var n=(new Date).getTime(),u=Math.max(0,16-(n-k)),p=setTimeout(function(){i(n+u)},u);return k=n+u,p}}var U=window.cancelAnimationFrame;typeof U>"u"&&(typeof webkitCancelAnimationFrame<"u"?U=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?U=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?U=msCancelAnimationFrame:typeof U>"u"&&(U=function(i){clearTimeout(i)}));var Z=window.AudioContext;typeof Z>"u"&&(typeof webkitAudioContext<"u"&&(Z=webkitAudioContext),typeof mozAudioContext<"u"&&(Z=mozAudioContext));var D=window.URL;typeof D>"u"&&typeof webkitURL<"u"&&(D=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var re=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),G=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),Te=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),$=!G&&!re&&!!navigator.webkitGetUserMedia||xe()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),me=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);me&&!$&&-1!==navigator.userAgent.indexOf("CriOS")&&(me=!1,$=!0);var z=window.MediaStream;function ge(i){if(0===i)return"0 Bytes";var u=parseInt(Math.floor(Math.log(i)/Math.log(1e3)),10);return(i/Math.pow(1e3,u)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][u]}function Se(i,t){if(!i)throw"Blob object is required.";if(!i.type)try{i.type="video/webm"}catch{}var n=(i.type||"video/webm").split("/")[1];if(-1!==n.indexOf(";")&&(n=n.split(";")[0]),t&&-1!==t.indexOf(".")){var u=t.split(".");t=u[0],n=u[1]}var p=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(i,p);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(i,p);var d=document.createElement("a");d.href=D.createObjectURL(i),d.download=p,d.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(d),"function"==typeof d.click?d.click():(d.target="_blank",d.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),D.revokeObjectURL(d.href)}function xe(){return!!(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function L(i,t){return i&&i.getTracks?i.getTracks().filter(function(n){return n.kind===(t||"audio")}):[]}function Ae(i,t){"srcObject"in t?t.srcObject=i:"mozSrcObject"in t?t.mozSrcObject=i:t.srcObject=i}typeof z>"u"&&typeof webkitMediaStream<"u"&&(z=webkitMediaStream),typeof z<"u"&&typeof z.prototype.stop>"u"&&(z.prototype.stop=function(){this.getTracks().forEach(function(i){i.stop()})}),C.invokeSaveAsDialog=Se,C.getTracks=L,C.getSeekableBlob=function ke(i,t){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,u=new EBML.Decoder,p=EBML.tools,d=new FileReader;d.onload=function(s){u.decode(this.result).forEach(function(f){n.read(f)}),n.stop();var r=p.makeMetadataSeekable(n.metadatas,n.duration,n.cues),h=this.result.slice(n.metadataSize),a=new Blob([r,h],{type:"video/webm"});t(a)},d.readAsArrayBuffer(i)},C.bytesToSize=ge,C.isElectron=xe;var ue={};function oe(){if(Te||me||re)return!0;navigator;var d,s,t=navigator.userAgent,n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10);return($||G)&&(d=t.indexOf("Chrome"),n=t.substring(d+7)),-1!==(s=n.indexOf(";"))&&(n=n.substring(0,s)),-1!==(s=n.indexOf(" "))&&(n=n.substring(0,s)),u=parseInt(""+n,10),isNaN(u)&&(n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10)),u>=49}function J(i,t){var n,a=this;if(typeof i>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(t=t||{mimeType:"video/webm"}).type&&(L(i,"video").length&&L(i,"audio").length&&(navigator.mozGetUserMedia?(n=new z).addTrack(L(i,"audio")[0]):n=new z(L(i,"audio")),i=n),(!t.mimeType||-1===t.mimeType.toString().toLowerCase().indexOf("audio"))&&(t.mimeType=$?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg"));var o,u=[];function p(){a.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(a.timestamps[a.timestamps.length-1],a.timestamps)}function d(f){return o&&o.mimeType?o.mimeType:f.mimeType||"video/webm"}function s(){u=[],o=null,a.timestamps=[]}this.getArrayOfBlobs=function(){return u},this.record=function(){a.blob=null,a.clearRecordedData(),a.timestamps=[],h=[],u=[];var f=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",f),o&&(o=null),$&&!oe()&&(f="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&f.mimeType&&(MediaRecorder.isTypeSupported(f.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",f.mimeType),f.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{o=new MediaRecorder(i,f),t.mimeType=f.mimeType}catch{o=new MediaRecorder(i)}f.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in o&&!1===o.canRecordMimeType(f.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",f.mimeType)),o.ondataavailable=function(v){if(v.data&&h.push("ondataavailable: "+ge(v.data.size)),"number"!=typeof t.timeSlice)!v.data||!v.data.size||v.data.size<100||a.blob?a.recordingCallback&&(a.recordingCallback(new Blob([],{type:d(f)})),a.recordingCallback=null):(a.blob=t.getNativeBlob?v.data:new Blob([v.data],{type:d(f)}),a.recordingCallback&&(a.recordingCallback(a.blob),a.recordingCallback=null));else if(v.data&&v.data.size&&(u.push(v.data),p(),"function"==typeof t.ondataavailable)){var b=t.getNativeBlob?v.data:new Blob([v.data],{type:d(f)});t.ondataavailable(b)}},o.onstart=function(){h.push("started")},o.onpause=function(){h.push("paused")},o.onresume=function(){h.push("resumed")},o.onstop=function(){h.push("stopped")},o.onerror=function(v){v&&(v.name||(v.name="UnknownError"),h.push("error: "+v),t.disableLogs||(-1!==v.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",v):-1!==v.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",f.mimeType,") is not supported.",v):-1!==v.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",v):"OutOfMemory"===v.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",v):"IllegalStreamModification"===v.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",v):"OtherRecordingError"===v.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",v):"GenericError"===v.name?console.error("The UA cannot provide the codec or recording option that has been requested.",v):console.error("MediaRecorder Error",v)),function(b){if(!a.manuallyStopped&&o&&"inactive"===o.state)return delete t.timeslice,void o.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==o.state&&"stopped"!==o.state&&o.stop())},"number"==typeof t.timeSlice?(p(),o.start(t.timeSlice)):o.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(f){f=f||function(){},a.manuallyStopped=!0,o&&(this.recordingCallback=f,"recording"===o.state&&o.stop(),"number"==typeof t.timeSlice&&setTimeout(function(){a.blob=new Blob(u,{type:d(t)}),a.recordingCallback(a.blob)},100))},this.pause=function(){o&&"recording"===o.state&&o.pause()},this.resume=function(){o&&"paused"===o.state&&o.resume()},this.clearRecordedData=function(){o&&"recording"===o.state&&a.stop(s),s()},this.getInternalRecorder=function(){return o},this.blob=null,this.getState=function(){return o&&o.state||"inactive"};var h=[];this.getAllStates=function(){return h},typeof t.checkForInactiveTracks>"u"&&(t.checkForInactiveTracks=!1),a=this,function f(){if(o&&!1!==t.checkForInactiveTracks){if(!1===function r(){if("active"in i){if(!i.active)return!1}else if("ended"in i&&i.ended)return!1;return!0}())return t.disableLogs||console.log("MediaStream seems stopped."),void a.stop();setTimeout(f,1e3)}}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function ve(i,t){if(!L(i,"audio").length)throw"Your stream has no audio tracks.";var o,n=this,u=[],p=[],d=!1,s=0,r=2,h=(t=t||{}).desiredSampRate;function a(){if(!1===t.checkForInactiveTracks)return!0;if("active"in i){if(!i.active)return!1}else if("ended"in i&&i.ended)return!1;return!0}function f(x,P){function F(E,_e){var Ie,ee=E.numberOfAudioChannels,V=E.leftBuffers.slice(0),ce=E.rightBuffers.slice(0),te=E.sampleRate,ae=E.internalInterleavedLength,H=E.desiredSampRate;function pe(N,ne,K){var Q=Math.round(N.length*(ne/K)),q=[],se=Number((N.length-1)/(Q-1));q[0]=N[0];for(var he=1;he<Q-1;he++){var Ne=he*se,Oe=Number(Math.floor(Ne)).toFixed(),ze=Number(Math.ceil(Ne)).toFixed();q[he]=Be(N[Oe],N[ze],Ne-Oe)}return q[Q-1]=N[N.length-1],q}function Be(N,ne,K){return N+(ne-N)*K}function Fe(N,ne){for(var K=new Float64Array(ne),Q=0,q=N.length,se=0;se<q;se++){var he=N[se];K.set(he,Q),Q+=he.length}return K}function De(N,ne,K){for(var Q=K.length,q=0;q<Q;q++)N.setUint8(ne+q,K.charCodeAt(q))}2===ee&&(V=Fe(V,ae),ce=Fe(ce,ae),H&&(V=pe(V,H,te),ce=pe(ce,H,te))),1===ee&&(V=Fe(V,ae),H&&(V=pe(V,H,te))),H&&(te=H),2===ee&&(Ie=function je(N,ne){for(var K=N.length+ne.length,Q=new Float64Array(K),q=0,se=0;se<K;)Q[se++]=N[q],Q[se++]=ne[q],q++;return Q}(V,ce)),1===ee&&(Ie=V);var Le=Ie.length,Ze=new ArrayBuffer(44+2*Le),O=new DataView(Ze);De(O,0,"RIFF"),O.setUint32(4,36+2*Le,!0),De(O,8,"WAVE"),De(O,12,"fmt "),O.setUint32(16,16,!0),O.setUint16(20,1,!0),O.setUint16(22,ee,!0),O.setUint32(24,te,!0),O.setUint32(28,te*ee*2,!0),O.setUint16(32,2*ee,!0),O.setUint16(34,16,!0),De(O,36,"data"),O.setUint32(40,2*Le,!0);for(var Je=Le,Pe=44,Ee=0;Ee<Je;Ee++)O.setInt16(Pe,32767*Ie[Ee],!0),Pe+=2;if(_e)return _e({buffer:Ze,view:O});postMessage({buffer:Ze,view:O})}if(x.noWorker)F(x,function(E){P(E.buffer,E.view)});else{var le=function v(x){var P=D.createObjectURL(new Blob([x.toString(),";this.onmessage =  function (eee) {"+x.name+"(eee.data);}"],{type:"application/javascript"})),F=new Worker(P);return F.workerURL=P,F}(F);le.onmessage=function(E){P(E.data.buffer,E.data.view),D.revokeObjectURL(le.workerURL),le.terminate()},le.postMessage(x)}}!0===t.leftChannel&&(r=1),1===t.numberOfAudioChannels&&(r=1),(!r||r<1)&&(r=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+r),typeof t.checkForInactiveTracks>"u"&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===a())throw"Please make sure MediaStream is active.";w(),c=m=!1,d=!0,typeof t.timeSlice<"u"&&I()},this.stop=function(x){x=x||function(){},d=!1,f({desiredSampRate:h,sampleRate:y,numberOfAudioChannels:r,internalInterleavedLength:s,leftBuffers:u,rightBuffers:1===r?[]:p,noWorker:t.noWorker},function(P,F){n.blob=new Blob([F],{type:"audio/wav"}),n.buffer=new ArrayBuffer(F.buffer.byteLength),n.view=F,n.sampleRate=h||y,n.bufferSize=S,n.length=s,c=!1,x&&x(n.blob)})},typeof C.Storage>"u"&&(C.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!C.Storage.AudioContextConstructor||"closed"===C.Storage.AudioContextConstructor.state)&&(C.Storage.AudioContextConstructor=new C.Storage.AudioContext);var b=C.Storage.AudioContextConstructor,g=b.createMediaStreamSource(i),R=[0,256,512,1024,2048,4096,8192,16384],S=typeof t.bufferSize>"u"?4096:t.bufferSize;if(-1===R.indexOf(S)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(R,null,"\t"))),b.createJavaScriptNode)o=b.createJavaScriptNode(S,r,r);else{if(!b.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=b.createScriptProcessor(S,r,r)}g.connect(o),t.bufferSize||(S=o.bufferSize);var y=typeof t.sampleRate<"u"?t.sampleRate:b.sampleRate||44100;(y<22050||y>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var m=!1;function w(){p=[],s=0,c=!1,d=!1,m=!1,b=null,n.leftchannel=u=[],n.rightchannel=p,n.numberOfAudioChannels=r,n.desiredSampRate=h,n.sampleRate=y,n.recordingLength=s,T={left:[],right:[],recordingLength:0}}function l(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),g&&(g.disconnect(),g=null),w()}this.pause=function(){m=!0},this.resume=function(){if(!1===a())throw"Please make sure MediaStream is active.";if(!d)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();m=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,d&&this.stop(l),l()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var c=!1;o.onaudioprocess=function _(x){if(!m){if(!1===a()&&(t.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),d=!1),!d)return void(g&&(g.disconnect(),g=null));c||(c=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var P=x.inputBuffer.getChannelData(0),F=new Float32Array(P);if(u.push(F),2===r){var le=x.inputBuffer.getChannelData(1),E=new Float32Array(le);p.push(E)}n.recordingLength=s+=S,typeof t.timeSlice<"u"&&(T.recordingLength+=S,T.left.push(F),2===r&&T.right.push(E))}},o.connect(b.createMediaStreamDestination?b.createMediaStreamDestination():b.destination),this.leftchannel=u,this.rightchannel=p,this.numberOfAudioChannels=r,this.desiredSampRate=h,this.sampleRate=y,n.recordingLength=s;var T={left:[],right:[],recordingLength:0};function I(){!d||"function"!=typeof t.ondataavailable||typeof t.timeSlice>"u"||(T.left.length?(f({desiredSampRate:h,sampleRate:y,numberOfAudioChannels:r,internalInterleavedLength:T.recordingLength,leftBuffers:T.left,rightBuffers:1===r?[]:T.right},function(x,P){var F=new Blob([P],{type:"audio/wav"});t.ondataavailable(F),setTimeout(I,t.timeSlice)}),T={left:[],right:[],recordingLength:0}):setTimeout(I,t.timeSlice))}}function ye(i,t){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(R){R in document.createElement("canvas")&&(n=!0)});var s,o,r,u=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),p=50,d=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(u&&d&&d[2]&&(p=parseInt(d[2],10)),u&&p<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),i instanceof HTMLCanvasElement)s=i;else{if(!(i instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";s=i.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(r=!0,n&&!t.useWhammyRecorder){var R;"captureStream"in s?R=s.captureStream(25):"mozCaptureStream"in s?R=s.mozCaptureStream(25):"webkitCaptureStream"in s&&(R=s.webkitCaptureStream(25));try{var S=new z;S.addTrack(L(R,"video")[0]),R=S}catch{}if(!R)throw"captureStream API are NOT available.";(o=new J(R,{mimeType:t.mimeType||"video/webm"})).record()}else g.frames=[],b=(new Date).getTime(),v();t.initCallback&&t.initCallback()},this.getWebPImages=function(R){if("canvas"===i.nodeName.toLowerCase()){var S=g.frames.length;g.frames.forEach(function(y,m){var w=S-m;t.disableLogs||console.log(w+"/"+S+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(w,S);var l=y.image.toDataURL("image/webp",1);g.frames[m].image=l}),t.disableLogs||console.log("Generating WebM"),R()}else R()},this.stop=function(R){r=!1;var S=this;n&&o?o.stop(R):this.getWebPImages(function(){g.compile(function(y){t.disableLogs||console.log("Recording finished!"),S.blob=y,S.blob.forEach&&(S.blob=new Blob([],{type:"video/webm"})),R&&R(S.blob),g.frames=[]})})};var h=!1;function a(){g.frames=[],r=!1,h=!1}function f(){var R=document.createElement("canvas"),S=R.getContext("2d");return R.width=i.width,R.height=i.height,S.drawImage(i,0,0),R}function v(){if(h)return b=(new Date).getTime(),setTimeout(v,500);if("canvas"===i.nodeName.toLowerCase()){var R=(new Date).getTime()-b;return b=(new Date).getTime(),g.frames.push({image:f(),duration:R}),void(r&&setTimeout(v,t.frameInterval))}html2canvas(i,{grabMouse:typeof t.showMousePointer>"u"||t.showMousePointer,onrendered:function(S){var y=(new Date).getTime()-b;if(!y)return setTimeout(v,t.frameInterval);b=(new Date).getTime(),g.frames.push({image:S.toDataURL("image/webp",1),duration:y}),r&&setTimeout(v,t.frameInterval)}})}this.pause=function(){h=!0,o instanceof J&&o.pause()},this.resume=function(){h=!1,o instanceof J?o.resume():r||this.record()},this.clearRecordedData=function(){r&&this.stop(a),a()},this.name="CanvasRecorder",this.toString=function(){return this.name};var b=(new Date).getTime(),g=new Ce.Video(100)}function be(i,t){function n(b){b=typeof b<"u"?b:10;var g=(new Date).getTime()-f;return g?s?(f=(new Date).getTime(),setTimeout(n,100)):(f=(new Date).getTime(),a.paused&&a.play(),h.drawImage(a,0,0,r.width,r.height),v.frames.push({duration:g,image:r.toDataURL("image/webp")}),void(d||setTimeout(n,b,b))):setTimeout(n,b,b)}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),r.width=t.canvas.width||320,r.height=t.canvas.height||240,h=r.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(a=t.video.cloneNode(),t.initCallback&&t.initCallback()):(a=document.createElement("video"),Ae(i,a),a.onloadedmetadata=function(){t.initCallback&&t.initCallback()},a.width=t.video.width,a.height=t.video.height),a.muted=!0,a.play(),f=(new Date).getTime(),v=new Ce.Video,t.disableLogs||(console.log("canvas resolutions",r.width,"*",r.height),console.log("video width/height",a.width||r.width,"*",a.height||r.height)),n(t.frameInterval)};var d=!1;this.stop=function(b){b=b||function(){},d=!0;var g=this;setTimeout(function(){!function p(b,g,R,S,y){var m=document.createElement("canvas");m.width=r.width,m.height=r.height;var w=m.getContext("2d"),l=[],c=-1===g,_=g&&g>0&&g<=b.length?g:b.length,I=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),x=R&&R>=0&&R<=1?R:0,P=S&&S>=0&&S<=1?S:0,F=!1;!function u(b){var g=-1,R=b.length;!function S(){++g!==R?setTimeout(function(){b.functionToLoop(S,g)},1):b.callback()}()}({length:_,functionToLoop:function(le,E){var _e,ee,V,ce=function(){!F&&V-_e<=V*P||(c&&(F=!0),l.push(b[E])),le()};if(F)ce();else{var te=new Image;te.onload=function(){w.drawImage(te,0,0,r.width,r.height);var ae=w.getImageData(0,0,r.width,r.height);_e=0,ee=ae.data.length,V=ae.data.length/4;for(var H=0;H<ee;H+=4){var pe={r:ae.data[H],g:ae.data[H+1],b:ae.data[H+2]};Math.sqrt(Math.pow(pe.r-0,2)+Math.pow(pe.g-0,2)+Math.pow(pe.b-0,2))<=I*x&&_e++}ce()},te.src=b[E].image}},callback:function(){(l=l.concat(b.slice(_))).length<=0&&l.push(b[b.length-1]),y(l)}})}(v.frames,-1,null,null,function(R){v.frames=R,t.advertisement&&t.advertisement.length&&(v.frames=t.advertisement.concat(v.frames)),v.compile(function(S){g.blob=S,g.blob.forEach&&(g.blob=new Blob([],{type:"video/webm"})),b&&b(g.blob)})})},10)};var s=!1;function o(){v.frames=[],d=!0,s=!1}this.pause=function(){s=!0},this.resume=function(){s=!1,d&&this.record()},this.clearRecordedData=function(){d||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var a,f,v,r=document.createElement("canvas"),h=r.getContext("2d")}typeof Z<"u"?ue.AudioContext=Z:typeof webkitAudioContext<"u"&&(ue.AudioContext=webkitAudioContext),C.Storage=ue,C.MediaStreamRecorder=J,C.StereoAudioRecorder=ve,C.CanvasRecorder=ye,C.WhammyRecorder=be;var Ce=function(){function i(u){this.frames=[],this.duration=u||1,this.quality=.8}function n(u){function d(m,w,l){return[{data:m,id:231}].concat(l.map(function(c){var _=function v(m){var w=0;if(m.keyframe&&(w|=128),m.invisible&&(w|=8),m.lacing&&(w|=m.lacing<<1),m.discardable&&(w|=1),m.trackNum>127)throw"TrackNumber > 127 not supported";var l=[128|m.trackNum,m.timecode>>8,255&m.timecode,w].map(function(c){return String.fromCharCode(c)}).join("")+m.frame;return l}({discardable:0,frame:c.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(w)});return w+=c.duration,{data:_,id:163}}))}function o(m){for(var w=[];m>0;)w.push(255&m),m>>=8;return new Uint8Array(w.reverse())}function r(m){return new Uint8Array(m.split("").map(function(w){return w.charCodeAt(0)}))}function h(m){var w=[];m=(m.length%8?new Array(9-m.length%8).join("0"):"")+m;for(var c=0;c<m.length;c+=8)w.push(parseInt(m.substr(c,8),2));return new Uint8Array(w)}function a(m){for(var w=[],l=0;l<m.length;l++){var c=m[l].data;"object"==typeof c&&(c=a(c)),"number"==typeof c&&(c=h(c.toString(2))),"string"==typeof c&&(c=r(c));var _=c.size||c.byteLength||c.length,T=Math.ceil(Math.ceil(Math.log(_)/Math.log(2))/8),I=_.toString(2),x=new Array(7*T+7+1-I.length).join("0")+I,P=new Array(T).join("0")+"1"+x;w.push(o(m[l].id)),w.push(h(P)),w.push(c)}return new Blob(w,{type:"video/webm"})}function g(m,w){return parseInt(m.substr(w+4,4).split("").map(function(l){var c=l.charCodeAt(0).toString(2);return new Array(8-c.length+1).join("0")+c}).join(""),2)}function R(m){for(var w=0,l={};w<m.length;){var c=m.substr(w,4),_=g(m,w),T=m.substr(w+4+4,_);w+=8+_,l[c]=l[c]||[],l[c].push("RIFF"===c||"LIST"===c?R(T):T)}return l}function S(m){return[].slice.call(new Uint8Array(new Float64Array([m]).buffer),0).map(function(w){return String.fromCharCode(w)}).reverse().join("")}var y=new function p(m){var w=function s(m){if(m[0]){for(var w=m[0].width,l=m[0].height,c=m[0].duration,_=1;_<m.length;_++)c+=m[_].duration;return{duration:c,width:w,height:l}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(m);if(!w)return[];for(var c=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:S(w.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:w.width,id:176},{data:w.height,id:186}]}]}]}]}],_=0,T=0;_<m.length;){var I=[],x=0;do{I.push(m[_]),x+=m[_].duration,_++}while(_<m.length&&x<3e4);var F={id:524531317,data:d(T,0,I)};c[1].data.push(F),T+=x}return a(c)}(u.map(function(m){var w=function b(m){for(var w=m.RIFF[0].WEBP[0],l=w.indexOf("\x9d\x01*"),c=0,_=[];c<4;c++)_[c]=w.charCodeAt(l+3+c);return{width:16383&(_[1]<<8|_[0]),height:16383&(_[3]<<8|_[2]),data:w,riff:m}}(R(atob(m.image.slice(23))));return w.duration=m.duration,w}));postMessage(y)}return i.prototype.add=function(u,p){if("canvas"in u&&(u=u.canvas),"toDataURL"in u&&(u=u.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(u))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:u,duration:p||this.duration})},i.prototype.compile=function(u){var p=function t(u){var p=D.createObjectURL(new Blob([u.toString(),"this.onmessage =  function (eee) {"+u.name+"(eee.data);}"],{type:"application/javascript"})),d=new Worker(p);return D.revokeObjectURL(p),d}(n);p.onmessage=function(d){d.data.error?console.error(d.data.error):u(d.data)},p.postMessage(this.frames)},{Video:i}}();C.Whammy=Ce;var W={init:function(){var i=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u")console.error("IndexedDB API are not available in this browser.");else{var u,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),p=indexedDB.open(n,1);p.onerror=i.onError,p.onsuccess=function(){(u=p.result).onerror=i.onError,u.setVersion&&1!==u.version?u.setVersion(1).onsuccess=function(){d(u),s()}:s()},p.onupgradeneeded=function(o){d(o.target.result)}}function d(o){o.createObjectStore(i.dataStoreName)}function s(){var o=u.transaction([i.dataStoreName],"readwrite");function r(h){o.objectStore(i.dataStoreName).get(h).onsuccess=function(a){i.callback&&i.callback(a.target.result,h)}}i.videoBlob&&o.objectStore(i.dataStoreName).put(i.videoBlob,"videoBlob"),i.gifBlob&&o.objectStore(i.dataStoreName).put(i.gifBlob,"gifBlob"),i.audioBlob&&o.objectStore(i.dataStoreName).put(i.audioBlob,"audioBlob"),r("audioBlob"),r("videoBlob"),r("gifBlob")}},Fetch:function(i){return this.callback=i,this.init(),this},Store:function(i){return this.audioBlob=i.audioBlob,this.videoBlob=i.videoBlob,this.gifBlob=i.gifBlob,this.init(),this},onError:function(i){console.error(JSON.stringify(i,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function we(i,t){if(typeof GIFEncoder>"u"){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var u=i instanceof CanvasRenderingContext2D||i instanceof HTMLCanvasElement;this.record=function(){typeof GIFEncoder>"u"?setTimeout(R.record,1e3):r?(u||(t.width||(t.width=h.offsetWidth||320),t.height||(t.height=h.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),s.width=t.canvas.width||320,s.height=t.canvas.height||240,h.width=t.video.width||320,h.height=t.video.height||240),(g=new GIFEncoder).setRepeat(0),g.setDelay(t.frameRate||200),g.setQuality(t.quality||10),g.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),a=e(function S(y){if(!0!==R.clearedRecordedData){if(p)return setTimeout(function(){S(y)},100);a=e(S),void 0===typeof b&&(b=y),!(y-b<90)&&(!u&&h.paused&&h.play(),u||o.drawImage(h,0,0,s.width,s.height),t.onGifPreview&&t.onGifPreview(s.toDataURL("image/png")),g.addFrame(o),b=y)}}),t.initCallback&&t.initCallback()):setTimeout(R.record,1e3)},this.stop=function(S){S=S||function(){},a&&U(a),Date.now(),this.blob=new Blob([new Uint8Array(g.stream().bin)],{type:"image/gif"}),S(this.blob),g.stream().bin=[]};var p=!1;this.pause=function(){p=!0},this.resume=function(){p=!1},this.clearRecordedData=function(){R.clearedRecordedData=!0,function d(){g&&(g.stream().bin=[])}()},this.name="GifRecorder",this.toString=function(){return this.name};var s=document.createElement("canvas"),o=s.getContext("2d");u&&(i instanceof CanvasRenderingContext2D?s=(o=i).canvas:i instanceof HTMLCanvasElement&&(o=i.getContext("2d"),s=i));var r=!0;if(!u){var h=document.createElement("video");h.muted=!0,h.autoplay=!0,h.playsInline=!0,r=!1,h.onloadedmetadata=function(){r=!0},Ae(i,h),h.play()}var b,g,a=null,R=this}function Re(i,t){typeof global<"u"&&global,t=t||"multi-streams-mixer";var u=[],p=!1,d=document.createElement("canvas"),s=d.getContext("2d");d.style.opacity=0,d.style.position="absolute",d.style.zIndex=-1,d.style.top="-1000em",d.style.left="-1000em",d.className=t,(document.body||document.documentElement).appendChild(d),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var o=this,r=window.AudioContext;typeof r>"u"&&(typeof webkitAudioContext<"u"&&(r=webkitAudioContext),typeof mozAudioContext<"u"&&(r=mozAudioContext));var h=window.URL;typeof h>"u"&&typeof webkitURL<"u"&&(h=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var a=window.MediaStream;typeof a>"u"&&typeof webkitMediaStream<"u"&&(a=webkitMediaStream),typeof a<"u"&&typeof a.prototype.stop>"u"&&(a.prototype.stop=function(){this.getTracks().forEach(function(l){l.stop()})});var f={};function b(){if(!p){var l=u.length,c=!1,_=[];if(u.forEach(function(I){I.stream||(I.stream={}),I.stream.fullcanvas?c=I:_.push(I)}),c)d.width=c.stream.width,d.height=c.stream.height;else if(_.length){d.width=l>1?2*_[0].width:_[0].width;var T=1;(3===l||4===l)&&(T=2),(5===l||6===l)&&(T=3),(7===l||8===l)&&(T=4),(9===l||10===l)&&(T=5),d.height=_[0].height*T}else d.width=o.width||360,d.height=o.height||240;c&&c instanceof HTMLVideoElement&&g(c),_.forEach(function(I,x){g(I,x)}),setTimeout(b,o.frameInterval)}}function g(l,c){if(!p){var _=0,T=0,I=l.width,x=l.height;1===c&&(_=l.width),2===c&&(T=l.height),3===c&&(_=l.width,T=l.height),4===c&&(T=2*l.height),5===c&&(_=l.width,T=2*l.height),6===c&&(T=3*l.height),7===c&&(_=l.width,T=3*l.height),typeof l.stream.left<"u"&&(_=l.stream.left),typeof l.stream.top<"u"&&(T=l.stream.top),typeof l.stream.width<"u"&&(I=l.stream.width),typeof l.stream.height<"u"&&(x=l.stream.height),s.drawImage(l,_,T,I,x),"function"==typeof l.stream.onRender&&l.stream.onRender(s,_,T,I,x,c)}}function m(l){var c=document.createElement("video");return function v(l,c){"srcObject"in c?c.srcObject=l:"mozSrcObject"in c?c.mozSrcObject=l:c.srcObject=l}(l,c),c.className=t,c.muted=!0,c.volume=0,c.width=l.width||o.width||360,c.height=l.height||o.height||240,c.play(),c}function w(l){u=[],(l=l||i).forEach(function(c){if(c.getTracks().filter(function(T){return"video"===T.kind}).length){var _=m(c);_.stream=c,u.push(_)}})}typeof r<"u"?f.AudioContext=r:typeof webkitAudioContext<"u"&&(f.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){b()},this.appendStreams=function(l){if(!l)throw"First parameter is required.";l instanceof Array||(l=[l]),l.forEach(function(c){var _=new a;if(c.getTracks().filter(function(x){return"video"===x.kind}).length){var T=m(c);T.stream=c,u.push(T),_.addTrack(c.getTracks().filter(function(x){return"video"===x.kind})[0])}if(c.getTracks().filter(function(x){return"audio"===x.kind}).length){var I=o.audioContext.createMediaStreamSource(c);o.audioDestination=o.audioContext.createMediaStreamDestination(),I.connect(o.audioDestination),_.addTrack(o.audioDestination.stream.getTracks().filter(function(x){return"audio"===x.kind})[0])}i.push(_)})},this.releaseStreams=function(){u=[],p=!0,o.gainNode&&(o.gainNode.disconnect(),o.gainNode=null),o.audioSources.length&&(o.audioSources.forEach(function(l){l.disconnect()}),o.audioSources=[]),o.audioDestination&&(o.audioDestination.disconnect(),o.audioDestination=null),o.audioContext&&o.audioContext.close(),o.audioContext=null,s.clearRect(0,0,d.width,d.height),d.stream&&(d.stream.stop(),d.stream=null)},this.resetVideoStreams=function(l){l&&!(l instanceof Array)&&(l=[l]),w(l)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function R(){p=!1;var l=function S(){var l;w(),"captureStream"in d?l=d.captureStream():"mozCaptureStream"in d?l=d.mozCaptureStream():o.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var c=new a;return l.getTracks().filter(function(_){return"video"===_.kind}).forEach(function(_){c.addTrack(_)}),d.stream=c,c}(),c=function y(){f.AudioContextConstructor||(f.AudioContextConstructor=new f.AudioContext),o.audioContext=f.AudioContextConstructor,o.audioSources=[],!0===o.useGainNode&&(o.gainNode=o.audioContext.createGain(),o.gainNode.connect(o.audioContext.destination),o.gainNode.gain.value=0);var l=0;if(i.forEach(function(c){if(c.getTracks().filter(function(T){return"audio"===T.kind}).length){l++;var _=o.audioContext.createMediaStreamSource(c);!0===o.useGainNode&&_.connect(o.gainNode),o.audioSources.push(_)}}),l)return o.audioDestination=o.audioContext.createMediaStreamDestination(),o.audioSources.forEach(function(c){c.connect(o.audioDestination)}),o.audioDestination.stream}();return c&&c.getTracks().filter(function(T){return"audio"===T.kind}).forEach(function(T){l.addTrack(T)}),i.forEach(function(T){}),l}}function Me(i,t){i=i||[];var u,p,n=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){u=new Re(i,t.elementClass||"multi-streams-mixer"),function d(){var s=[];return i.forEach(function(o){L(o,"video").forEach(function(r){s.push(r)})}),s}().length&&(u.frameInterval=t.frameInterval||10,u.width=t.video.width||360,u.height=t.video.height||240,u.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(u.getMixedStream()),(p=new J(u.getMixedStream(),t)).record()},this.stop=function(s){p&&p.stop(function(o){n.blob=o,s(o),n.clearRecordedData()})},this.pause=function(){p&&p.pause()},this.resume=function(){p&&p.resume()},this.clearRecordedData=function(){p&&(p.clearRecordedData(),p=null),u&&(u.releaseStreams(),u=null)},this.addStreams=function(s){if(!s)throw"First parameter is required.";s instanceof Array||(s=[s]),i.concat(s),p&&u&&(u.appendStreams(s),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(u.getMixedStream()))},this.resetVideoStreams=function(s){u&&(s&&!(s instanceof Array)&&(s=[s]),u.resetVideoStreams(s))},this.getMixer=function(){return u},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function fe(i,t){var u,d,o;function s(a,f){if(!t.workerPath&&!f)return u=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(b){b.arrayBuffer().then(function(g){s(a,g)})});if(!t.workerPath&&f instanceof ArrayBuffer){var v=new Blob([f],{type:"text/javascript"});t.workerPath=D.createObjectURL(v)}t.workerPath||console.error("workerPath parameter is missing."),(d=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),d.addEventListener("message",function(b){"READY"===b.data?(d.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),function p(){return new ReadableStream({start:function(a){var f=document.createElement("canvas"),v=document.createElement("video"),b=!0;v.srcObject=i,v.muted=!0,v.height=t.height,v.width=t.width,v.volume=0,v.onplaying=function(){f.width=t.width,f.height=t.height;var g=f.getContext("2d"),S=setInterval(function(){if(u&&(clearInterval(S),a.close()),b&&(b=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),g.drawImage(v,0,0),"closed"!==a._controlledReadableStream.state)try{a.enqueue(g.getImageData(0,0,t.width,t.height))}catch{}},1e3/t.frameRate)},v.play()}})}().pipeTo(new WritableStream({write:function(g){u?console.error("Got image, but recorder is finished!"):d.postMessage(g.data.buffer,[g.data.buffer])}}))):b.data&&(o||h.push(b.data))})}(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){h=[],o=!1,this.blob=null,s(i),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){o=!0},this.resume=function(){o=!1};var h=[];this.stop=function(a){u=!0;var f=this;!function r(a){d?(d.addEventListener("message",function(f){null===f.data&&(d.terminate(),d=null,a&&a())}),d.postMessage(null)):a&&a()}(function(){f.blob=new Blob(h,{type:"video/webm"}),a(f.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){h=[],o=!1,this.blob=null},this.blob=null}C.DiskStorage=W,C.GifRecorder=we,C.MultiStreamRecorder=Me,C.RecordRTCPromisesHandler=function Ue(i,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof i>"u")throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new C(i,t),this.startRecording=function(){return new Promise(function(u,p){try{n.recordRTC.startRecording(),u()}catch(d){p(d)}})},this.stopRecording=function(){return new Promise(function(u,p){try{n.recordRTC.stopRecording(function(d){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?u(d):p("Empty blob.",n.blob)})}catch(d){p(d)}})},this.pauseRecording=function(){return new Promise(function(u,p){try{n.recordRTC.pauseRecording(),u()}catch(d){p(d)}})},this.resumeRecording=function(){return new Promise(function(u,p){try{n.recordRTC.resumeRecording(),u()}catch(d){p(d)}})},this.getDataURL=function(u){return new Promise(function(p,d){try{n.recordRTC.getDataURL(function(s){p(s)})}catch(s){d(s)}})},this.getBlob=function(){return new Promise(function(u,p){try{u(n.recordRTC.getBlob())}catch(d){p(d)}})},this.getInternalRecorder=function(){return new Promise(function(u,p){try{u(n.recordRTC.getInternalRecorder())}catch(d){p(d)}})},this.reset=function(){return new Promise(function(u,p){try{u(n.recordRTC.reset())}catch(d){p(d)}})},this.destroy=function(){return new Promise(function(u,p){try{u(n.recordRTC.destroy())}catch(d){p(d)}})},this.getState=function(){return new Promise(function(u,p){try{u(n.recordRTC.getState())}catch(d){p(d)}})},this.blob=null,this.version="5.6.2"},C.WebAssemblyRecorder=fe},3054:(de,Y,A)=>{A.d(Y,{A:()=>ie,g:()=>j});var M=A(4650),C=A(6895),X=A(4006);let j=(()=>{class B{constructor(k,U,Z,D){this.el=k,this.ngModel=U,this.control=Z,this.cd=D,this.onResize=new M.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(k){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(k){this.autoResize&&this.resize(k)}onBlur(k){this.autoResize&&this.resize(k)}resize(k){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(k||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return B.\u0275fac=function(k){return new(k||B)(M.Y36(M.SBq),M.Y36(X.On,8),M.Y36(X.a5,8),M.Y36(M.sBO))},B.\u0275dir=M.lG2({type:B,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(k,U){1&k&&M.NdJ("input",function(D){return U.onInput(D)})("focus",function(D){return U.onFocus(D)})("blur",function(D){return U.onBlur(D)}),2&k&&M.ekj("p-filled",U.filled)("p-inputtextarea-resizable",U.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),B})(),ie=(()=>{class B{}return B.\u0275fac=function(k){return new(k||B)},B.\u0275mod=M.oAB({type:B}),B.\u0275inj=M.cJS({imports:[C.ez]}),B})()}}]);
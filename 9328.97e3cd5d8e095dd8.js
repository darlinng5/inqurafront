"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9328],{9328:(C,h,e)=>{e.r(h),e.d(h,{WareHouseSelectModule:()=>A});var n=e(6895),l=e(9197),p=e(1546),c=e(805);class m{}var t=e(4650),i=e(8568),v=e(7747),o=e(5384),r=e(2453),u=e(7116),f=e(6768);function _(a,L){1&a&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}let M=(()=>{class a{constructor(s,d,g,D,E,x){this.layoutService=s,this.router=d,this.productService=g,this.eventService=D,this.messageService=E,this.route=x,this.roles=["SuperAdmin","Administrador","Vendedor"],this.warehouse=[],this.loading=!1,this.warehouseId=0,this.route.queryParams.subscribe(R=>{this.warehouse=JSON.parse(R.lista)})}filterWareHouse(s){this.warehouseId=s}MaterializeNewLester(){if(null!=this.contact&&""!=this.contact){var s=new m;s.name=this.name,s.contact=this.contact,this.AddNewLester(s)}else this.messageService.add({severity:"info",summary:"Info",detail:"Correo y/o Cel. No puede estar vacio",life:3e3})}onEnterClick(){0==this.warehouseId||null==this.warehouseId?this.messageService.add({severity:"error",summary:"Error",detail:"Favor seleccione una sucursal de la lista",life:3e3}):this.loading||this.changeWareHouse()}changeWareHouse(){this.loading=!0,this.productService.ChangeWareHouse(this.warehouseId,this.eventService.getToken()).subscribe(s=>{s.data?(this.eventService.setPermisionException(s.data.exceptionUserPermisionsList),this.eventService.setWarehouseName(s.data.warehouseName),this.eventService.setToken(s.data.token),this.router.navigateByUrl("/")):this.messageService.add({severity:"error",summary:"Error",detail:s.message,life:3e3}),this.loading=!1})}AddNewLester(s){this.loading=!0,this.productService.AddNewLester(s).subscribe(d=>{this.messageService.add(d.data?{severity:"success",summary:"Success",detail:"Gracias por suscribirte",life:3e3}:{severity:"error",summary:"Error",detail:d.message,life:3e3}),this.loading=!1},d=>{this.messageService.add({severity:"error",summary:"Error",detail:d,life:3e3}),this.loading=!1})}static#e=this.\u0275fac=function(d){return new(d||a)(t.Y36(i.P),t.Y36(l.F0),t.Y36(v.M),t.Y36(o.P),t.Y36(c.ez),t.Y36(l.gz))};static#t=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-warehose-select"]],features:[t._Bn([c.ez])],decls:14,vars:4,consts:[[4,"ngIf"],[1,"tarjeta"],[1,"center-card"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],[1,"card-footer"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(d,g){1&d&&(t.TgZ(0,"body"),t.YNc(1,_,2,0,"div",0),t._UZ(2,"p-toast"),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),t._uU(8,"Seleccione una sucursal"),t.qZA()(),t.TgZ(9,"div",5)(10,"app-drop-down",6),t.NdJ("ValueSelectedChange",function(E){return g.filterWareHouse(E)}),t.qZA()(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return g.onEnterClick()}),t._uU(13,"Entrar"),t.qZA()()()()()()),2&d&&(t.xp6(1),t.Q6J("ngIf",g.loading),t.xp6(9),t.Q6J("IsCreating",!1)("DropDownDataSource",g.warehouse),t.xp6(2),t.Q6J("disabled",g.loading))},dependencies:[n.O5,r.FN,u.R,f.t],styles:[".center-card[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n.card[_ngcontent-%COMP%] {\n  width: 50%;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n  transition: 0.3s;\n  border-radius: 5px;\n  padding: 20px;\n  text-align: center;\n}\n\n.card-header[_ngcontent-%COMP%] {\n  background-color: #f1f1f1;\n  padding: 20px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n\n.card-body[_ngcontent-%COMP%] {\n  padding: 20px;\n}\n\n.card-footer[_ngcontent-%COMP%] {\n  background-color: #f1f1f1;\n  padding: 20px;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n\nselect.form-control[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n\n.btn[_ngcontent-%COMP%] {\n  width: 100%;\n  background-color: #344ab7;\n  color: white;\n  padding: 14px 20px;\n  margin: 8px 0;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.btn[_ngcontent-%COMP%]:hover {\n  background-color: #45a049;\n}"]})}return a})(),S=(()=>{class a{static#e=this.\u0275fac=function(d){return new(d||a)};static#t=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild([{path:"",component:M,canActivate:[p.j]}]),l.Bz]})}return a})();var I=e(5132),y=e(5108),P=e(9364),O=e(9764),T=e(5593),U=e(2174),W=e(4006),w=e(1740),b=e(4891);let A=(()=>{class a{static#e=this.\u0275fac=function(d){return new(d||a)};static#t=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[n.ez,S,y.x,I.l,P.S,O.Q,T.hJ,U.fx,W.u5,w.j,r.EV,b.E]})}return a})()},6768:(C,h,e)=>{e.d(h,{t:()=>t});var n=e(4650),l=e(7747),p=e(5384),c=e(4006),m=e(2210);let t=(()=>{class i{constructor(o,r){this.commonService=o,this.eventService=r,this.ValueSelectedChange=new n.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#e=this.\u0275fac=function(r){return new(r||i)(n.Y36(l.M),n.Y36(p.P))};static#t=this.\u0275cmp=n.Xpm({type:i,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(r,u){1&r&&(n.TgZ(0,"p-dropdown",0),n.NdJ("onClick",function(){return u.selectedValue()})("onChange",function(){return u.changeValue()})("ngModelChange",function(_){return u.selectedData=_}),n.qZA()),2&r&&n.Q6J("filter",u.Filter)("options",u.data)("ngModel",u.selectedData)},dependencies:[c.JJ,c.On,m.Lt],encapsulation:2})}return i})()},2384:(C,h,e)=>{e.d(h,{b:()=>n});class n{}},7116:(C,h,e)=>{e.d(h,{R:()=>p});var n=e(4650),l=e(3162);let p=(()=>{class c{constructor(){}static#e=this.\u0275fac=function(i){return new(i||c)};static#t=this.\u0275cmp=n.Xpm({type:c,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(i,v){1&i&&n._UZ(0,"mat-progress-bar",0)},dependencies:[l.pW],encapsulation:2})}return c})()},7083:(C,h,e)=>{e.d(h,{K:()=>t});var n=e(529),l=e(2340),p=e(2384),c=e(4650);const m=l.N.baseUrl;let t=(()=>{class i{constructor(o){this.http=o}addUser(o){return this.http.post(`${m}auth/register`,o)}login(o,r){var u=new p.b;return u.email=o,u.password=r,this.http.post(`${m}auth/login`,u)}GetUserPermisions(){const f={headers:new n.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",f)}static#e=this.\u0275fac=function(r){return new(r||i)(c.LFG(n.eN))};static#t=this.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},1546:(C,h,e)=>{e.d(h,{j:()=>m});var n=e(4650),l=e(5384),p=e(9197),c=e(7083);let m=(()=>{class t{constructor(v,o,r){this.eventService=v,this.router=o,this._userService=r,this.isTokenValid=!1}canActivate(v,o){const r=this.eventService.getToken();return(""==r||null==r||null==r)&&this.router.navigateByUrl("/auth/login"),!0}static#e=this.\u0275fac=function(o){return new(o||t)(n.LFG(l.P),n.LFG(p.F0),n.LFG(c.K))};static#t=this.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);
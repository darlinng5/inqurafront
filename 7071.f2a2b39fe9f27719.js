"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7071],{7071:(b,m,i)=>{i.r(m),i.d(m,{CategoryModule:()=>I});var c=i(6895),l=i(9197),f=i(1546),a=i(805);class A{}var e=i(4650),p=i(7747),C=i(5384),d=i(99),v=i(2453),y=i(1383),T=i(5593),Z=i(1493),_=i(1740),u=i(4006),N=i(7116);function M(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function D(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div",17),e._UZ(1,"p-toast"),e.TgZ(2,"button",18),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openNew())}),e.qZA()()}}function x(t,s){1&t&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2,"Nombre "),e._UZ(3,"p-sortIcon",20),e.qZA(),e.TgZ(4,"th",21),e._uU(5,"Descripcion "),e._UZ(6,"p-sortIcon",22),e.qZA()())}function P(t,s){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&t){const o=s.$implicit;e.xp6(2),e.Oqu(o.name),e.xp6(2),e.Oqu(o.description)}}function w(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function S(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.hideDialog())}),e.qZA(),e.TgZ(1,"button",24),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.saveCostumer())}),e.qZA()}}const B=function(){return{"min-width":"50rem"}},J=function(){return[10,25,50]},U=function(){return{width:"850px"}};let E=(()=>{class t{constructor(o,r,n,h){this.router=o,this.productService=r,this.eventService=n,this.messageService=h,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/category"}ngOnInit(){const r=this.eventService.getPermisionsException().split(",").map(n=>n.trim());this.redirect=r.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.GetCategory()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var o=new A;o.name=null==this.categoryName?"":this.categoryName,o.description=null==this.categoryDescription?"":this.categoryDescription,o.userIdentifiquer=this.eventService.getToken(),o.isCreating=this.isCreating,this.AddNewCategory(o)}AddNewCategory(o){this.showProgressBar=!0,this.productService.AddNewCategory(o).subscribe(r=>{r.data?(this.messageService.add({severity:"success",summary:"Success",detail:"La Categoria"+o.name+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCategory()):this.messageService.add({severity:"error",summary:"Error",detail:r.message,life:3e3}),this.showProgressBar=!1})}GetCategory(){this.showProgressBar=!0,this.productService.GetCategories(this.eventService.getToken()).subscribe(o=>{o.data?this.category=o.data:this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(l.F0),e.Y36(p.M),e.Y36(C.P),e.Y36(a.ez))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([a.ez])],decls:24,vars:17,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Descripcion",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","description",2,"width","20%"],["field","description"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(r,n){1&r&&(e.YNc(0,M,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,D,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,x,7,0,"ng-template",7),e.YNc(9,P,5,2,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(g){return n.showDialog=g}),e.YNc(11,w,2,0,"div",0),e.TgZ(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"Nombre"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(g){return n.categoryName=g}),e.qZA()()(),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Descripcion"),e.qZA(),e.TgZ(21,"div",13)(22,"input",15),e.NdJ("ngModelChange",function(g){return n.categoryDescription=g}),e.qZA()()()(),e.YNc(23,S,2,0,"ng-template",16),e.qZA()),2&r&&(e.Q6J("ngIf",n.showProgressBar),e.xp6(7),e.Q6J("value",n.category)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(14,B))("rowsPerPageOptions",e.DdM(15,J)),e.xp6(3),e.Akn(e.DdM(16,U)),e.Q6J("visible",n.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",n.showProgressBar),e.xp6(6),e.Q6J("ngModel",n.categoryName),e.xp6(5),e.Q6J("ngModel",n.categoryDescription))},dependencies:[c.O5,d.iA,a.jx,d.lQ,d.fz,v.FN,y.o,T.Hq,Z.V,_.o,u.Fj,u.JJ,u.On,N.R],encapsulation:2})}return t})(),O=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[l.Bz.forChild([{path:"",component:E,canActivate:[f.j]}]),l.Bz]})}return t})();var R=i(4891);let I=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[c.ez,O,d.U$,v.EV,y.V,T.hJ,Z.S,_.j,u.u5,R.E]})}return t})()},7116:(b,m,i)=>{i.d(m,{R:()=>f});var c=i(4650),l=i(3162);let f=(()=>{class a{constructor(){}static#e=this.\u0275fac=function(p){return new(p||a)};static#t=this.\u0275cmp=c.Xpm({type:a,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(p,C){1&p&&c._UZ(0,"mat-progress-bar",0)},dependencies:[l.pW],encapsulation:2})}return a})()}}]);
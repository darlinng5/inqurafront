"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[536],{536:(U,C,a)=>{a.r(C),a.d(C,{ProductosModule:()=>ft});var d=a(9808),p=a(8952),m=a(7449),h=a(9783);class T{}class c{}var g=a(9019),t=a(5e3),l=a(7747),_=a(5384),u=a(845),f=a(3075),P=a(5787),b=a(7773),M=a(4534),y=a(8018),A=a(1424),N=a(3407),q=a(9603),I=a(7010),w=a(5315),J=a(7116),D=a(6768),S=a(242);function E(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function B(n,s){1&n&&(t.TgZ(0,"div")(1,"p")(2,"FONT",19),t._uU(3,"Para poder transaccionar debe tener creada una empresa "),t.qZA()()())}function H(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openNew())}),t.qZA(),t.TgZ(2,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteSelectedProducts())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.selectedProducts||!e.selectedProducts.length)}}function Q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(10);return t.KtG(o.exportCSV())}),t.qZA()}}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"h5",25),t._uU(2,"Manage Products"),t.qZA(),t.TgZ(3,"span",26),t._UZ(4,"i",27),t.TgZ(5,"input",28),t.NdJ("input",function(o){t.CHM(e);const i=t.oxw(),v=t.MAs(10);return t.KtG(i.onGlobalFilter(v,o))}),t.qZA()()()}}function R(n,s){1&n&&(t.TgZ(0,"tr")(1,"th",29),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.TgZ(3,"th",30),t._uU(4,"Id "),t._UZ(5,"p-sortIcon",31),t.qZA(),t.TgZ(6,"th",32),t._uU(7,"Producto"),t._UZ(8,"p-sortIcon",33),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Imagen"),t.qZA(),t.TgZ(11,"th",34),t._uU(12,"Descuento "),t._UZ(13,"p-sortIcon",35),t.qZA(),t.TgZ(14,"th",36),t._uU(15,"Precio "),t._UZ(16,"p-sortIcon",37),t.qZA(),t.TgZ(17,"th",38),t._uU(18,"Impuesto "),t._UZ(19,"p-sortIcon",39),t.qZA(),t.TgZ(20,"th",40),t._uU(21,"Ubicacion "),t._UZ(22,"p-sortIcon",41),t.qZA(),t.TgZ(23,"th",42),t._uU(24,"Categoria "),t._UZ(25,"p-sortIcon",43),t.qZA(),t.TgZ(26,"th",44),t._uU(27,"Unidad Medida "),t._UZ(28,"p-sortIcon",45),t.qZA(),t.TgZ(29,"th",46),t._uU(30,"Ventas "),t._UZ(31,"p-sortIcon",47),t.qZA(),t.TgZ(32,"th",48),t._uU(33,"Cantidad Actual "),t._UZ(34,"p-sortIcon",49),t.qZA(),t.TgZ(35,"th",50),t._uU(36,"Stock "),t._UZ(37,"p-sortIcon",51),t.qZA(),t.TgZ(38,"th"),t._uU(39," Editar/Agr. Inventario/ Ajuste / Eliminar "),t.qZA()())}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"p-tableCheckbox",52),t.qZA(),t.TgZ(3,"td",53)(4,"span",54),t._uU(5,"Code"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"td",53)(8,"span",54),t._uU(9,"Name"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"td",53)(12,"span",54),t._uU(13,"Image"),t.qZA(),t._UZ(14,"img",55),t.qZA(),t.TgZ(15,"td",56)(16,"span",54),t._uU(17,"Price"),t.qZA(),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.TgZ(20,"td",56)(21,"span",54),t._uU(22,"Price"),t.qZA(),t._uU(23),t.ALo(24,"currency"),t.qZA(),t.TgZ(25,"td",53)(26,"span",54),t._uU(27,"taxName"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"td",53)(30,"span",54),t._uU(31,"CategoryName"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"td",53)(34,"span",54),t._uU(35,"CategoryName"),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"td",53)(38,"span",54),t._uU(39,"unitMeasurement"),t.qZA(),t._uU(40),t.qZA(),t.TgZ(41,"td",53)(42,"span",54),t._uU(43,"Reviews"),t.qZA(),t._UZ(44,"p-rating",57),t.qZA(),t.TgZ(45,"td",53)(46,"span",54),t._uU(47,"actualInventary"),t.qZA(),t._uU(48),t.qZA(),t.TgZ(49,"td",53)(50,"span",54),t._uU(51,"Status"),t.qZA(),t.TgZ(52,"span"),t._uU(53),t.qZA()(),t.TgZ(54,"td")(55,"div",58)(56,"button",59),t.NdJ("click",function(){const i=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.editProduct(i))}),t.qZA(),t.TgZ(57,"button",60),t.NdJ("click",function(){const i=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.deleteProduct(i))}),t.qZA()()()()}if(2&n){const e=s.$implicit;t.xp6(2),t.Q6J("value",e),t.xp6(4),t.hij(" ",e.code||e.productId," "),t.xp6(4),t.hij(" ",e.productName," "),t.xp6(4),t.Q6J("alt",e.productName),t.xp6(4),t.hij(" ",t.xi3(19,17,e.discount,"L")," "),t.xp6(5),t.hij(" ",t.xi3(24,20,e.productPrice,"L")," "),t.xp6(5),t.hij(" ",e.taxName," "),t.xp6(4),t.hij(" ",e.localizationName," "),t.xp6(4),t.hij(" ",e.categoryName," "),t.xp6(4),t.hij(" ",e.unitMeasurement," "),t.xp6(4),t.Q6J("ngModel",4)("readonly",!0)("cancel",!1),t.xp6(4),t.hij(" ",e.actualInventary," "),t.xp6(4),t.Tol("product-badge status-"+(e.inventoryStatus?e.inventoryStatus.toLowerCase():"")),t.xp6(1),t.Oqu(e.inventoryStatus)}}function K(n,s){if(1&n&&t._UZ(0,"img",73),2&n){const e=t.oxw(2);t.Q6J("alt",e.product.image)}}function z(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",67)(1,"label",74),t._uU(2,"Impuestos"),t.qZA(),t.TgZ(3,"div",62)(4,"div",75)(5,"p-radioButton",76),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.product.taxId=o)}),t.qZA(),t.TgZ(6,"label",77),t._uU(7,"Exonerado"),t.qZA()(),t.TgZ(8,"div",75)(9,"p-radioButton",78),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.product.taxId=o)}),t.qZA(),t.TgZ(10,"label",79),t._uU(11,"Exento"),t.qZA()(),t.TgZ(12,"div",75)(13,"p-radioButton",80),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.product.taxId=o)}),t.qZA(),t.TgZ(14,"label",81),t._uU(15,"ISV 15%"),t.qZA()(),t.TgZ(16,"div",75)(17,"p-radioButton",82),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.product.taxId=o)}),t.qZA(),t.TgZ(18,"label",83),t._uU(19,"ISV 18%"),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngModel",e.product.taxId)("disabled",!0),t.xp6(4),t.Q6J("ngModel",e.product.taxId),t.xp6(4),t.Q6J("ngModel",e.product.taxId),t.xp6(4),t.Q6J("ngModel",e.product.taxId)}}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"label",84),t._uU(2,"Es un Servicio"),t.qZA(),t.TgZ(3,"p-inputSwitch",85),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(2);return t.KtG(i.product.isAService=o)}),t._uU(4,"Es un Servicio"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.product.isAService)}}function j(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",63)(2,"label",64),t._uU(3,"Proveedor"),t.qZA(),t.TgZ(4,"app-drop-down",86),t.NdJ("ValueSelectedChange",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.filterCostumer(o))}),t.qZA()(),t.TgZ(5,"div",63)(6,"label",66),t._uU(7,"Categoria"),t.qZA(),t.TgZ(8,"app-drop-down",87),t.NdJ("ValueSelectedChange",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.filterCategory(o))}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("showFilter",!0)("IsCreating",e.IsCreatingProduct)("DropDownDataSource",e.suppliers),t.xp6(4),t.Q6J("IsCreating",e.IsCreatingProduct)("DropDownDataSource",e.categories)}}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",63)(2,"label",64),t._uU(3,"Unidad de Medida"),t.qZA(),t.TgZ(4,"app-drop-down",87),t.NdJ("ValueSelectedChange",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.filterUM(o))}),t.qZA()(),t.TgZ(5,"div",63)(6,"label",66),t._uU(7,"Inventario Inicial"),t.qZA(),t.TgZ(8,"p-inputNumber",88),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw(3);return t.KtG(i.product.quantity=o)}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("IsCreating",e.IsCreatingProduct)("DropDownDataSource",e.unitMeasurement),t.xp6(4),t.Q6J("ngModel",e.product.quantity)}}function O(n,s){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,j,9,5,"div",71),t.YNc(2,Y,9,3,"div",71),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.IsCreatingProduct),t.xp6(1),t.Q6J("ngIf",e.IsCreatingProduct)}}function V(n,s){1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}const Z=function(n){return{"ng-invalid ng-dirty":n}};function L(n,s){if(1&n){const e=t.EpF();t.YNc(0,K,1,1,"img",61),t.TgZ(1,"div",62)(2,"div",63)(3,"label",64),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"input",65),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.productName=o)}),t.qZA()(),t.TgZ(6,"div",63)(7,"label",66),t._uU(8,"C\xf3digo"),t.qZA(),t.TgZ(9,"input",65),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.code=o)}),t.qZA()()(),t.TgZ(10,"div",67)(11,"label",68),t._uU(12,"Descripci\xf3n"),t.qZA(),t.TgZ(13,"textarea",69),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.description=o)}),t.qZA()(),t.YNc(14,z,20,5,"div",70),t.YNc(15,F,5,1,"div",71),t.YNc(16,O,3,2,"div",0),t.TgZ(17,"div",62)(18,"div",63)(19,"label",64),t._uU(20,"Costo"),t.qZA(),t.TgZ(21,"p-inputNumber",72),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.purcharsePrice=o)}),t.qZA()(),t.TgZ(22,"div",63)(23,"label",66),t._uU(24,"Precio de Venta"),t.qZA(),t.TgZ(25,"p-inputNumber",72),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.productPrice=o)}),t.qZA()()(),t.YNc(26,V,2,0,"div",0)}if(2&n){const e=t.oxw();t.Q6J("ngIf",e.product.image),t.xp6(5),t.Q6J("ngModel",e.product.productName)("ngClass",t.VKq(12,Z,e.submitted&&!e.product.productName)),t.xp6(4),t.Q6J("ngModel",e.product.code)("ngClass",t.VKq(14,Z,e.submitted&&!e.product.productName)),t.xp6(4),t.Q6J("ngModel",e.product.description),t.xp6(1),t.Q6J("ngIf",e.IsCreatingProduct),t.xp6(1),t.Q6J("ngIf",e.IsCreatingProduct),t.xp6(1),t.Q6J("ngIf",!e.product.isAService),t.xp6(5),t.Q6J("ngModel",e.product.purcharsePrice),t.xp6(4),t.Q6J("ngModel",e.product.productPrice),t.xp6(1),t.Q6J("ngIf",e.showProgressBar)}}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",89),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideDialog())}),t.qZA(),t.TgZ(1,"button",90),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveProduct())}),t.qZA()}}function $(n,s){if(1&n&&t._UZ(0,"img",73),2&n){const e=t.oxw(2);t.Q6J("alt",e.product.image)}}function X(n,s){1&n&&(t.TgZ(0,"small",97),t._uU(1,"El Nombre es requerido"),t.qZA())}function tt(n,s){if(1&n){const e=t.EpF();t.YNc(0,$,1,1,"img",61),t.TgZ(1,"div",67)(2,"label",91),t._uU(3,"Nombre Producto"),t.qZA(),t.TgZ(4,"input",92),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.productName=o)}),t.qZA(),t.YNc(5,X,2,0,"small",93),t.qZA(),t.TgZ(6,"div",67)(7,"label",68),t._uU(8,"Descripcion del Producto"),t.qZA(),t.TgZ(9,"textarea",94),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.description=o)}),t.qZA()(),t.TgZ(10,"div",62)(11,"div",63)(12,"label",95),t._uU(13,"Cantidad"),t.qZA(),t.TgZ(14,"p-inputNumber",96),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.addInventaryQuantity=o)}),t.qZA()()(),t.TgZ(15,"div",62)(16,"div",63)(17,"label",95),t._uU(18,"Precio de Compra"),t.qZA(),t.TgZ(19,"p-inputNumber",72),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.addInventaryPrice=o)}),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("ngIf",e.product.image),t.xp6(4),t.Q6J("ngModel",e.product.productName)("ngClass",t.VKq(7,Z,e.submitted&&!e.product.productName)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.product.productName),t.xp6(4),t.Q6J("ngModel",e.product.description),t.xp6(5),t.Q6J("ngModel",e.addInventaryQuantity),t.xp6(5),t.Q6J("ngModel",e.addInventaryPrice)}}function et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",89),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showAddInventaryDialog=!1)}),t.qZA(),t.TgZ(1,"button",90),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveProduct())}),t.qZA()}}function ot(n,s){if(1&n&&t._UZ(0,"img",73),2&n){const e=t.oxw(2);t.Q6J("alt",e.product.image)}}function nt(n,s){1&n&&(t.TgZ(0,"small",97),t._uU(1,"El Nombre es requerido"),t.qZA())}function rt(n,s){if(1&n){const e=t.EpF();t.YNc(0,ot,1,1,"img",61),t.TgZ(1,"div",67)(2,"label",91),t._uU(3,"Nombre Producto"),t.qZA(),t.TgZ(4,"input",92),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.productName=o)}),t.qZA(),t.YNc(5,nt,2,0,"small",93),t.qZA(),t.TgZ(6,"div",67)(7,"label",68),t._uU(8,"Descripcion del Producto"),t.qZA(),t.TgZ(9,"textarea",94),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.product.description=o)}),t.qZA()(),t.TgZ(10,"div",62)(11,"div",63)(12,"label",95),t._uU(13,"Cantidad"),t.qZA(),t.TgZ(14,"p-inputNumber",96),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.addInventaryQuantity=o)}),t.qZA()()(),t.TgZ(15,"div",62)(16,"div",63)(17,"label",95),t._uU(18,"Precio de Compra"),t.qZA(),t.TgZ(19,"p-inputNumber",72),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.addInventaryPrice=o)}),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("ngIf",e.product.image),t.xp6(4),t.Q6J("ngModel",e.product.productName)("ngClass",t.VKq(7,Z,e.submitted&&!e.product.productName)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.product.productName),t.xp6(4),t.Q6J("ngModel",e.product.description),t.xp6(5),t.Q6J("ngModel",e.addInventaryQuantity),t.xp6(5),t.Q6J("ngModel",e.addInventaryPrice)}}function it(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",89),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showAjustInventaryDialog=!1)}),t.qZA(),t.TgZ(1,"button",90),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveProduct())}),t.qZA()}}function st(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"Esta seguro que desea eliminar a "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.product.productName)}}function at(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",98),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteProductDialog=!1)}),t.qZA(),t.TgZ(1,"button",99),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmDelete())}),t.qZA()}}function dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",98),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteProductsDialog=!1)}),t.qZA(),t.TgZ(1,"button",99),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.confirmDeleteSelected())}),t.qZA()}}const ct=function(){return["productName","country.name","representative.name","status"]},ut=function(){return[10,20,30]},lt=function(){return{width:"850px"}},x=function(){return{width:"450px"}};let pt=(()=>{class n{constructor(e,r,o){this.productService=e,this.eventService=r,this.messageService=o,this.IsService=!1,this.addInventaryQuantity=0,this.addInventaryPrice=0,this.showAddInventaryDialog=!1,this.addAjustQuantity=0,this.showAjustInventaryDialog=!1,this.hasEnterprise=!1,this.hasWareHouse=!1,this.showProgressBar=!1,this.productToDeleteList=[],this.categoryActual=0,this.unitMeasurementActual=0,this.defaultLozalization=0,this.userUniqueIdentifiquerKey="NotFound",this.productDialog=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.products=[],this.product={},this.selectedProducts=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.productsByWareHouse=[],this.hasEnterprise=r.getHasEnterprise()==g.N.SuccessResponse,this.hasWareHouse=r.getHasWareHouse()==g.N.SuccessResponse,this.GetCategoriesByEnterprise(),this.GetUnitMeasurementByEnterprise(),this.GetSupplierValuesByEnterprise()}ngOnInit(){this.GetProductsByWareHouse(),this.cols=[{field:"product",header:"Product"},{field:"ProductName",header:"ProductName"},{field:"localizationName",header:"localizationName"},{field:"rating",header:"Reviews"},{field:"inventoryStatus",header:"Status"}]}openNew(){this.IsCreatingProduct=!0,this.product={},this.submitted=!1,this.productDialog=!0}deleteSelectedProducts(){this.deleteProductsDialog=!0}editProduct(e){this.IsCreatingProduct=!1,this.product=Object.assign({},e),this.productDialog=!0}deleteProduct(e){this.deleteProductDialog=!0,this.product=Object.assign({},e)}confirmDeleteSelected(){this.showProgressBar=!0,this.deleteProductsDialog=!1,this.selectedProducts.forEach(e=>this.MaterializeProductToDelete(e)),this.productService.DeleteProductByList(this.productToDeleteList,this.eventService.getToken()).subscribe(e=>{this.messageService.add(e.data?{severity:"success",summary:"Success",detail:e.data,life:6e3}:{severity:"error",summary:"Error",detail:e.message,life:3e3}),this.showProgressBar=!1},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3}),this.showProgressBar=!1}),this.productToDeleteList=[],this.products=this.products.filter(e=>!this.selectedProducts.includes(e)),this.selectedProducts=[]}confirmDelete(){this.showProgressBar=!0;var e=new c;e.id=this.product.productId,e.name=this.product.productName,e.description=this.product.description,e.userIdentifiquer=this.eventService.getToken(),this.productService.DeleteProduct(e).subscribe(r=>{r.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+e.name+" ha sido eliminado con Exito",life:3e3})):this.messageService.add({severity:"error",summary:"Error",detail:r.message,life:3e3}),this.showProgressBar=!1},r=>{this.messageService.add({severity:"error",summary:"Error",detail:r.message,life:6e3})}),this.deleteProductDialog=!1}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.showProgressBar=!0,this.productRequest=new T,this.productRequest.Id=this.product.productId,this.productRequest.name=this.product.productName,this.productRequest.price=this.product.productPrice,this.productRequest.description=null==this.product.description?"":this.product.description,this.productRequest.taxId=this.product.taxId,this.productRequest.userIdentifiquer=this.userUniqueIdentifiquerKey,this.productRequest.categoryId=null==this.categoryActual?0:this.categoryActual,this.productRequest.unitMeasurementId=null==this.unitMeasurementActual?0:this.unitMeasurementActual,this.productRequest.quantity=this.product.quantity,this.productRequest.purcharsePrice=this.product.purcharsePrice,this.productRequest.code=this.product.code,this.productRequest.localization=this.defaultLozalization,this.productRequest.isAService=this.product.isAService,this.submitted=!0,this.IsCreatingProduct?null==this.productRequest.name||null==this.productRequest.price?(this.messageService.add({severity:"error",summary:"Error",detail:"Para crear productos son obligatorios incluir el nombre y el precio",life:3e3}),this.showProgressBar=!1):this.AddNewProduct(this.productRequest):null==this.productRequest.name&&null==this.productRequest.price?(this.messageService.add({severity:"error",summary:"Error",detail:"No hay nada que actualizar",life:3e3}),this.showProgressBar=!1):this.UpdateProduct(this.productRequest)}UpdateProduct(e){e.userIdentifiquer=this.eventService.getToken(),this.productService.UpdateProduct(e).subscribe(r=>{r.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+e.name+" ha sido guardado con Exito",life:3e3}),this.product={},this.productDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:r.message,life:3e3}),this.showProgressBar=!1})}GetProductsByWareHouse(){this.showProgressBar=!0,this.productService.getProductsByWareHouse(this.eventService.getToken()).subscribe(e=>{e.data?(this.productsByWareHouse=e.data,this.products=e.data,console.log(this.products)):this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3}),this.showProgressBar=!1},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:6e3}),this.showProgressBar=!1})}AddNewProduct(e){e.userIdentifiquer=this.eventService.getToken(),e.supplier=null==this.actualSupplier?"0":this.actualSupplier,this.productService.AddNewProduct(e).subscribe(r=>{r.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+e.name+" ha sido guardado con Exito",life:3e3}),this.productDialog=!1,this.product={}):this.messageService.add({severity:"error",summary:"Error",detail:r.message,life:3e3}),this.showProgressBar=!1},r=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error Grave al tratar de guardar los datos",life:3e3})})}findIndexById(e){let r=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===e){r=o;break}return r}onGlobalFilter(e,r){e.filterGlobal(r.target.value,"contains")}filter(e){this.categoryActual=e}MaterializeProductToDelete(e){var r=new c;r.id=e.productId,r.name=e.productName,r.description=e.description,this.productToDeleteList.push(r)}addProductInventary(e){this.addInventaryPrice=0,this.addInventaryQuantity=0,this.product=Object.assign({},e),this.showAddInventaryDialog=!0}addAjustInventaryProduct(e){this.addAjustQuantity=0,this.product=Object.assign({},e),this.showAjustInventaryDialog=!0}GetCategoriesByEnterprise(){this.productService.GetCategoriesByEnterprise(this.eventService.getToken()).subscribe(e=>{e.data?this.categories=e.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterCategory(e){this.categoryActual=e}GetUnitMeasurementByEnterprise(){this.productService.GetUnitMeasurementByEnterprise(this.eventService.getToken()).subscribe(e=>{e.data?this.unitMeasurement=e.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterUM(e){this.unitMeasurementActual=e}GetSupplierValuesByEnterprise(){this.productService.GetSupplierValues(this.eventService.getToken()).subscribe(e=>{e.data?this.suppliers=e.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterCostumer(e){this.actualSupplier=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.M),t.Y36(_.P),t.Y36(h.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t._Bn([h.ez])],decls:34,vars:40,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","productId",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Detalles del Producto",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Agregar Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["COLOR","red"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["pButton","","pRipple","","label","Exportar","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","productId"],["field","productId"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","discount"],["field","discount"],["pSortableColumn","productPrice"],["field","productPrice"],["pSortableColumn","taxName"],["field","taxName"],["pSortableColumn","localizationName"],["field","localizationName"],["pSortableColumn","categoryName"],["field","categoryName"],["pSortableColumn","unitMeasurement"],["field","unitMeasurement"],["pSortableColumn","rating"],["field","rating"],["pSortableColumn","actualInventary"],["field","actualInventary"],["pSortableColumn","inventoryStatus"],["field","inventoryStatus"],[3,"value"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],["src","http://cajasgraf.com.ar/productos/images/df.jpg","width","100",1,"shadow-4",3,"alt"],[2,"width","14%","min-width","8rem"],[3,"ngModel","readonly","cancel"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["src","https://w7.pngwing.com/pngs/685/904/png-transparent-fizzy-drinks-coca-cola-diet-coke-rc-cola-coca-cola-food-cola-soft-drink.png","width","150","class","mt-0 mx-auto mb-5 block shadow-2",3,"alt",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","quantity"],[1,"field"],["for","description"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],["class","field",4,"ngIf"],["class","formgrid grid",4,"ngIf"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["src","https://w7.pngwing.com/pngs/685/904/png-transparent-fizzy-drinks-coca-cola-diet-coke-rc-cola-coca-cola-food-cola-soft-drink.png","width","150",1,"mt-0","mx-auto","mb-5","block","shadow-2",3,"alt"],[1,"mb-3"],[1,"field-radiobutton","col-6"],["id","category1","name","category","value","1",3,"ngModel","disabled","ngModelChange"],["for","category1"],["id","category2","name","category","value","2",3,"ngModel","ngModelChange"],["for","category2"],["id","category3","name","category","value","4",3,"ngModel","ngModelChange"],["for","category3"],["id","category4","name","category","value","5",3,"ngModel","ngModelChange"],["for","category4"],["for","sc"],["id","sc",2,"margin-left","10px",3,"ngModel","ngModelChange"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["id","quantity",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["for","ProductName"],["disabled","true","type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["disabled","true","id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],["for","productPrice"],["id","price",3,"ngModel","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,E,2,0,"div",0),t.YNc(1,B,4,0,"div",0),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3),t._UZ(5,"p-toast"),t.TgZ(6,"p-toolbar",4),t.YNc(7,H,3,1,"ng-template",5),t.YNc(8,Q,1,0,"ng-template",6),t.qZA(),t.TgZ(9,"p-table",7,8),t.NdJ("selectionChange",function(i){return r.selectedProducts=i}),t.YNc(11,G,6,0,"ng-template",9),t.YNc(12,R,40,0,"ng-template",10),t.YNc(13,k,58,23,"ng-template",11),t.qZA()(),t.TgZ(14,"p-dialog",12),t.NdJ("visibleChange",function(i){return r.productDialog=i}),t.YNc(15,L,27,16,"ng-template",13),t.YNc(16,W,2,0,"ng-template",14),t.qZA(),t.TgZ(17,"p-dialog",15),t.NdJ("visibleChange",function(i){return r.showAddInventaryDialog=i}),t.YNc(18,tt,20,9,"ng-template",13),t.YNc(19,et,2,0,"ng-template",14),t.qZA(),t.TgZ(20,"p-dialog",15),t.NdJ("visibleChange",function(i){return r.showAjustInventaryDialog=i}),t.YNc(21,rt,20,9,"ng-template",13),t.YNc(22,it,2,0,"ng-template",14),t.qZA(),t.TgZ(23,"p-dialog",16),t.NdJ("visibleChange",function(i){return r.deleteProductDialog=i}),t.TgZ(24,"div",17),t._UZ(25,"i",18),t.YNc(26,st,5,1,"span",0),t.qZA(),t.YNc(27,at,2,0,"ng-template",14),t.qZA(),t.TgZ(28,"p-dialog",16),t.NdJ("visibleChange",function(i){return r.deleteProductsDialog=i}),t.TgZ(29,"div",17),t._UZ(30,"i",18),t.TgZ(31,"span"),t._uU(32,"Esta seguro que quiere eliminar estos productos seleccionados?"),t.qZA()(),t.YNc(33,dt,2,0,"ng-template",14),t.qZA()()()),2&e&&(t.Q6J("ngIf",r.showProgressBar),t.xp6(1),t.Q6J("ngIf",!r.hasEnterprise||!r.hasWareHouse),t.xp6(8),t.Q6J("value",r.products)("columns",r.cols)("rows",10)("globalFilterFields",t.DdM(33,ct))("rows",10)("paginator",!0)("rowsPerPageOptions",t.DdM(34,ut))("showCurrentPageReport",!0)("selection",r.selectedProducts)("rowHover",!0),t.xp6(5),t.Akn(t.DdM(35,lt)),t.Q6J("visible",r.productDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(36,x)),t.Q6J("visible",r.showAddInventaryDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(37,x)),t.Q6J("visible",r.showAjustInventaryDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(38,x)),t.Q6J("visible",r.deleteProductDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",r.product),t.xp6(2),t.Akn(t.DdM(39,x)),t.Q6J("visible",r.deleteProductsDialog)("modal",!0))},dependencies:[d.mk,d.O5,p.iA,h.jx,p.lQ,p.fz,p.UA,p.Mo,u.Hq,f.Fj,f.JJ,f.Q7,f.On,P.H,b.FN,M.o,y.iG,A.o,N.g,q.EU,I.Rn,w.V,J.R,D.t,S.Ql,d.H9],encapsulation:2}),n})(),gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild([{path:"",component:pt}]),m.Bz]}),n})();var _t=a(8205),mt=a(4036),ht=a(4891);let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,gt,p.U$,_t.O,f.u5,u.hJ,P.T,b.EV,M.V,y.Xt,A.j,N.A,mt.kW,q.cc,I.L$,w.S,ht.E,S.Iu]}),n})()},3407:(U,C,a)=>{a.d(C,{A:()=>T,g:()=>h});var d=a(5e3),p=a(9808),m=a(3075);let h=(()=>{class c{constructor(t,l,_,u){this.el=t,this.ngModel=l,this.control=_,this.cd=u,this.onResize=new d.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(t){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(t){this.autoResize&&this.resize(t)}onBlur(t){this.autoResize&&this.resize(t)}resize(t){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(t||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return c.\u0275fac=function(t){return new(t||c)(d.Y36(d.SBq),d.Y36(m.On,8),d.Y36(m.a5,8),d.Y36(d.sBO))},c.\u0275dir=d.lG2({type:c,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(t,l){1&t&&d.NdJ("input",function(u){return l.onInput(u)})("focus",function(u){return l.onFocus(u)})("blur",function(u){return l.onBlur(u)}),2&t&&d.ekj("p-filled",l.filled)("p-inputtextarea-resizable",l.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),c})(),T=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[p.ez]}),c})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[536],{536:(S,C,s)=>{s.r(C),s.d(C,{ProductosModule:()=>le});var d=s(9808),p=s(8952),_=s(5077),h=s(9783);class x{}class u{}var g=s(9019),e=s(5e3),l=s(7747),m=s(5384),c=s(845),f=s(3075),P=s(5787),b=s(7773),M=s(4534),y=s(8018),A=s(1424),N=s(3407),q=s(9603),I=s(7010),w=s(5315),U=s(7116),J=s(6768);function D(r,a){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function E(r,a){1&r&&(e.TgZ(0,"div")(1,"p")(2,"FONT",19),e._uU(3,"Para poder transaccionar debe tener creada una empresa "),e.qZA()()())}function B(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA(),e.TgZ(2,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteSelectedProducts())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedProducts||!t.selectedProducts.length)}}function H(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(10);return e.KtG(o.exportCSV())}),e.qZA()}}function G(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",24)(1,"h5",25),e._uU(2,"Manage Products"),e.qZA(),e.TgZ(3,"span",26),e._UZ(4,"i",27),e.TgZ(5,"input",28),e.NdJ("input",function(o){e.CHM(t);const i=e.oxw(),v=e.MAs(10);return e.KtG(i.onGlobalFilter(v,o))}),e.qZA()()()}}function R(r,a){1&r&&(e.TgZ(0,"tr")(1,"th",29),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",30),e._uU(4,"Id "),e._UZ(5,"p-sortIcon",31),e.qZA(),e.TgZ(6,"th",32),e._uU(7,"Producto"),e._UZ(8,"p-sortIcon",33),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Imagen"),e.qZA(),e.TgZ(11,"th",34),e._uU(12,"Descuento "),e._UZ(13,"p-sortIcon",35),e.qZA(),e.TgZ(14,"th",36),e._uU(15,"Precio "),e._UZ(16,"p-sortIcon",37),e.qZA(),e.TgZ(17,"th",38),e._uU(18,"Impuesto "),e._UZ(19,"p-sortIcon",39),e.qZA(),e.TgZ(20,"th",40),e._uU(21,"Ubicacion "),e._UZ(22,"p-sortIcon",41),e.qZA(),e.TgZ(23,"th",42),e._uU(24,"Categoria "),e._UZ(25,"p-sortIcon",43),e.qZA(),e.TgZ(26,"th",44),e._uU(27,"Unidad Medida "),e._UZ(28,"p-sortIcon",45),e.qZA(),e.TgZ(29,"th",46),e._uU(30,"Ventas "),e._UZ(31,"p-sortIcon",47),e.qZA(),e.TgZ(32,"th",48),e._uU(33,"Cantidad Actual "),e._UZ(34,"p-sortIcon",49),e.qZA(),e.TgZ(35,"th",50),e._uU(36,"Stock "),e._UZ(37,"p-sortIcon",51),e.qZA(),e.TgZ(38,"th"),e._uU(39," Editar/Agr. Inventario/ Ajuste / Eliminar "),e.qZA()())}function Q(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",52),e.qZA(),e.TgZ(3,"td",53)(4,"span",54),e._uU(5,"Code"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td",53)(8,"span",54),e._uU(9,"Name"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td",53)(12,"span",54),e._uU(13,"Image"),e.qZA(),e._UZ(14,"img",55),e.qZA(),e.TgZ(15,"td",56)(16,"span",54),e._uU(17,"Price"),e.qZA(),e._uU(18),e.ALo(19,"currency"),e.qZA(),e.TgZ(20,"td",56)(21,"span",54),e._uU(22,"Price"),e.qZA(),e._uU(23),e.ALo(24,"currency"),e.qZA(),e.TgZ(25,"td",53)(26,"span",54),e._uU(27,"taxName"),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"td",53)(30,"span",54),e._uU(31,"CategoryName"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"td",53)(34,"span",54),e._uU(35,"CategoryName"),e.qZA(),e._uU(36),e.qZA(),e.TgZ(37,"td",53)(38,"span",54),e._uU(39,"unitMeasurement"),e.qZA(),e._uU(40),e.qZA(),e.TgZ(41,"td",53)(42,"span",54),e._uU(43,"Reviews"),e.qZA(),e._UZ(44,"p-rating",57),e.qZA(),e.TgZ(45,"td",53)(46,"span",54),e._uU(47,"actualInventary"),e.qZA(),e._uU(48),e.qZA(),e.TgZ(49,"td",53)(50,"span",54),e._uU(51,"Status"),e.qZA(),e.TgZ(52,"span"),e._uU(53),e.qZA()(),e.TgZ(54,"td")(55,"div",58)(56,"button",59),e.NdJ("click",function(){const i=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.editProduct(i))}),e.qZA(),e.TgZ(57,"button",60),e.NdJ("click",function(){const i=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.deleteProduct(i))}),e.qZA()()()()}if(2&r){const t=a.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(4),e.hij(" ",t.code||t.productId," "),e.xp6(4),e.hij(" ",t.productName," "),e.xp6(4),e.Q6J("alt",t.productName),e.xp6(4),e.hij(" ",e.xi3(19,17,t.discount,"L")," "),e.xp6(5),e.hij(" ",e.xi3(24,20,t.productPrice,"L")," "),e.xp6(5),e.hij(" ",t.taxName," "),e.xp6(4),e.hij(" ",t.localizationName," "),e.xp6(4),e.hij(" ",t.categoryName," "),e.xp6(4),e.hij(" ",t.unitMeasurement," "),e.xp6(4),e.Q6J("ngModel",4)("readonly",!0)("cancel",!1),e.xp6(4),e.hij(" ",t.actualInventary," "),e.xp6(4),e.Tol("product-badge status-"+(t.inventoryStatus?t.inventoryStatus.toLowerCase():"")),e.xp6(1),e.Oqu(t.inventoryStatus)}}function k(r,a){if(1&r&&e._UZ(0,"img",84),2&r){const t=e.oxw(2);e.Q6J("alt",t.product.image)}}function K(r,a){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}const Z=function(r){return{"ng-invalid ng-dirty":r}};function z(r,a){if(1&r){const t=e.EpF();e.YNc(0,k,1,1,"img",61),e.TgZ(1,"div",62)(2,"div",63)(3,"label",64),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"input",65),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.productName=o)}),e.qZA()(),e.TgZ(6,"div",63)(7,"label",66),e._uU(8,"C\xf3digo"),e.qZA(),e.TgZ(9,"input",65),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.code=o)}),e.qZA()()(),e.TgZ(10,"div",67)(11,"label",68),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"textarea",69),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.description=o)}),e.qZA()(),e.TgZ(14,"div",67)(15,"label",70),e._uU(16,"Impuestos"),e.qZA(),e.TgZ(17,"div",62)(18,"div",71)(19,"p-radioButton",72),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.taxId=o)}),e.qZA(),e.TgZ(20,"label",73),e._uU(21,"Exonerado"),e.qZA()(),e.TgZ(22,"div",71)(23,"p-radioButton",74),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.taxId=o)}),e.qZA(),e.TgZ(24,"label",75),e._uU(25,"Exento"),e.qZA()(),e.TgZ(26,"div",71)(27,"p-radioButton",76),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.taxId=o)}),e.qZA(),e.TgZ(28,"label",77),e._uU(29,"ISV 15%"),e.qZA()(),e.TgZ(30,"div",71)(31,"p-radioButton",78),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.taxId=o)}),e.qZA(),e.TgZ(32,"label",79),e._uU(33,"ISV 18%"),e.qZA()()()(),e.TgZ(34,"div",62)(35,"div",63)(36,"label",64),e._uU(37,"Proveedor"),e.qZA(),e.TgZ(38,"app-drop-down",80),e.NdJ("ValueSelectedChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterCostumer(o))}),e.qZA()(),e.TgZ(39,"div",63)(40,"label",66),e._uU(41,"Categoria"),e.qZA(),e.TgZ(42,"app-drop-down",81),e.NdJ("ValueSelectedChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterCategory(o))}),e.qZA()()(),e.TgZ(43,"div",62)(44,"div",63)(45,"label",64),e._uU(46,"Unidad de Medida"),e.qZA(),e.TgZ(47,"app-drop-down",81),e.NdJ("ValueSelectedChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterUM(o))}),e.qZA()(),e.TgZ(48,"div",63)(49,"label",66),e._uU(50,"Inventario Inicial"),e.qZA(),e.TgZ(51,"p-inputNumber",82),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.quantity=o)}),e.qZA()()(),e.TgZ(52,"div",62)(53,"div",63)(54,"label",64),e._uU(55,"Precio de Compra"),e.qZA(),e.TgZ(56,"p-inputNumber",83),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.purcharsePrice=o)}),e.qZA()(),e.TgZ(57,"div",63)(58,"label",66),e._uU(59,"Precio de Venta"),e.qZA(),e.TgZ(60,"p-inputNumber",83),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.productPrice=o)}),e.qZA()()(),e.YNc(61,K,2,0,"div",0)}if(2&r){const t=e.oxw();e.Q6J("ngIf",t.product.image),e.xp6(5),e.Q6J("ngModel",t.product.productName)("ngClass",e.VKq(22,Z,t.submitted&&!t.product.productName)),e.xp6(4),e.Q6J("ngModel",t.product.code)("ngClass",e.VKq(24,Z,t.submitted&&!t.product.productName)),e.xp6(4),e.Q6J("ngModel",t.product.description),e.xp6(6),e.Q6J("ngModel",t.product.taxId)("disabled",!0),e.xp6(4),e.Q6J("ngModel",t.product.taxId),e.xp6(4),e.Q6J("ngModel",t.product.taxId),e.xp6(4),e.Q6J("ngModel",t.product.taxId),e.xp6(7),e.Q6J("showFilter",!0)("IsCreating",t.IsCreatingProduct)("DropDownDataSource",t.suppliers),e.xp6(4),e.Q6J("IsCreating",t.IsCreatingProduct)("DropDownDataSource",t.categories),e.xp6(5),e.Q6J("IsCreating",t.IsCreatingProduct)("DropDownDataSource",t.unitMeasurement),e.xp6(4),e.Q6J("ngModel",t.product.quantity),e.xp6(5),e.Q6J("ngModel",t.product.purcharsePrice),e.xp6(4),e.Q6J("ngModel",t.product.productPrice),e.xp6(1),e.Q6J("ngIf",t.showProgressBar)}}function j(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",86),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveProduct())}),e.qZA()}}function F(r,a){if(1&r&&e._UZ(0,"img",84),2&r){const t=e.oxw(2);e.Q6J("alt",t.product.image)}}function Y(r,a){1&r&&(e.TgZ(0,"small",93),e._uU(1,"El Nombre es requerido"),e.qZA())}function O(r,a){if(1&r){const t=e.EpF();e.YNc(0,F,1,1,"img",61),e.TgZ(1,"div",67)(2,"label",87),e._uU(3,"Nombre Producto"),e.qZA(),e.TgZ(4,"input",88),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.productName=o)}),e.qZA(),e.YNc(5,Y,2,0,"small",89),e.qZA(),e.TgZ(6,"div",67)(7,"label",68),e._uU(8,"Descripcion del Producto"),e.qZA(),e.TgZ(9,"textarea",90),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.description=o)}),e.qZA()(),e.TgZ(10,"div",62)(11,"div",63)(12,"label",91),e._uU(13,"Cantidad"),e.qZA(),e.TgZ(14,"p-inputNumber",92),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.addInventaryQuantity=o)}),e.qZA()()(),e.TgZ(15,"div",62)(16,"div",63)(17,"label",91),e._uU(18,"Precio de Compra"),e.qZA(),e.TgZ(19,"p-inputNumber",83),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.addInventaryPrice=o)}),e.qZA()()()}if(2&r){const t=e.oxw();e.Q6J("ngIf",t.product.image),e.xp6(4),e.Q6J("ngModel",t.product.productName)("ngClass",e.VKq(7,Z,t.submitted&&!t.product.productName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.product.productName),e.xp6(4),e.Q6J("ngModel",t.product.description),e.xp6(5),e.Q6J("ngModel",t.addInventaryQuantity),e.xp6(5),e.Q6J("ngModel",t.addInventaryPrice)}}function V(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showAddInventaryDialog=!1)}),e.qZA(),e.TgZ(1,"button",86),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveProduct())}),e.qZA()}}function L(r,a){if(1&r&&e._UZ(0,"img",84),2&r){const t=e.oxw(2);e.Q6J("alt",t.product.image)}}function W(r,a){1&r&&(e.TgZ(0,"small",93),e._uU(1,"El Nombre es requerido"),e.qZA())}function $(r,a){if(1&r){const t=e.EpF();e.YNc(0,L,1,1,"img",61),e.TgZ(1,"div",67)(2,"label",87),e._uU(3,"Nombre Producto"),e.qZA(),e.TgZ(4,"input",88),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.productName=o)}),e.qZA(),e.YNc(5,W,2,0,"small",89),e.qZA(),e.TgZ(6,"div",67)(7,"label",68),e._uU(8,"Descripcion del Producto"),e.qZA(),e.TgZ(9,"textarea",90),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.product.description=o)}),e.qZA()(),e.TgZ(10,"div",62)(11,"div",63)(12,"label",91),e._uU(13,"Cantidad"),e.qZA(),e.TgZ(14,"p-inputNumber",92),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.addInventaryQuantity=o)}),e.qZA()()(),e.TgZ(15,"div",62)(16,"div",63)(17,"label",91),e._uU(18,"Precio de Compra"),e.qZA(),e.TgZ(19,"p-inputNumber",83),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.addInventaryPrice=o)}),e.qZA()()()}if(2&r){const t=e.oxw();e.Q6J("ngIf",t.product.image),e.xp6(4),e.Q6J("ngModel",t.product.productName)("ngClass",e.VKq(7,Z,t.submitted&&!t.product.productName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.product.productName),e.xp6(4),e.Q6J("ngModel",t.product.description),e.xp6(5),e.Q6J("ngModel",t.addInventaryQuantity),e.xp6(5),e.Q6J("ngModel",t.addInventaryPrice)}}function X(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showAjustInventaryDialog=!1)}),e.qZA(),e.TgZ(1,"button",86),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveProduct())}),e.qZA()}}function ee(r,a){if(1&r&&(e.TgZ(0,"span"),e._uU(1,"Esta seguro que desea eliminar a "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&r){const t=e.oxw();e.xp6(3),e.Oqu(t.product.productName)}}function te(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteProductDialog=!1)}),e.qZA(),e.TgZ(1,"button",95),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.qZA()}}function oe(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteProductsDialog=!1)}),e.qZA(),e.TgZ(1,"button",95),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDeleteSelected())}),e.qZA()}}const ne=function(){return["productName","country.name","representative.name","status"]},re=function(){return[10,20,30]},ie=function(){return{width:"850px"}},T=function(){return{width:"450px"}};let se=(()=>{class r{constructor(t,n,o){this.productService=t,this.eventService=n,this.messageService=o,this.addInventaryQuantity=0,this.addInventaryPrice=0,this.showAddInventaryDialog=!1,this.addAjustQuantity=0,this.showAjustInventaryDialog=!1,this.hasEnterprise=!1,this.hasWareHouse=!1,this.showProgressBar=!1,this.productToDeleteList=[],this.categoryActual=0,this.unitMeasurementActual=0,this.defaultLozalization=0,this.userUniqueIdentifiquerKey="NotFound",this.productDialog=!1,this.deleteProductDialog=!1,this.deleteProductsDialog=!1,this.products=[],this.product={},this.selectedProducts=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.productsByWareHouse=[],this.hasEnterprise=n.getHasEnterprise()==g.N.SuccessResponse,this.hasWareHouse=n.getHasWareHouse()==g.N.SuccessResponse,this.GetCategoriesByEnterprise(),this.GetUnitMeasurementByEnterprise(),this.GetSupplierValuesByEnterprise()}ngOnInit(){this.GetProductsByWareHouse(),this.cols=[{field:"product",header:"Product"},{field:"ProductName",header:"ProductName"},{field:"localizationName",header:"localizationName"},{field:"rating",header:"Reviews"},{field:"inventoryStatus",header:"Status"}]}openNew(){this.IsCreatingProduct=!0,this.product={},this.submitted=!1,this.productDialog=!0}deleteSelectedProducts(){this.deleteProductsDialog=!0}editProduct(t){this.IsCreatingProduct=!1,this.product=Object.assign({},t),this.productDialog=!0}deleteProduct(t){this.deleteProductDialog=!0,this.product=Object.assign({},t)}confirmDeleteSelected(){this.showProgressBar=!0,this.deleteProductsDialog=!1,this.selectedProducts.forEach(t=>this.MaterializeProductToDelete(t)),this.productService.DeleteProductByList(this.productToDeleteList,this.eventService.getToken()).subscribe(t=>{this.messageService.add(t.data?{severity:"success",summary:"Success",detail:t.data,life:6e3}:{severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1}),this.productToDeleteList=[],this.products=this.products.filter(t=>!this.selectedProducts.includes(t)),this.selectedProducts=[]}confirmDelete(){this.showProgressBar=!0;var t=new u;t.id=this.product.productId,t.name=this.product.productName,t.description=this.product.description,t.userIdentifiquer=this.eventService.getToken(),this.productService.DeleteProduct(t).subscribe(n=>{n.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+t.name+" ha sido eliminado con Exito",life:3e3})):this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1},n=>{this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:6e3})}),this.deleteProductDialog=!1}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.showProgressBar=!0,this.productRequest=new x,this.productRequest.Id=this.product.productId,this.productRequest.name=this.product.productName,this.productRequest.price=this.product.productPrice,this.productRequest.description=null==this.product.description?"":this.product.description,this.productRequest.taxId=this.product.taxId,this.productRequest.userIdentifiquer=this.userUniqueIdentifiquerKey,this.productRequest.categoryId=null==this.categoryActual?0:this.categoryActual,this.productRequest.unitMeasurementId=null==this.unitMeasurementActual?0:this.unitMeasurementActual,this.productRequest.quantity=this.product.quantity,this.productRequest.purcharsePrice=this.product.purcharsePrice,this.productRequest.code=this.product.code,this.productRequest.localization=this.defaultLozalization,this.submitted=!0,this.IsCreatingProduct?null==this.productRequest.name||null==this.productRequest.price?(this.messageService.add({severity:"error",summary:"Error",detail:"Para crear productos son obligatorios incluir el nombre y el precio",life:3e3}),this.showProgressBar=!1):this.AddNewProduct(this.productRequest):null==this.productRequest.name&&null==this.productRequest.price?(this.messageService.add({severity:"error",summary:"Error",detail:"No hay nada que actualizar",life:3e3}),this.showProgressBar=!1):this.UpdateProduct(this.productRequest)}UpdateProduct(t){t.userIdentifiquer=this.eventService.getToken(),this.productService.UpdateProduct(t).subscribe(n=>{n.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+t.name+" ha sido guardado con Exito",life:3e3}),this.product={}):this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1})}GetProductsByWareHouse(){this.showProgressBar=!0,this.productService.getProductsByWareHouse(this.eventService.getToken()).subscribe(t=>{t.data?(this.productsByWareHouse=t.data,this.products=t.data):this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3}),this.showProgressBar=!1},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:6e3}),this.showProgressBar=!1})}AddNewProduct(t){t.userIdentifiquer=this.eventService.getToken(),t.supplier=null==this.actualSupplier?"0":this.actualSupplier,this.productService.AddNewProduct(t).subscribe(n=>{n.data?(this.GetProductsByWareHouse(),this.messageService.add({severity:"success",summary:"Success",detail:"El producto "+t.name+" ha sido guardado con Exito",life:3e3}),this.productDialog=!1,this.product={}):this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1},n=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error Grave al tratar de guardar los datos",life:3e3})})}findIndexById(t){let n=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===t){n=o;break}return n}onGlobalFilter(t,n){t.filterGlobal(n.target.value,"contains")}filter(t){this.categoryActual=t}MaterializeProductToDelete(t){var n=new u;n.id=t.productId,n.name=t.productName,n.description=t.description,this.productToDeleteList.push(n)}addProductInventary(t){this.addInventaryPrice=0,this.addInventaryQuantity=0,this.product=Object.assign({},t),this.showAddInventaryDialog=!0}addAjustInventaryProduct(t){this.addAjustQuantity=0,this.product=Object.assign({},t),this.showAjustInventaryDialog=!0}GetCategoriesByEnterprise(){this.productService.GetCategoriesByEnterprise(this.eventService.getToken()).subscribe(t=>{t.data?this.categories=t.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterCategory(t){this.categoryActual=t}GetUnitMeasurementByEnterprise(){this.productService.GetUnitMeasurementByEnterprise(this.eventService.getToken()).subscribe(t=>{t.data?this.unitMeasurement=t.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterUM(t){this.unitMeasurementActual=t}GetSupplierValuesByEnterprise(){this.productService.GetSupplierValues(this.eventService.getToken()).subscribe(t=>{t.data?this.suppliers=t.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3})})}filterCostumer(t){this.actualSupplier=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.M),e.Y36(m.P),e.Y36(h.ez))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e._Bn([h.ez])],decls:34,vars:40,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","productId",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","rowHover","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Detalles del Producto",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Agregar Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["COLOR","red"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Eliminar","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["pButton","","pRipple","","label","Exportar","icon","pi pi-upload",1,"p-button-help",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],["pSortableColumn","productId"],["field","productId"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","discount"],["field","discount"],["pSortableColumn","productPrice"],["field","productPrice"],["pSortableColumn","taxName"],["field","taxName"],["pSortableColumn","localizationName"],["field","localizationName"],["pSortableColumn","categoryName"],["field","categoryName"],["pSortableColumn","unitMeasurement"],["field","unitMeasurement"],["pSortableColumn","rating"],["field","rating"],["pSortableColumn","actualInventary"],["field","actualInventary"],["pSortableColumn","inventoryStatus"],["field","inventoryStatus"],[3,"value"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],["src","http://cajasgraf.com.ar/productos/images/df.jpg","width","100",1,"shadow-4",3,"alt"],[2,"width","14%","min-width","8rem"],[3,"ngModel","readonly","cancel"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["src","https://w7.pngwing.com/pngs/685/904/png-transparent-fizzy-drinks-coca-cola-diet-coke-rc-cola-coca-cola-food-cola-soft-drink.png","width","150","class","mt-0 mx-auto mb-5 block shadow-2",3,"alt",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","quantity"],[1,"field"],["for","description"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"mb-3"],[1,"field-radiobutton","col-6"],["id","category1","name","category","value","1",3,"ngModel","disabled","ngModelChange"],["for","category1"],["id","category2","name","category","value","2",3,"ngModel","ngModelChange"],["for","category2"],["id","category3","name","category","value","4",3,"ngModel","ngModelChange"],["for","category3"],["id","category4","name","category","value","5",3,"ngModel","ngModelChange"],["for","category4"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["id","quantity",3,"ngModel","ngModelChange"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["src","https://w7.pngwing.com/pngs/685/904/png-transparent-fizzy-drinks-coca-cola-diet-coke-rc-cola-coca-cola-food-cola-soft-drink.png","width","150",1,"mt-0","mx-auto","mb-5","block","shadow-2",3,"alt"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],["for","ProductName"],["disabled","true","type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["disabled","true","id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],["for","productPrice"],["id","price",3,"ngModel","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,D,2,0,"div",0),e.YNc(1,E,4,0,"div",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",4),e.YNc(7,B,3,1,"ng-template",5),e.YNc(8,H,1,0,"ng-template",6),e.qZA(),e.TgZ(9,"p-table",7,8),e.NdJ("selectionChange",function(i){return n.selectedProducts=i}),e.YNc(11,G,6,0,"ng-template",9),e.YNc(12,R,40,0,"ng-template",10),e.YNc(13,Q,58,23,"ng-template",11),e.qZA()(),e.TgZ(14,"p-dialog",12),e.NdJ("visibleChange",function(i){return n.productDialog=i}),e.YNc(15,z,62,26,"ng-template",13),e.YNc(16,j,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(i){return n.showAddInventaryDialog=i}),e.YNc(18,O,20,9,"ng-template",13),e.YNc(19,V,2,0,"ng-template",14),e.qZA(),e.TgZ(20,"p-dialog",15),e.NdJ("visibleChange",function(i){return n.showAjustInventaryDialog=i}),e.YNc(21,$,20,9,"ng-template",13),e.YNc(22,X,2,0,"ng-template",14),e.qZA(),e.TgZ(23,"p-dialog",16),e.NdJ("visibleChange",function(i){return n.deleteProductDialog=i}),e.TgZ(24,"div",17),e._UZ(25,"i",18),e.YNc(26,ee,5,1,"span",0),e.qZA(),e.YNc(27,te,2,0,"ng-template",14),e.qZA(),e.TgZ(28,"p-dialog",16),e.NdJ("visibleChange",function(i){return n.deleteProductsDialog=i}),e.TgZ(29,"div",17),e._UZ(30,"i",18),e.TgZ(31,"span"),e._uU(32,"Esta seguro que quiere eliminar estos productos seleccionados?"),e.qZA()(),e.YNc(33,oe,2,0,"ng-template",14),e.qZA()()()),2&t&&(e.Q6J("ngIf",n.showProgressBar),e.xp6(1),e.Q6J("ngIf",!n.hasEnterprise||!n.hasWareHouse),e.xp6(8),e.Q6J("value",n.products)("columns",n.cols)("rows",10)("globalFilterFields",e.DdM(33,ne))("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(34,re))("showCurrentPageReport",!0)("selection",n.selectedProducts)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(35,ie)),e.Q6J("visible",n.productDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(36,T)),e.Q6J("visible",n.showAddInventaryDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(37,T)),e.Q6J("visible",n.showAjustInventaryDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(38,T)),e.Q6J("visible",n.deleteProductDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",n.product),e.xp6(2),e.Akn(e.DdM(39,T)),e.Q6J("visible",n.deleteProductsDialog)("modal",!0))},dependencies:[d.mk,d.O5,p.iA,h.jx,p.lQ,p.fz,p.UA,p.Mo,c.Hq,f.Fj,f.JJ,f.Q7,f.On,P.H,b.FN,M.o,y.iG,A.o,N.g,q.EU,I.Rn,w.V,U.R,J.t,d.H9],encapsulation:2}),r})(),ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:se}]),_.Bz]}),r})();var de=s(8205),ue=s(4036),ce=s(4891);let le=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,ae,p.U$,de.O,f.u5,c.hJ,P.T,b.EV,M.V,y.Xt,A.j,N.A,ue.kW,q.cc,I.L$,w.S,ce.E]}),r})()},3407:(S,C,s)=>{s.d(C,{A:()=>x,g:()=>h});var d=s(5e3),p=s(9808),_=s(3075);let h=(()=>{class u{constructor(e,l,m,c){this.el=e,this.ngModel=l,this.control=m,this.cd=c,this.onResize=new d.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return u.\u0275fac=function(e){return new(e||u)(d.Y36(d.SBq),d.Y36(_.On,8),d.Y36(_.a5,8),d.Y36(d.sBO))},u.\u0275dir=d.lG2({type:u,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,l){1&e&&d.NdJ("input",function(c){return l.onInput(c)})("focus",function(c){return l.onFocus(c)})("blur",function(c){return l.onBlur(c)}),2&e&&d.ekj("p-filled",l.filled)("p-inputtextarea-resizable",l.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),u})(),x=(()=>{class u{}return u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=d.oAB({type:u}),u.\u0275inj=d.cJS({imports:[p.ez]}),u})()}}]);
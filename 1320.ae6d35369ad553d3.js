"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[1320],{1320:(y,h,r)=>{r.r(h),r.d(h,{ManualReceivableModule:()=>Q});var o=r(6895),m=r(9197);class M{constructor(d){this.cliente="",this.empresa="",this.tipoMovimiento="",this.numeroReferencia="",this.cantidad=null,this.comentarios="",this.userId="",Object.assign(this,d)}}var g=r(805),e=r(4650),b=r(7747),f=r(5384),p=r(4006),C=r(5593),x=r(2453),l=r(99),u=r(1383),s=r(1493),_=r(7116);function Z(n,d){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function T(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createNew())}),e.qZA()()}}function A(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"span",18)(2,"input",19,20),e.NdJ("input",function(a){e.CHM(t);const c=e.oxw(),v=e.MAs(8);return e.KtG(c.onGlobalFilter(v,a))}),e.qZA()()()}}function w(n,d){1&n&&(e.TgZ(0,"tr")(1,"th")(2,"div",21),e._uU(3," Empresa "),e._UZ(4,"p-columnFilter",22),e.qZA()(),e.TgZ(5,"th")(6,"div",21),e._uU(7," Cliente "),e._UZ(8,"p-columnFilter",23),e.qZA()(),e.TgZ(9,"th")(10,"div",21),e._uU(11," N\xfamero de Referencia "),e._UZ(12,"p-columnFilter",24),e.qZA()(),e.TgZ(13,"th")(14,"div",21),e._uU(15," Cantidad "),e._UZ(16,"p-columnFilter",25),e.qZA()(),e.TgZ(17,"th")(18,"div",21),e._uU(19," Comentarios "),e._UZ(20,"p-columnFilter",26),e.qZA()(),e.TgZ(21,"th",27),e._uU(22," Acciones "),e.qZA()())}function R(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",28)(12,"p-button",29),e.NdJ("click",function(){const c=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.deleteMovement(c))}),e.qZA()()()}if(2&n){const t=d.$implicit;e.xp6(2),e.Oqu(t.empresa),e.xp6(2),e.Oqu(t.cliente),e.xp6(2),e.Oqu(t.numeroReferencia),e.xp6(2),e.Oqu(t.cantidad),e.xp6(2),e.Oqu(t.comentarios)}}function O(n,d){1&n&&(e.TgZ(0,"tr")(1,"td",30),e._uU(2,"No se encontraron datos."),e.qZA()())}function N(n,d){1&n&&(e.TgZ(0,"tr")(1,"td",30),e._uU(2,"Cargando datos, por favor espera..."),e.qZA()())}function U(n,d){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function J(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",59),e.NdJ("click",function(){const c=e.CHM(t).$implicit,v=e.oxw(3);return e.KtG(v.selectCliente(c))}),e._uU(1),e.qZA()}if(2&n){const t=d.$implicit;e.xp6(1),e.hij(" ",t.viewValue," ")}}function E(n,d){if(1&n&&(e.TgZ(0,"div",57),e.YNc(1,J,2,1,"div",58),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.filteredClientes)}}function P(n,d){if(1&n&&(e.TgZ(0,"option",60),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}function F(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.YNc(1,U,2,0,"div",0),e.TgZ(2,"h2"),e._uU(3,"Crear Movimiento Manual"),e.qZA(),e.TgZ(4,"form",32),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.guardar())}),e.TgZ(5,"div",33)(6,"div",34)(7,"label",35),e._uU(8,"Cliente:"),e.qZA(),e.TgZ(9,"div",36)(10,"input",37),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.clienteNombre=a)})("input",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.filterClientes(a))}),e.qZA(),e.YNc(11,E,2,1,"div",38),e.qZA()(),e.TgZ(12,"div",34)(13,"label",39),e._uU(14,"Empresa:"),e.qZA(),e.TgZ(15,"select",40),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.empresa=a)}),e.TgZ(16,"option",41),e._uU(17,"Seleccione una empresa"),e.qZA(),e.YNc(18,P,2,2,"option",42),e.qZA()()(),e.TgZ(19,"div",33)(20,"div",34)(21,"label",43),e._uU(22,"Tipo de Movimiento:"),e.qZA(),e.TgZ(23,"select",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.tipoMovimiento=a)}),e.TgZ(24,"option",41),e._uU(25,"Seleccione el tipo"),e.qZA(),e.TgZ(26,"option",45),e._uU(27,"Factura al Cr\xe9dito"),e.qZA(),e.TgZ(28,"option",46),e._uU(29,"Cobro"),e.qZA()()(),e.TgZ(30,"div",34)(31,"label",47),e._uU(32,"N\xfamero de Referencia:"),e.qZA(),e.TgZ(33,"input",48),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.numeroReferencia=a)}),e.qZA()()(),e.TgZ(34,"div",33)(35,"div",34)(36,"label",49),e._uU(37,"Fecha:"),e.qZA(),e.TgZ(38,"input",50),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.date=a)}),e.qZA()(),e.TgZ(39,"div",34)(40,"label",51),e._uU(41,"Cantidad:"),e.qZA(),e.TgZ(42,"input",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.cantidad=a)}),e.qZA()()(),e.TgZ(43,"div",53)(44,"label",54),e._uU(45,"Comentarios:"),e.qZA(),e.TgZ(46,"textarea",55),e.NdJ("ngModelChange",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.formData.comentarios=a)}),e.qZA()(),e.TgZ(47,"div",53)(48,"button",56),e._uU(49,"Guardar"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(9),e.Q6J("ngModel",t.clienteNombre),e.xp6(1),e.Q6J("ngIf",t.showClienteOptions),e.xp6(4),e.Q6J("ngModel",t.formData.empresa),e.xp6(3),e.Q6J("ngForOf",t.empresas),e.xp6(5),e.Q6J("ngModel",t.formData.tipoMovimiento),e.xp6(10),e.Q6J("ngModel",t.formData.numeroReferencia),e.xp6(5),e.Q6J("ngModel",t.formData.date),e.xp6(4),e.Q6J("ngModel",t.formData.cantidad),e.xp6(4),e.Q6J("ngModel",t.formData.comentarios)}}const q=function(){return["empresa","cliente","numeroReferencia","comentarios"]},D=function(){return{width:"1050px"}};let S=(()=>{class n{constructor(t,i,a){this.productService=t,this.eventService=i,this.messageService=a,this.clientes=[],this.empresas=[],this.filteredClientes=[],this.showClienteOptions=!1,this.clienteNombre="",this.loading=!1,this.formData=new M,this.manualMoventList=[],this.loading=!0,this.GetCostumerValuesByEnterprise(),this.GetWareHouseByRole(),this.getManualMovement()}filterClientes(t){const i=t.target.value.toLowerCase();this.filteredClientes=this.clientes.filter(a=>a.viewValue.toLowerCase().includes(i)),this.showClienteOptions=!0}selectCliente(t){this.formData.cliente=t.value,this.clienteNombre=t.viewValue,this.showClienteOptions=!1}guardar(){this.loading=!0,this.formData.userId=this.eventService.getToken(),this.productService.AddManualMovent(this.formData).subscribe(t=>{t.data?(this.showNewmovement=!1,this.formData=new M,this.messageService.add({severity:"success",summary:"Success",detail:t.data,life:3e3}),this.clienteNombre="",this.getManualMovement()):(this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.loading=!1)},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t,life:3e3}),this.loading=!1})}getManualMovement(){this.loading=!0,this.productService.GetManualMovent(this.eventService.getToken()).subscribe(t=>{t.data?(this.manualMoventList=t.data,console.log(this.manualMoventList)):this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.loading=!1},t=>{this.messageService.add({severity:"error",summary:"Error",detail:t,life:3e3}),this.loading=!1})}onGlobalFilter(t,i){t.filterGlobal(i.target.value,"contains")}GetWareHouseByRole(){this.productService.GetWareHouseByRoleValuesAndEnterprise(this.eventService.getToken()).subscribe(t=>{t.data&&(this.empresas=t.data)})}GetCostumerValuesByEnterprise(){this.productService.GetCostumerValues(this.eventService.getToken()).subscribe(t=>{t.data?this.clientes=t.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene clientes creados creados",life:3e3})})}deleteMovement(t){this.loading=!0,this.productService.DeleteManualMovent(this.eventService.getToken(),t.id).subscribe(i=>{i.data?this.getManualMovement():(this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3}),this.loading=!1)},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i,life:3e3}),this.loading=!1})}createNew(){this.showNewmovement=!0}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(b.M),e.Y36(f.P),e.Y36(g.ez))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-manual-receivable"]],features:[e._Bn([g.ez])],decls:16,vars:13,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["dataKey","numeroReferencia","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],[1,"my-2"],["pButton","","pRipple","","label","Agregar","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],[1,"p-input-icon-left","mb-2"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","empresa","display","menu","placeholder","Buscar por Empresa"],["type","text","field","cliente","display","menu","placeholder","Buscar por Cliente"],["type","text","field","numeroReferencia","display","menu","placeholder","Buscar por N\xfamero de Referencia"],["type","numeric","field","cantidad","display","menu","placeholder","Buscar por Cantidad"],["type","text","field","comentarios","display","menu","placeholder","Buscar por Comentarios"],[2,"width","12rem"],[2,"min-width","12rem"],["icon","pi pi-trash","styleClass","p-button-rounded p-button-danger p-button-text",3,"click"],["colspan","6"],[1,"container"],["autocomplete","off",3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","cliente"],[1,"custom-select"],["type","text","id","cliente","name","clienteNombre","placeholder","Buscar y seleccionar cliente","required","","autocomplete","off",3,"ngModel","ngModelChange","input"],["class","select-options",4,"ngIf"],["for","empresa"],["id","empresa","name","empresa","required","",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoMovimiento"],["id","tipoMovimiento","name","tipoMovimiento","required","",3,"ngModel","ngModelChange"],["value","factura_al_credito"],["value","cobro"],["for","numeroReferencia"],["type","text","id","numeroReferencia","name","numeroReferencia","required","","autocomplete","off",3,"ngModel","ngModelChange"],["for","date"],["type","date","id","fecha","name","date","autocomplete","off",3,"ngModel","ngModelChange"],["for","cantidad"],["type","number","id","cantidad","name","cantidad","required","","autocomplete","off",3,"ngModel","ngModelChange"],[1,"form-group","full-width"],["for","comentarios"],["id","comentarios","name","comentarios","rows","4",3,"ngModel","ngModelChange"],["type","submit"],[1,"select-options"],["class","option",3,"click",4,"ngFor","ngForOf"],[1,"option",3,"click"],[3,"value"]],template:function(i,a){1&i&&(e.YNc(0,Z,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"p-toast"),e.TgZ(5,"p-toolbar",4),e.YNc(6,T,2,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6,7),e.YNc(9,A,4,0,"ng-template",8),e.YNc(10,w,23,0,"ng-template",9),e.YNc(11,R,13,5,"ng-template",10),e.YNc(12,O,3,0,"ng-template",11),e.YNc(13,N,3,0,"ng-template",12),e.qZA()()()(),e.TgZ(14,"p-dialog",13),e.NdJ("visibleChange",function(v){return a.showNewmovement=v}),e.YNc(15,F,50,10,"ng-template",14),e.qZA()),2&i&&(e.Q6J("ngIf",a.loading),e.xp6(7),e.Q6J("value",a.manualMoventList)("rows",10)("loading",a.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(11,q)),e.xp6(7),e.Akn(e.DdM(12,D)),e.Q6J("visible",a.showNewmovement)("modal",!0))},dependencies:[o.sg,o.O5,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.JL,p.Q7,p.On,p.F,C.Hq,C.zx,x.FN,g.jx,l.iA,l.xl,u.o,s.V,_.R],styles:["[_nghost-%COMP%]{--primary-color: #023b78;--secondary-color: #1565bb;--background-color: #f0f8ff;--text-color: #333;--border-color: #ccc;--hover-color: #e9ecef;--input-background: #ffffff;font-family:Arial,sans-serif;color:var(--text-color);padding:20px}.container[_ngcontent-%COMP%]{background-color:var(--background-color);border-radius:8px;padding:30px;max-width:800px;margin:0 auto;box-shadow:0 4px 6px #0000001a}h2[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:30px;text-align:center;font-size:24px}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{flex:0 0 48%}.full-width[_ngcontent-%COMP%]{flex:0 0 100%}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--secondary-color);font-weight:700}select[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid var(--border-color);border-radius:4px;background-color:var(--input-background);font-size:16px;transition:border-color .3s,box-shadow .3s}select[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover{background-color:var(--hover-color)}select[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--secondary-color);box-shadow:0 0 0 2px #1565bb40}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.custom-select[_ngcontent-%COMP%]{position:relative}.select-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background-color:var(--input-background);border:1px solid var(--border-color);border-top:none;border-radius:0 0 4px 4px;max-height:200px;overflow-y:auto;z-index:10}.option[_ngcontent-%COMP%]{padding:10px;cursor:pointer;transition:background-color .2s}.option[_ngcontent-%COMP%]:hover{background-color:var(--hover-color)}button[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer;font-size:18px;transition:background-color .3s;width:100%;margin-top:20px}button[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color)}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column}.form-group[_ngcontent-%COMP%]{flex:0 0 100%;margin-bottom:20px}}"]})}return n})(),B=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"",component:S}]),m.Bz]})}return n})();var G=r(9585),k=r(4891);let Q=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[o.ez,B,p.u5,C.hJ,G.xD,p.u5,x.EV,l.U$,u.V,s.S,k.E]})}return n})()},7116:(y,h,r)=>{r.d(h,{R:()=>M});var o=r(4650),m=r(3162);let M=(()=>{class g{constructor(){}static#e=this.\u0275fac=function(f){return new(f||g)};static#t=this.\u0275cmp=o.Xpm({type:g,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(f,p){1&f&&o._UZ(0,"mat-progress-bar",0)},dependencies:[m.pW],encapsulation:2})}return g})()},1383:(y,h,r)=>{r.d(h,{V:()=>x,o:()=>C});var o=r(4650),m=r(6895),M=r(805);function g(l,u){1&l&&o.GkF(0)}function e(l,u){if(1&l&&(o.TgZ(0,"div",3),o.YNc(1,g,1,0,"ng-container",4),o.qZA()),2&l){const s=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",s.leftTemplate)}}function b(l,u){1&l&&o.GkF(0)}function f(l,u){if(1&l&&(o.TgZ(0,"div",5),o.YNc(1,b,1,0,"ng-container",4),o.qZA()),2&l){const s=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",s.rightTemplate)}}const p=["*"];let C=(()=>{class l{constructor(s){this.el=s}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(s=>{switch(s.getType()){case"left":this.leftTemplate=s.template;break;case"right":this.rightTemplate=s.template}})}}return l.\u0275fac=function(s){return new(s||l)(o.Y36(o.SBq))},l.\u0275cmp=o.Xpm({type:l,selectors:[["p-toolbar"]],contentQueries:function(s,_,Z){if(1&s&&o.Suo(Z,M.jx,4),2&s){let T;o.iGM(T=o.CRH())&&(_.templates=T)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:p,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(s,_){1&s&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.YNc(2,e,2,1,"div",1),o.YNc(3,f,2,1,"div",2),o.qZA()),2&s&&(o.Tol(_.styleClass),o.Q6J("ngClass","p-toolbar p-component")("ngStyle",_.style),o.xp6(2),o.Q6J("ngIf",_.leftTemplate),o.xp6(1),o.Q6J("ngIf",_.rightTemplate))},dependencies:[m.mk,m.O5,m.tP,m.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),l})(),x=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[m.ez]}),l})()}}]);
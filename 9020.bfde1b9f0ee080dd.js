"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9020],{8258:(T,d,o)=>{o.r(d),o.d(d,{XReportModule:()=>R});var u=o(9808),p=o(7449),c=o(9783),e=o(5e3),f=o(7747),h=o(5384),s=o(3075),m=o(845),g=o(5315);const y=function(){return{standalone:!0}};function x(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"p",12),e._uU(3),e.qZA(),e.TgZ(4,"div",13)(5,"input",14),e.NdJ("ngModelChange",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.change())})("ngModelChange",function(a){const P=e.CHM(n).$implicit;return e.KtG(P.total=a)}),e.qZA()()()()}if(2&t){const n=i.$implicit;e.xp6(3),e.Oqu(n.name),e.xp6(2),e.Q6J("ngModelOptions",e.DdM(3,y))("ngModel",n.total)}}function b(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.GenerateXReport=!1)}),e.qZA(),e.TgZ(1,"button",16),e.NdJ("click",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.confirmGenerateXReport())}),e.qZA()}}const C=function(){return{width:"450px"}};let v=(()=>{class t{constructor(n,r,a,l){this.router=n,this.productService=r,this.messageService=a,this.eventService=l,this.PayTypes=[],this.GenerateXReport=!1,this.closeReport={userId:"",commentsBySales:"",commentsByAccounting:"",details:[]}}ngOnInit(){this.GetPayTypesValuesByEnterprise(),this.closeReport.userId=this.eventService.getToken()}change(){}handleButtonClick(){this.GenerateXReport=!0}confirmGenerateXReport(){this.GenerateXReport=!1,this.addDetail()}addDetail(){this.PayTypes.forEach(n=>{this.closeReport.details.push({type:1,amount:n.total,name:n.name})}),this.save()}save(){this.productService.AddXReport(this.closeReport).subscribe(n=>{this.messageService.add(n.data?{severity:"success",summary:"Success",detail:"Reporte cerrado exitosamente",life:3e3}:{severity:"error",summary:"Error",detail:"No se pudo cerrar el reporte",life:3e3})})}GetPayTypesValuesByEnterprise(){this.productService.GetPayTypesValues(this.eventService.getToken()).subscribe(n=>{n.data?(this.PayTypes=n.data,console.log(this.PayTypes)):this.messageService.add({severity:"error",summary:"Error",detail:"No tiene tipos de pago creados",life:3e3})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.F0),e.Y36(f.M),e.Y36(c.ez),e.Y36(h.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([c.ez])],decls:19,vars:7,consts:[[1,"container"],[1,"title"],[4,"ngFor","ngForOf"],[1,"form-group"],["for","commentsBySales"],["id","commentsBySales","placeholder","Comentarios adicionales...",1,"form-control","textarea-styleNewPay",3,"ngModel","ngModelChange"],[1,"styled-button",3,"click"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["pTemplate","footer"],[1,"row","align-items-center","payment-row"],[1,"col-12","payment-name"],[1,"col-6"],["min","0","type","number",1,"input-styleNewPay","form-control",3,"ngModelOptions","ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-text",3,"click"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Cierre X"),e.qZA(),e.YNc(3,x,6,4,"div",2),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Comentarios"),e.qZA(),e.TgZ(7,"textarea",5),e.NdJ("ngModelChange",function(l){return r.closeReport.commentsBySales=l}),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return r.handleButtonClick()}),e._uU(9,"Generar Cierre"),e.qZA()(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(l){return r.GenerateXReport=l}),e.TgZ(11,"div",8),e._UZ(12,"i",9),e.TgZ(13,"span")(14,"b"),e._uU(15,"Esta seguro que desea generar un reporte X?"),e.qZA(),e._UZ(16,"br"),e._uU(17,"Esta acci\xf3n bloqueara su talonario de facturas hasta que su administrador apruebe su reporte"),e.qZA()(),e.YNc(18,b,2,0,"ng-template",10),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngForOf",r.PayTypes),e.xp6(4),e.Q6J("ngModel",r.closeReport.commentsBySales),e.xp6(3),e.Akn(e.DdM(6,C)),e.Q6J("visible",r.GenerateXReport)("modal",!0))},dependencies:[u.sg,s.Fj,s.wV,s.JJ,s.qQ,s.On,m.Hq,g.V,c.jx],styles:[".container[_ngcontent-%COMP%] {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 8px;\n}\n\n.title[_ngcontent-%COMP%] {\n  font-size: 1.5em;\n  font-weight: 700;\n  color: #2c3e50;\n  text-align: center;\n  margin-bottom: 5px;\n}\n\n.payment-row[_ngcontent-%COMP%] {\n  background-color: #f5f7fa;\n  border: 1px solid #dce1e7;\n  border-radius: 8px;\n  padding: 10px;\n  margin-bottom: 10px;\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.payment-row[_ngcontent-%COMP%]:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 123, 255, 0.5);\n}\n\n.payment-name[_ngcontent-%COMP%] {\n  font-size: 1.2em;\n  font-weight: 600;\n  color: #2c3e50;\n  margin: 0;\n}\n\n.input-styleNewPay[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #b3c6e0;\n  border-radius: 4px;\n  color: #2c3e50;\n}\n\n.input-styleNewPay[_ngcontent-%COMP%]:focus, .textarea-styleNewPay[_ngcontent-%COMP%]:focus {\n  border-color: #007bff;  \n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.25);\n}\n\n.input-styleNewPay[_ngcontent-%COMP%]:hover, .textarea-styleNewPay[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 8px 16px rgba(0, 123, 255, 0.5);\n}\n\n.styled-button[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  padding: 10px;\n  background-color: #007bff;\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 600;\n  text-align: center;\n  cursor: pointer;\n  transition: background-color 0.3s ease, box-shadow 0.3s ease;\n  margin-top: 20px;\n}\n\n.styled-button[_ngcontent-%COMP%]:hover {\n  background-color: #0056b3;\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\n}\n\n.textarea-styleNewPay[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #b3c6e0;\n  border-radius: 4px;\n  color: #2c3e50;\n  resize: vertical;\n}\n\n.textarea-styleNewPay[_ngcontent-%COMP%]:focus {\n  border-color: #007bff;  \n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.25);\n}"]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild([{path:"",component:v}]),p.Bz]}),t})();var _=o(4891);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,M,s.u5,m.hJ,_.E,g.S]}),t})()}}]);
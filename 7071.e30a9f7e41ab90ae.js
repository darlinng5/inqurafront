"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7071],{7071:(M,h,o)=>{o.r(h),o.d(h,{CategoryModule:()=>J});var e=o(6895),p=o(9197),_=o(1546),u=o(805);class v{}var t=o(4650),d=o(7747),C=o(5384),s=o(99),g=o(2453),n=o(1383),m=o(5593),a=o(1493),f=o(1740),T=o(4006),D=o(7116);function I(r,y){1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function P(r,y){if(1&r){const i=t.EpF();t.TgZ(0,"div",17),t._UZ(1,"p-toast"),t.TgZ(2,"button",18),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.openNew())}),t.qZA()()}}function A(r,y){1&r&&(t.TgZ(0,"tr")(1,"th",19),t._uU(2,"Nombre "),t._UZ(3,"p-sortIcon",20),t.qZA(),t.TgZ(4,"th",21),t._uU(5,"Descripcion "),t._UZ(6,"p-sortIcon",22),t.qZA()())}function Z(r,y){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&r){const i=y.$implicit;t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.description)}}function O(r,y){1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function x(r,y){if(1&r){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.hideDialog())}),t.qZA(),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.saveCostumer())}),t.qZA()}}const N=function(){return{"min-width":"50rem"}},U=function(){return[10,25,50]},R=function(){return{width:"850px"}};let B=(()=>{class r{constructor(i,c,l,E){this.router=i,this.productService=c,this.eventService=l,this.messageService=E,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/category"}ngOnInit(){const c=this.eventService.getPermisionsException().split(",").map(l=>l.trim());this.redirect=c.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.GetCategory()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var i=new v;i.name=null==this.categoryName?"":this.categoryName,i.description=null==this.categoryDescription?"":this.categoryDescription,i.userIdentifiquer=this.eventService.getToken(),i.isCreating=this.isCreating,this.AddNewCategory(i)}AddNewCategory(i){this.showProgressBar=!0,this.productService.AddNewCategory(i).subscribe(c=>{c.data?(this.messageService.add({severity:"success",summary:"Success",detail:"La Categoria"+i.name+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetCategory()):this.messageService.add({severity:"error",summary:"Error",detail:c.message,life:3e3}),this.showProgressBar=!1})}GetCategory(){this.showProgressBar=!0,this.productService.GetCategories(this.eventService.getToken()).subscribe(i=>{i.data?this.category=i.data:this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3}),this.showProgressBar=!1})}static#t=this.\u0275fac=function(c){return new(c||r)(t.Y36(p.F0),t.Y36(d.M),t.Y36(C.P),t.Y36(u.ez))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],features:[t._Bn([u.ez])],decls:24,vars:17,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Descripcion",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","description",2,"width","20%"],["field","description"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(c,l){1&c&&(t.YNc(0,I,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),t.YNc(6,P,3,0,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6),t.YNc(8,A,7,0,"ng-template",7),t.YNc(9,Z,5,2,"ng-template",8),t.qZA()()()()(),t.TgZ(10,"p-dialog",9),t.NdJ("visibleChange",function(b){return l.showDialog=b}),t.YNc(11,O,2,0,"div",0),t.TgZ(12,"div",10)(13,"div",11)(14,"label",12),t._uU(15,"Nombre"),t.qZA(),t.TgZ(16,"div",13)(17,"input",14),t.NdJ("ngModelChange",function(b){return l.categoryName=b}),t.qZA()()(),t.TgZ(18,"div",11)(19,"label",12),t._uU(20,"Descripcion"),t.qZA(),t.TgZ(21,"div",13)(22,"input",15),t.NdJ("ngModelChange",function(b){return l.categoryDescription=b}),t.qZA()()()(),t.YNc(23,x,2,0,"ng-template",16),t.qZA()),2&c&&(t.Q6J("ngIf",l.showProgressBar),t.xp6(7),t.Q6J("value",l.category)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",t.DdM(14,N))("rowsPerPageOptions",t.DdM(15,U)),t.xp6(3),t.Akn(t.DdM(16,R)),t.Q6J("visible",l.showDialog)("modal",!0),t.xp6(1),t.Q6J("ngIf",l.showProgressBar),t.xp6(6),t.Q6J("ngModel",l.categoryName),t.xp6(5),t.Q6J("ngModel",l.categoryDescription))},dependencies:[e.O5,s.iA,u.jx,s.lQ,s.fz,g.FN,n.o,m.Hq,a.V,f.o,T.Fj,T.JJ,T.On,D.R],encapsulation:2})}return r})(),w=(()=>{class r{static#t=this.\u0275fac=function(c){return new(c||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild([{path:"",component:B,canActivate:[_.j]}]),p.Bz]})}return r})();var S=o(4891);let J=(()=>{class r{static#t=this.\u0275fac=function(c){return new(c||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[e.ez,w,s.U$,g.EV,n.V,m.hJ,a.S,f.j,T.u5,S.E]})}return r})()},2384:(M,h,o)=>{o.d(h,{b:()=>e});class e{}},7116:(M,h,o)=>{o.d(h,{R:()=>_});var e=o(4650),p=o(3162);let _=(()=>{class u{constructor(){}static#t=this.\u0275fac=function(d){return new(d||u)};static#e=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(d,C){1&d&&e._UZ(0,"mat-progress-bar",0)},dependencies:[p.pW],encapsulation:2})}return u})()},7083:(M,h,o)=>{o.d(h,{K:()=>t});var e=o(529),p=o(2340),_=o(2384),u=o(4650);const v=p.N.baseUrl;let t=(()=>{class d{constructor(s){this.http=s}addUser(s){return this.http.post(`${v}auth/register`,s)}login(s,g){var n=new _.b;return n.email=s,n.password=g,this.http.post(`${v}auth/login`,n)}GetUserPermisions(){const m={headers:new e.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",m)}static#t=this.\u0275fac=function(g){return new(g||d)(u.LFG(e.eN))};static#e=this.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},1546:(M,h,o)=>{o.d(h,{j:()=>v});var e=o(4650),p=o(5384),_=o(9197),u=o(7083);let v=(()=>{class t{constructor(C,s,g){this.eventService=C,this.router=s,this._userService=g,this.isTokenValid=!1}canActivate(C,s){const g=this.eventService.getToken();return(""==g||null==g||null==g)&&this.router.navigateByUrl("/auth/login"),!0}static#t=this.\u0275fac=function(s){return new(s||t)(e.LFG(p.P),e.LFG(_.F0),e.LFG(u.K))};static#e=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},1383:(M,h,o)=>{o.d(h,{V:()=>g,o:()=>s});var e=o(4650),p=o(6895),_=o(805);function u(n,m){1&n&&e.GkF(0)}function v(n,m){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,u,1,0,"ng-container",4),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",a.leftTemplate)}}function t(n,m){1&n&&e.GkF(0)}function d(n,m){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,t,1,0,"ng-container",4),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",a.rightTemplate)}}const C=["*"];let s=(()=>{class n{constructor(a){this.el=a}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(a=>{switch(a.getType()){case"left":this.leftTemplate=a.template;break;case"right":this.rightTemplate=a.template}})}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-toolbar"]],contentQueries:function(a,f,T){if(1&a&&e.Suo(T,_.jx,4),2&a){let D;e.iGM(D=e.CRH())&&(f.templates=D)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:C,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(a,f){1&a&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.YNc(2,v,2,1,"div",1),e.YNc(3,d,2,1,"div",2),e.qZA()),2&a&&(e.Tol(f.styleClass),e.Q6J("ngClass","p-toolbar p-component")("ngStyle",f.style),e.xp6(2),e.Q6J("ngIf",f.leftTemplate),e.xp6(1),e.Q6J("ngIf",f.rightTemplate))},dependencies:[p.mk,p.O5,p.tP,p.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),n})(),g=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez]}),n})()}}]);
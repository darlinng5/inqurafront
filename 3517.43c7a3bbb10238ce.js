"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[3517],{3517:(w,g,a)=>{a.r(g),a.d(g,{AccountReceivableModule:()=>D});var l=a(9808),d=a(7449),m=a(9783),u=a(574),e=a(5e3),R=a(7747),f=a(5384),p=a(845),v=a(6186),A=a(7773),y=a(6768);function C(o,s){if(1&o&&(e.TgZ(0,"tr",14)(1,"th",15),e._uU(2),e.qZA(),e.TgZ(3,"th",15),e._uU(4),e.qZA(),e.TgZ(5,"th",15),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"th",15),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.qZA(),e.TgZ(18,"th",15),e._uU(19),e.ALo(20,"currency"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.gM2(7,8,t.total,"L.","symbol","1.2-2")),e.xp6(3),e.Oqu(e.xi3(10,13,t.firstInvoice,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.gM2(13,16,t.maxAmountCredit,"L.","symbol","1.2-2")),e.xp6(3),e.Oqu(t.maxDayCredit),e.xp6(2),e.Oqu(t.dayCreditRest),e.xp6(2),e.Oqu(e.gM2(20,21,t.amoutCreditRest,"L.","symbol","1.2-2"))}}let Z=(()=>{class o{constructor(t,i,r,c){this.router=t,this.productService=i,this.messageService=r,this.eventService=c,this.loading=!1,this.InvoiceList=[],this.payReport=[],this.redirect=!1,this.AccessName="/pages/receivable",this.accountFilter="Receivable",this.accountReceivableReport=[],this.AccountFilterList=[]}ngOnInit(){const i=this.eventService.getPermisionsException().split(",").map(r=>r.trim());this.redirect=i.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.userSelected="",this.wareHouseSelectd="",this.AccountFilterList.push({value:"Receivable",viewValue:"Cuentas x Cobrar"}),this.AccountFilterList.push({value:"Payable",viewValue:"Cuentas x Pagar"}),this.GetUsersByRole(),this.GetWareHouseByRole()}load(){this.loading=!0,this.getAccountReceibableReport()}getAccountReceibableReport(){const t=this.eventService.getToken();this.productService.GetAccountReceivableReport(t,this.accountFilter).subscribe(i=>{console.log(i),i.data?(this.accountReceivableReport=i.data,console.log(this.accountReceivableReport)):this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3}),this.loading=!1},i=>{this.messageService.add({severity:"error",summary:"Error",detail:i.message,life:3e3}),this.loading=!1})}exportToExcel(){const i=[["Id","Cliente","Credito Actual","Factura Antigua","Maximo Credito Autorizado","Maximo Dias Autorizado","Dias Sobregirado","Monto Sobregirado"]];this.accountReceivableReport.forEach(n=>{i.push([n.id,n.name,n.total,n.firstInvoice,n.maxAmountCredit,n.maxDayCredit,n.dayCreditRest,n.amoutCreditRest])});const r=u.P6.aoa_to_sheet(i),c=u.P6.book_new();u.P6.book_append_sheet(c,r,"Detalle de CC");const b=[["Nombre de Pago","Tipo de Pago","Total"]];this.payReport.forEach(n=>{b.push([n.payName,n.payType,n.total])}),u.P6.aoa_to_sheet(b),u.NC(c,"DetalllesCC.xlsx")}filterUser(t){this.accountFilter=""==t||null==t?"":t}GetUsersByRole(){this.isLoading=!0,this.productService.GetUsersByRoleValues(this.eventService.getToken()).subscribe(t=>{t.data&&(this.usersDropDown=t.data,console.log(this.usersDropDown))})}filterWareHouse(t){this.wareHouseSelectd=t,console.log(this.wareHouseSelectd)}GetWareHouseByRole(){this.productService.GetWareHouseByRoleValues(this.eventService.getToken()).subscribe(t=>{t.data&&(this.wareHouseDropDown=t.data),this.isLoading=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.F0),e.Y36(R.M),e.Y36(m.ez),e.Y36(f.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e._Bn([m.ez])],decls:36,vars:6,consts:[["id","print-section"],[1,"grid"],[1,"col-12"],[1,"card"],[2,"display","flex","flex-wrap","wrap","justify-content","space-between"],[2,"flex","1","margin","5px"],["htmlFor","age1"],[3,"IsCreating","showFilter","DropDownDataSource","ValueSelectedChange"],["label","Search","icon","pi pi-search","iconPos","right",1,"space",2,"width","100%",3,"loading","onClick"],["id","PrintFull"],[2,"background-color","#7288a2","color","white"],["style","font-size: small;",4,"ngFor","ngForOf"],["printSectionId","PrintFull","ngxPrint","","pButton","","pRipple","","label","imprimir","icon","pi pi-print",1,"p-button-help"],["pButton","","pRipple","","label","Exportar a Excel","icon","pi pi-cloud-download",1,"p-button-success","mr-2",2,"margin-left","10px",3,"disabled","click"],[2,"font-size","small"],["align","left"]],template:function(t,i){1&t&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8,"Tipo"),e.qZA(),e.TgZ(9,"app-drop-down",7),e.NdJ("ValueSelectedChange",function(c){return i.filterUser(c)}),e.qZA()(),e.TgZ(10,"div",5)(11,"p-button",8),e.NdJ("onClick",function(){return i.load()}),e.qZA()()(),e._UZ(12,"p")(13,"p"),e.TgZ(14,"div",9)(15,"table")(16,"tr",10)(17,"th"),e._uU(18,"Id"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Cliente"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Credito Actual"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Factura Antigua"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Maximo Credito Autorizado"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Maximo Dias Autorizado"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Dias Sobregirado"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Monto Sobregirado"),e.qZA()(),e.YNc(33,C,21,26,"tr",11),e.qZA()()()()()(),e._UZ(34,"button",12),e.TgZ(35,"button",13),e.NdJ("click",function(){return i.exportToExcel()}),e.qZA()),2&t&&(e.xp6(9),e.Q6J("IsCreating",!1)("showFilter",!1)("DropDownDataSource",i.AccountFilterList),e.xp6(2),e.Q6J("loading",i.loading),e.xp6(22),e.Q6J("ngForOf",i.accountReceivableReport),e.xp6(2),e.Q6J("disabled",!i.accountReceivableReport||0===i.accountReceivableReport.length))},dependencies:[l.sg,p.Hq,p.zx,v.I,A.FN,y.t,l.H9,l.uU],styles:["table[_ngcontent-%COMP%] {\n    border-collapse: collapse;\n    width: 100%;\n  }\n  \n  tr[_ngcontent-%COMP%] {\n    border-bottom: 1px solid #ddd;\n  }\n  .space[_ngcontent-%COMP%] {\nwidth: 4px;\nheight: auto;\nmargin-left: 20px;\n}"]}),o})(),x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild([{path:"",component:Z}]),d.Bz]}),o})();var T=a(3075),S=a(5117),U=a(5652),F=a(4036),M=a(4891);let D=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,x,T.u5,p.hJ,l.ez,S.L,U._8,v.K,A.EV,F.kW,M.E]}),o})()}}]);
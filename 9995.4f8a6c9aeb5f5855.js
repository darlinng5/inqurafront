"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9995],{6768:(U,u,n)=>{n.d(u,{t:()=>d});var o=n(4650),p=n(7747),g=n(5384),h=n(4006),m=n(2210);let d=(()=>{class l{constructor(r,t){this.commonService=r,this.eventService=t,this.ValueSelectedChange=new o.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#t=this.\u0275fac=function(t){return new(t||l)(o.Y36(p.M),o.Y36(g.P))};static#n=this.\u0275cmp=o.Xpm({type:l,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(t,c){1&t&&(o.TgZ(0,"p-dropdown",0),o.NdJ("onClick",function(){return c.selectedValue()})("onChange",function(){return c.changeValue()})("ngModelChange",function(A){return c.selectedData=A}),o.qZA()),2&t&&o.Q6J("filter",c.Filter)("options",c.data)("ngModel",c.selectedData)},dependencies:[h.JJ,h.On,m.Lt],encapsulation:2})}return l})()},2384:(U,u,n)=>{n.d(u,{b:()=>o});class o{}},9995:(U,u,n)=>{n.r(u),n.d(u,{KardexDemoModule:()=>W});var o=n(6895),p=n(5593),g=n(9197),h=n(1546),m=n(5861),d=n(805),l=n(6166),T=n(4159),r=n.n(T),t=n(4650),c=n(7747),C=n(5384),A=n(6768),E=n(2453),y=n(1383),b=n(5108);function V(a,M){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"app-drop-down",16),t.NdJ("ValueSelectedChange",function(i){t.CHM(e);const _=t.oxw();return t.KtG(_.filterProduct(i))}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("showFilter",!0)("IsCreating",!0)("DropDownDataSource",e.products)}}function w(a,M){1&a&&(t.TgZ(0,"div",17)(1,"h5"),t._uU(2,"Cargando los productos, espere...."),t.qZA()())}function K(a,M){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()()),2&a){const e=M.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.fecha),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Oqu(e.costoUnitario),t.xp6(2),t.Oqu(e.entradaCantidad),t.xp6(2),t.Oqu(e.entradaValor),t.xp6(2),t.Oqu(e.salidaCantidad),t.xp6(2),t.Oqu(e.salidaValor),t.xp6(2),t.Oqu(e.balanceCantidad),t.xp6(2),t.Oqu(e.balanceValor)}}let z=(()=>{class a{constructor(e,s,i,_){this.router=e,this.productService=s,this.eventService=i,this.messageService=_,this.kardex=[],this.loading=!1,this.isLoading=!1,this.redirect=!1,this.AccessName="/pages/kardex",this.getProductValues()}ngOnInit(){const s=this.eventService.getPermisionsException().split(",").map(i=>i.trim());this.redirect=s.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized")}load(){this.producId=null==this.producId?0:this.producId,this.GetKardex()}filterProduct(e){this.producId=e}getProductValues(){this.loading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(e=>{e.data&&(this.products=e.data),this.loading=!1})}printReport(){var e=this;return(0,m.Z)(function*(){e.isLoading=!0;const s=document.getElementById("print-section"),i=new l.ZP("p","pt","a4"),_={background:"white",scale:3},N=i.internal.pageSize.getWidth(),G=i.internal.pageSize.getHeight(),f={top:15,bottom:15,left:15,right:15},S=N-f.left-f.right,x=G-f.top-f.bottom;function Y(v,F,Z){F.addImage(v,"PNG",f.left,Z,S,0,void 0,"FAST")}try{const v=yield r()(s,_),Z=(v.toDataURL("image/png"),v.width),D=Z/S;let O=v.height/D,L=f.top,R=1;for(;O>0;){const I=Math.min(x,O),P=document.createElement("canvas"),Q=P.getContext("2d");P.width=Z,P.height=I*D,Q.drawImage(v,0,(R-1)*x*D,Z,I*D,0,0,Z,I*D),Y(P.toDataURL("image/png"),i,L),O-=x,L=f.top,O>0&&(i.addPage(),R++)}const k=i.output("blob"),H=URL.createObjectURL(k);e.isLoading=!1,window.open(H,"_blank")}catch(v){console.error("Error generando PDF:",v),e.isLoading=!1}})()}GetKardex(){this.isLoading=!0,this.productService.GettKardexReport(this.producId,this.eventService.getToken()).subscribe(e=>{e.data?(this.kardex=e.data.kardex,this.code=e.data.encabezado.code,this.product=e.data.encabezado.product,this.supplier=e.data.encabezado.proveedor,this.localization=e.data.encabezado.ubicacion):this.messageService.add({severity:"error",summary:"error",detail:e.message,life:6e3}),this.isLoading=!1})}static#t=this.\u0275fac=function(s){return new(s||a)(t.Y36(g.F0),t.Y36(c.M),t.Y36(C.P),t.Y36(d.ez))};static#n=this.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],features:[t._Bn([d.ez])],decls:65,vars:8,consts:[["id","print-section"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"header"],[4,"ngIf"],["class","loading",4,"ngIf"],["label","Search","icon","pi pi-search","iconPos","right",1,"button-space",3,"loading","onClick"],[1,"product-info"],["colspan","4"],["colspan","2"],[4,"ngFor","ngForOf"],["styleClass","mb-4"],[1,"my-2"],["align","left"],["pButton","","label","Imprimir","icon","pi pi-print",1,"p-button-outlined","mb-2",3,"click"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],[1,"loading"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p-toast"),t.TgZ(5,"div",4),t.YNc(6,V,2,3,"div",5),t.YNc(7,w,3,0,"div",6),t.TgZ(8,"p-button",7),t.NdJ("onClick",function(){return i.load()}),t.qZA()(),t.TgZ(9,"div",8)(10,"div")(11,"p")(12,"strong"),t._uU(13,"Producto:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Proveedor:"),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"div")(20,"p")(21,"strong"),t._uU(22,"C\xf3digo:"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"p")(25,"strong"),t._uU(26,"Localizaci\xf3n:"),t.qZA(),t._uU(27),t.qZA()()(),t.TgZ(28,"table")(29,"thead")(30,"tr"),t._UZ(31,"th",9),t.TgZ(32,"th",10),t._uU(33,"Entradas"),t.qZA(),t.TgZ(34,"th",10),t._uU(35,"Salidas"),t.qZA(),t.TgZ(36,"th",10),t._uU(37,"Saldos"),t.qZA()(),t.TgZ(38,"tr")(39,"th"),t._uU(40,"N."),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Fecha"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Descripci\xf3n"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Costo Unitario"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Cant."),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Valor"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Cant."),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Valor"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Cant."),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Valor"),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,K,21,10,"tr",11),t.qZA()()()()()(),t.TgZ(61,"p-toolbar",12)(62,"div",13)(63,"p-divider",14)(64,"button",15),t.NdJ("click",function(){return i.printReport()}),t.qZA()()()()),2&s&&(t.xp6(6),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("loading",i.isLoading),t.xp6(6),t.hij(" ",i.product,""),t.xp6(4),t.hij(" ",i.supplier,""),t.xp6(5),t.hij(" ",i.code,""),t.xp6(4),t.hij(" ",i.localization,""),t.xp6(33),t.Q6J("ngForOf",i.kardex))},dependencies:[o.sg,o.O5,A.t,p.Hq,p.zx,E.FN,y.o,b.i],styles:["[_nghost-%COMP%] {\n    --primary-color: #023b78;\n    --secondary-color: #1565bb;\n    --background-color: #f0f8ff;\n    --text-color: #333;\n    --border-color: #ccc;\n    --hover-color: #e9ecef;\n    \n    font-family: 'Arial', sans-serif;\n    color: var(--text-color);\n    background-color: var(--background-color);\n    padding: 20px;\n  }\n\n\n\n  .header[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n\n  .product-info[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 20px;\n    margin-bottom: 20px;\n    background-color: var(--hover-color);\n    padding: 15px;\n    border-radius: 6px;\n  }\n\n  .product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    margin: 5px 0;\n  }\n\n  .product-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n    color: var(--primary-color);\n  }\n\n  table[_ngcontent-%COMP%] {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n  }\n\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    padding: 12px;\n    text-align: left;\n    border-bottom: 1px solid var(--border-color);\n  }\n\n  th[_ngcontent-%COMP%] {\n    background-color: var(--primary-color);\n    color: white;\n    font-weight: bold;\n  }\n  tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover {\n    background-color: var(--hover-color);\n    transition: background-color 0.3s ease;\n  }\n\n  tr[_ngcontent-%COMP%]:nth-child(even) {\n    background-color: var(--hover-color);\n  }\n\n  .button-space[_ngcontent-%COMP%] {\n    margin-left: 10px;\n  }\n\n  .loading[_ngcontent-%COMP%] {\n    text-align: center;\n    color: var(--secondary-color);\n    font-style: italic;\n  }"]})}return a})(),J=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#n=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[g.Bz.forChild([{path:"",component:z,canActivate:[h.j]}]),g.Bz]})}return a})();var B=n(4891),j=n(5552);let W=(()=>{class a{static#t=this.\u0275fac=function(s){return new(s||a)};static#n=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({imports:[o.ez,J,j.K8,B.E,p.hJ,E.EV,y.V,b.x]})}return a})()},7083:(U,u,n)=>{n.d(u,{K:()=>d});var o=n(529),p=n(2340),g=n(2384),h=n(4650);const m=p.N.baseUrl;let d=(()=>{class l{constructor(r){this.http=r}addUser(r){return this.http.post(`${m}auth/register`,r)}login(r,t){var c=new g.b;return c.email=r,c.password=t,this.http.post(`${m}auth/login`,c)}GetUserPermisions(){const C={headers:new o.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",C)}static#t=this.\u0275fac=function(t){return new(t||l)(h.LFG(o.eN))};static#n=this.\u0275prov=h.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},1546:(U,u,n)=>{n.d(u,{j:()=>m});var o=n(4650),p=n(5384),g=n(9197),h=n(7083);let m=(()=>{class d{constructor(T,r,t){this.eventService=T,this.router=r,this._userService=t,this.isTokenValid=!1}canActivate(T,r){const t=this.eventService.getToken();return(""==t||null==t||null==t)&&this.router.navigateByUrl("/auth/login"),!0}static#t=this.\u0275fac=function(r){return new(r||d)(o.LFG(p.P),o.LFG(g.F0),o.LFG(h.K))};static#n=this.\u0275prov=o.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);
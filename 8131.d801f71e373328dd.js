"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[8131],{6768:(N,y,a)=>{a.d(y,{t:()=>t});var u=a(5e3),C=a(7747),S=a(5384),P=a(3075),c=a(4036);let t=(()=>{class g{constructor(p,h){this.commonService=p,this.eventService=h,this.ValueSelectedChange=new u.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){var p;this.ValueSelected=null===(p=this.selectedData)||void 0===p?void 0:p.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){var p;this.ValueSelected=null===(p=this.selectedData)||void 0===p?void 0:p.value,this.ValueSelectedChange.emit(this.ValueSelected)}}return g.\u0275fac=function(p){return new(p||g)(u.Y36(C.M),u.Y36(S.P))},g.\u0275cmp=u.Xpm({type:g,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(p,h){1&p&&(u.TgZ(0,"p-dropdown",0),u.NdJ("onClick",function(){return h.selectedValue()})("onChange",function(){return h.changeValue()})("ngModelChange",function(D){return h.selectedData=D}),u.qZA()),2&p&&u.Q6J("filter",h.Filter)("options",h.data)("ngModel",h.selectedData)},dependencies:[P.JJ,P.On,c.Lt],encapsulation:2}),g})()},8131:(N,y,a)=>{a.r(y),a.d(y,{ComprasModule:()=>Ft});var u=a(9808),C=a(7449);class S{}var c=a(3075),t=a(5e3),g=a(7747),A=a(5384),p=a(845),h=a(6768),_=a(7531),D=a(2032),O=a(3191),d=a(508),x=a(727),U=a(7579),G=a(9770),M=a(6451),K=a(9646),w=a(4968),L=a(925),b=a(1314),R=a(6731),m=a(1159),W=a(7429),V=a(2978),k=a(8675),E=a(3900),f=a(5698),F=a(9300),Q=a(4004),z=a(8505),j=a(4986),X=a(7272),$=a(4482),q=a(5403),tt=a(5032),ot=a(9718),nt=a(5577);function B(n,s){return s?e=>(0,X.z)(s.pipe((0,f.q)(1),function et(){return(0,$.e)((n,s)=>{n.subscribe((0,q.x)(s,tt.Z))})}()),e.pipe(B(n))):(0,nt.z)((e,o)=>n(e,o).pipe((0,f.q)(1),(0,ot.h)(e)))}var it=a(5963),st=a(226);const lt=["panel"];function rt(n,s){if(1&n&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&n){const e=s.id,o=t.oxw();t.Q6J("id",o.id)("ngClass",o._classList),t.uIk("aria-label",o.ariaLabel||null)("aria-labelledby",o._getPanelAriaLabelledby(e))}}const ct=["*"];let pt=0;class ut{constructor(s,e){this.source=s,this.option=e}}const dt=(0,d.Kr)(class{}),I=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function ht(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1}}});let mt=(()=>{class n extends dt{constructor(e,o,i,l){super(),this._changeDetectorRef=e,this._elementRef=o,this._activeOptionChanges=x.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+pt++,this.inertGroups=(null==l?void 0:l.SAFARI)||!1,this._autoActiveFirstOption=!!i.autoActiveFirstOption,this._autoSelectActiveOption=!!i.autoSelectActiveOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,O.Ig)(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=(0,O.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,O.du)(e).reduce((o,i)=>(o[i]=!0,o),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new D.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const o=new ut(this,e);this.optionSelected.emit(o)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(I),t.Y36(L.t4))},n.\u0275dir=t.lG2({type:n,viewQuery:function(e,o){if(1&e&&(t.Gf(t.Rgc,7),t.Gf(lt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.template=i.first),t.iGM(i=t.CRH())&&(o.panel=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),n})(),gt=(()=>{class n extends mt{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return n.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(n)))(o||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(e,o,i){if(1&e&&(t.Suo(i,d.K7,5),t.Suo(i,d.ey,5)),2&e){let l;t.iGM(l=t.CRH())&&(o.optionGroups=l),t.iGM(l=t.CRH())&&(o.options=l)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:d.HF,useExisting:n}]),t.qOj],ngContentSelectors:ct,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,rt,3,4,"ng-template"))},dependencies:[u.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0}),n})();const Z=new t.OlP("mat-autocomplete-scroll-strategy"),ft={provide:Z,deps:[b.aV],useFactory:function _t(n){return()=>n.scrollStrategies.reposition()}},vt={provide:c.JU,useExisting:(0,t.Gpc)(()=>Y),multi:!0};let yt=(()=>{class n{constructor(e,o,i,l,r,v,xt,Lt,Rt,Vt,Bt){this._element=e,this._overlay=o,this._viewContainerRef=i,this._zone=l,this._changeDetectorRef=r,this._dir=xt,this._formField=Lt,this._document=Rt,this._viewportRuler=Vt,this._defaults=Bt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=x.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new U.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,G.P)(()=>{const T=this.autocomplete?this.autocomplete.options:null;return T?T.changes.pipe((0,k.O)(T),(0,E.w)(()=>(0,M.T)(...T.map(It=>It.onSelectionChange)))):this._zone.onStable.pipe((0,f.q)(1),(0,E.w)(()=>this.optionSelections))}),this._scrollStrategy=v}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,O.Ig)(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,M.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,F.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,F.h)(()=>this._overlayAttached)):(0,K.of)()).pipe((0,Q.U)(e=>e instanceof d.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,M.T)((0,w.R)(this._document,"click"),(0,w.R)(this._document,"auxclick"),(0,w.R)(this._document,"touchend")).pipe((0,F.h)(e=>{const o=(0,L.sA)(e),i=this._formField?this._formField._elementRef.nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!i||!i.contains(o))&&(!l||!l.contains(o))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(o)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const o=e.keyCode,i=(0,m.Vb)(e);if(o===m.hY&&!i&&e.preventDefault(),this.activeOption&&o===m.K5&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const l=this.autocomplete._keyManager.activeItem,r=o===m.LH||o===m.JH;o===m.Mf||r&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):r&&this._canOpen()&&this.openPanel(),(r||this.autocomplete._keyManager.activeItem!==l)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let o=e.target,i=o.value;"number"===o.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i&&(this._previousValue=i,this._pendingAutoselectedOption=null,this._onChange(i),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,f.q)(1)),o=this.autocomplete.options.changes.pipe((0,z.b)(()=>this._positionStrategy.reapplyLastPosition()),function at(n,s=j.z){const e=(0,it.H)(n,s);return B(()=>e)}(0));return(0,M.T)(e,o).pipe((0,E.w)(()=>(this._zone.run(()=>{const i=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,f.q)(1)).subscribe(i=>this._setValueAndClose(i))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const o=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(null!=o?o:"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const o=e?e.source:this._pendingAutoselectedOption;o&&(this._clearPreviousSelectedOption(o),this._assignOptionValue(o.value),this._onChange(o.value),this.autocomplete._emitSelectEvent(o),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(o=>{o!==e&&o.selected&&o.deselect()})}_attachOverlay(){var e;let o=this._overlayRef;o?(this._positionStrategy.setOrigin(this._getConnectedElement()),o.updateSize({width:this._getPanelWidth()})):(this._portal=new W.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),o=this._overlay.create(this._getOverlayConfig()),this._overlayRef=o,this._handleOverlayEvents(o),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&o&&o.updateSize({width:this._getPanelWidth()})})),o&&!o.hasAttached()&&(o.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var e;return new b.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const o=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,l=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];let r;r="above"===this.position?l:"below"===this.position?o:[...o,...l],e.withPositions(r)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}_scrollToOption(e){const o=this.autocomplete,i=(0,d.CB)(e,o.options,o.optionGroups);if(0===e&&1===i)o._setScrollTop(0);else if(o.panel){const l=o.options.toArray()[e];if(l){const r=l._getHostElement(),v=(0,d.jH)(r.offsetTop,r.offsetHeight,o._getScrollTop(),o.panel.nativeElement.offsetHeight);o._setScrollTop(v)}}}_handleOverlayEvents(e){e.keydownEvents().subscribe(o=>{var i;(o.keyCode===m.hY&&!(0,m.Vb)(o)||o.keyCode===m.LH&&(0,m.Vb)(o,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(null!==(i=this._valueBeforeAutoSelection)&&void 0!==i?i:""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),o.stopPropagation(),o.preventDefault())}),e.outsidePointerEvents().subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(b.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(Z),t.Y36(st.Is,8),t.Y36(V.G_,9),t.Y36(u.K0,8),t.Y36(R.rL),t.Y36(I,8))},n.\u0275dir=t.lG2({type:n,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),n})(),Y=(()=>{class n extends yt{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return n.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(n)))(o||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,o){1&e&&t.NdJ("focusin",function(){return o._handleFocus()})("blur",function(){return o._onTouched()})("input",function(l){return o._handleInput(l)})("keydown",function(l){return o._handleKeydown(l)})("click",function(){return o._handleClick()}),2&e&&t.uIk("autocomplete",o.autocompleteAttribute)("role",o.autocompleteDisabled?null:"combobox")("aria-autocomplete",o.autocompleteDisabled?null:"list")("aria-activedescendant",o.panelOpen&&o.activeOption?o.activeOption.id:null)("aria-expanded",o.autocompleteDisabled?null:o.panelOpen.toString())("aria-owns",o.autocompleteDisabled||!o.panelOpen||null==o.autocomplete?null:o.autocomplete.id)("aria-haspopup",o.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[t._Bn([vt]),t.qOj]}),n})(),Ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ft],imports:[b.U8,d.Ng,d.BQ,u.ez,R.ZD,d.Ng,d.BQ]}),n})();var H=a(5652),At=a(9783),J=a(5315);function Ot(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"strong"),t._uU(2," Proveedor: "),t.qZA(),t.TgZ(3,"app-drop-down",13),t.NdJ("ValueSelectedChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.filterSupplier(i))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",e.suppliers)}}function Mt(n,s){if(1&n&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.value)("title",e.viewValue),t.xp6(1),t.hij(" ",e.viewValue," ")}}function bt(n,s){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Tt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",14),t.NdJ("input",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.filterProducts(i))}),t.qZA(),t.TgZ(3,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(){const i=t.CHM(e),l=i.index,r=i.$implicit,v=t.oxw();return t.KtG(v.updateProduct(l,r))}),t.YNc(5,Mt,2,3,"mat-option",17),t.qZA()(),t.TgZ(6,"td")(7,"input",18),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.quantity=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getTotal())}),t.qZA()(),t.TgZ(8,"td")(9,"input",18),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.purchasePrice=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getTotal())}),t.qZA()(),t.TgZ(10,"td")(11,"select",19),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.taxId=i)}),t.YNc(12,bt,2,2,"option",20),t.qZA()(),t.TgZ(13,"td")(14,"button",21),t.NdJ("click",function(){const l=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeProduct(l))}),t.qZA()()()}if(2&n){const e=s.$implicit,o=t.MAs(4),i=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",o)("formControl",e.productControl),t.xp6(3),t.Q6J("ngForOf",i.filterdProductos),t.xp6(2),t.Q6J("ngModel",e.quantity),t.xp6(2),t.Q6J("ngModel",e.purchasePrice),t.xp6(2),t.Q6J("ngModel",e.taxId),t.xp6(1),t.Q6J("ngForOf",i.availableTaxes)}}function St(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showSaveDialog=!1)}),t.qZA(),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmSaveBuy())}),t.qZA()}}const Pt=function(){return{width:"450px"}};let Dt=(()=>{class n{constructor(e,o){this.productService=e,this.eventService=o,this.availableTaxes=[{id:1,name:"Tax 1"},{id:2,name:"Tax 2"},{id:3,name:"Tax 3"}],this.buy=new S,this.buy.supplierId=0,this.buy.buyDate=new Date,this.buy.reference="",this.buy.productLine=[],this.buy.productLine.forEach(i=>{i.productControl=new c.NI})}ngOnInit(){this.GetSupplierValuesByEnterprise(),this.getProductValues()}removeProduct(e){this.buy.productLine.splice(e,1)}updateProduct(e,o){const i=o.productControl.value,l=this.products.find(r=>r.value===i);l?(o.productId=i,o.productControl.setValue(l.viewValue)):(o.productId=0,o.productControl.setValue(""))}addProduct(){this.buy.productLine.push({productId:0,quantity:0,purchasePrice:0,taxId:0,productControl:new c.NI}),console.log(this.buy.productLine)}getTotal(){let e=0;for(let o of this.buy.productLine)e+=o.quantity*o.purchasePrice;return e}filterSupplier(e){this.buy.supplierId=e}getProductValues(){this.isLoading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(e=>{e.data&&(this.products=e.data),this.isLoading=!1})}filterProducts(e){const i=(e.target.value||"").toLowerCase();this.filterdProductos=this.products.filter(l=>l.viewValue.toLowerCase().includes(i))}GetSupplierValuesByEnterprise(){this.productService.GetSupplierValues(this.eventService.getToken()).subscribe(e=>{e.data&&(this.suppliers=e.data)})}save(){this.showSaveDialog=!0}confirmSaveBuy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.M),t.Y36(A.P))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:39,vars:11,consts:[["style","margin-bottom: 10px;",4,"ngIf"],["inputId","icon","formControlName","buy.buyDate",2,"margin-left","25px",3,"showIcon"],[2,"margin-top","10px"],["type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngModelChange"],[2,"margin-top","20px"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","label","Agregar","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-save",1,"p-button-help",3,"click"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["pTemplate","footer"],[2,"margin-bottom","10px"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],["type","text","placeholder","Product","aria-label","Product","matInput","",1,"large-input",3,"matAutocomplete","formControl","input"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","title",4,"ngFor","ngForOf"],["type","number",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[3,"value","title"],[3,"value"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,Ot,4,3,"div",0),t.TgZ(2,"strong"),t._uU(3,"Fecha: "),t.qZA(),t._UZ(4,"p-calendar",1)(5,"br"),t.TgZ(6,"div",2)(7,"strong"),t._uU(8,"Referencia: "),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(l){return o.buy.reference=l}),t.qZA()(),t.TgZ(10,"h6")(11,"em"),t._uU(12,"Favor en el precio de compra incluya el precio final incluyendo el impuesto"),t.qZA()(),t.TgZ(13,"table",4)(14,"tr")(15,"th"),t._uU(16,"Product"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Quantity"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Purchase Price"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Tax"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Actions"),t.qZA()(),t.YNc(25,Tt,15,7,"tr",5),t.qZA(),t.TgZ(26,"h3"),t._uU(27),t.qZA(),t.TgZ(28,"button",6),t.NdJ("click",function(){return o.addProduct()}),t.qZA(),t.TgZ(29,"button",7),t.NdJ("click",function(){return o.save()}),t.qZA()(),t.TgZ(30,"p-dialog",8),t.NdJ("visibleChange",function(l){return o.showSaveDialog=l}),t.TgZ(31,"div",9),t._UZ(32,"i",10),t.TgZ(33,"span"),t._uU(34,"Esta seguro desea agregar esta compra por un total de: "),t.TgZ(35,"b"),t._uU(36),t.qZA(),t._uU(37,"?"),t.qZA()(),t.YNc(38,St,2,0,"ng-template",11),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(3),t.Q6J("showIcon",!0),t.xp6(5),t.Q6J("ngModel",o.buy.reference),t.xp6(16),t.Q6J("ngForOf",o.buy.productLine),t.xp6(2),t.hij("Total L. ",o.getTotal(),""),t.xp6(3),t.Akn(t.DdM(10,Pt)),t.Q6J("visible",o.showSaveDialog)("modal",!0),t.xp6(6),t.Oqu(o.getTotal()))},dependencies:[u.sg,u.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.Q7,c.On,p.Hq,h.t,_.Nt,gt,Y,d.ey,c.oH,c.u,H.f,At.jx,J.V],styles:['[_ngcontent-%COMP%]:root {\n    --primary-color: #4CAF50;\n    --secondary-color: #45a049;\n    --tertiary-color: #f1f1f1;\n    --quaternary-color: #f9f9f9;\n  }\n\n  \n  th[_ngcontent-%COMP%] {\n    background-color: var(--tertiary-color);\n    font-weight: bold;\n  }\n\n  tr[_ngcontent-%COMP%]:nth-child(even) {\n    background-color: var(--quaternary-color);\n  }\n\n  tr[_ngcontent-%COMP%]:hover {\n    background-color: var(--tertiary-color);\n  }\n\n  button[_ngcontent-%COMP%] {\n    background-color: var(--primary-color);\n    \n  }\n\n  button[_ngcontent-%COMP%]:hover {\n    background-color: var(--secondary-color);\n  }\n\n  \n  input[type="number"][_ngcontent-%COMP%], input[type="text"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\n    font-size: 14px;\n    padding: 4px 8px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    outline: none;\n  }\n\n  input[type="number"][_ngcontent-%COMP%]:focus, input[type="text"][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 4px rgba(76, 175, 80, 0.5);\n  }\n  .large-input[_ngcontent-%COMP%] {\n  width: 300px; \n}']}),n})(),wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild([{path:"",component:Dt}]),C.Bz]}),n})();var Et=a(4891);let Ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,wt,c.u5,p.hJ,Et.E,V.lN,_.c,Ct,c.UX,H._8,J.S]}),n})()}}]);
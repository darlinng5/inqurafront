"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7442],{7442:(M,h,r)=>{r.r(h),r.d(h,{UsersModule:()=>Y});var g=r(9808),_=r(7449),T=r(1546),c=r(9783);class f{}class Z{}var e=r(5e3),C=r(7747),l=r(5384),p=r(8952),m=r(7773),v=r(4534),U=r(845),S=r(5315),u=r(3075),b=r(7116),A=r(6768);function D(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function N(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",30),e._UZ(1,"p-toast"),e.TgZ(2,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openNew())}),e.qZA()()}}function y(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",32),e._uU(2,"Nombre"),e._UZ(3,"p-sortIcon",33),e.qZA(),e.TgZ(4,"th",34),e._uU(5,"Apellido "),e._UZ(6,"p-sortIcon",35),e.qZA(),e.TgZ(7,"th",36),e._uU(8,"Correo "),e._UZ(9,"p-sortIcon",37),e.qZA(),e.TgZ(10,"th",38),e._uU(11,"Celular "),e._UZ(12,"p-sortIcon",37),e.qZA(),e.TgZ(13,"th",39),e._uU(14,"Rol "),e._UZ(15,"p-sortIcon",37),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Asignar Talonario"),e.qZA()())}function J(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",40),e.NdJ("click",function(){const d=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.AsignarTalonario(d))}),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.middleName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.cellphone),e.xp6(2),e.Oqu(t.role)}}function O(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function P(n,s){if(1&n&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function x(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideDialog())}),e.qZA()}}function V(n,s){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function E(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"label",46),e._uU(4,"Usuario: "),e.TgZ(5,"strong"),e._uU(6),e.qZA()()()()(),e.TgZ(7,"div",43)(8,"div",44)(9,"div",45)(10,"label",46),e._uU(11,"Punto de Venta"),e.qZA(),e.TgZ(12,"app-drop-down",47),e.NdJ("ValueSelectedChange",function(i){e.CHM(t);const d=e.oxw();return e.KtG(d.filterPointOfSale(i))}),e.qZA()(),e.TgZ(13,"div",45)(14,"label",48),e._uU(15,"Talonario"),e.qZA(),e.TgZ(16,"app-drop-down",47),e.NdJ("ValueSelectedChange",function(i){e.CHM(t);const d=e.oxw();return e.KtG(d.filterTalonario(i))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.AsE(" ",t.userSelectd.name," ",t.userSelectd.middleName,""),e.xp6(6),e.Q6J("IsCreating",!1)("DropDownDataSource",t.pointOfSaleValues),e.xp6(4),e.Q6J("IsCreating",!1)("DropDownDataSource",t.talonarios)}}function q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showChangeTalonarioDialog=!1)}),e.qZA(),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveUserTalonario())}),e.qZA()}}const I=function(){return{"min-width":"50rem"}},B=function(){return[10,25,50]},w=function(){return{width:"850px"}};let F=(()=>{class n{constructor(t,o,i){this.productService=t,this.eventService=o,this.messageService=i,this.pointOfSaleId=0,this.talonarioId=0,this.pointOfSaleValues=[],this.talonarios=[],this.showDialog=!1,this.users=[],this.user=new f,this.userSelectd=new f,this.roles=["SuperAdmin","Administrador","Vendedor"],this.showProgressBar=!1,this.showChangeTalonarioDialog=!1}ngOnInit(){this.GetSuppliers(),this.GetPointOfSaleValuesByWareHouse(),this.GetTalonariosByWareHouse()}hideDialog(){this.showDialog=!1}openNew(){this.showDialog=!0}onSubmit(t){this.user.userId=this.eventService.getToken(),t.valid&&this.AddNewUser(this.user)}AsignarTalonario(t){this.userSelectd=t,this.showChangeTalonarioDialog=!0}AddNewUser(t){this.showProgressBar=!0,this.productService.AddNewUser(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El usuario "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetSuppliers()):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}GetPointOfSaleValuesByWareHouse(){this.productService.GetPoinOfSaleValues(this.eventService.getToken()).subscribe(t=>{t.data?this.pointOfSaleValues=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})}GetTalonariosByWareHouse(){this.productService.GetTalonariosValues(this.eventService.getToken()).subscribe(t=>{t.data?this.talonarios=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})}filterTalonario(t){null!=t&&(this.talonarioId=t)}filterPointOfSale(t){null!=t&&(this.pointOfSaleId=t)}saveUserTalonario(){var t=new Z;t.pointOfSale=this.pointOfSaleId,t.talonario=this.talonarioId,t.userEmail=null==this.userSelectd.email?"":this.userSelectd.email,t.userId=this.eventService.getToken(),this.showProgressBar=!0,this.productService.AddNewUserTalonario(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:o.data,life:8e3}),this.showChangeTalonarioDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}GetSuppliers(){this.showProgressBar=!0,this.productService.GetUsersByWareHouse(this.eventService.getToken()).subscribe(t=>{t.data?this.users=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.M),e.Y36(l.P),e.Y36(c.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([c.ez])],decls:47,vars:29,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Nuevo Usuario",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[3,"ngSubmit"],["form","ngForm"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","middleName"],["type","text","id","middleName","name","middleName",3,"ngModel","ngModelChange"],["for","role"],["id","role","name","role","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","email"],["type","email","id","email","name","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",3,"ngModel","ngModelChange"],["for","cellphone"],["type","tel","id","cellphone","name","cellphone",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","","minlength","5",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"],["pTemplate","footer"],["header","Asignar Talonario",3,"visible","modal","visibleChange"],["pTemplate","content"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","rtn"],["pSortableColumn","middleName",2,"width","20%"],["field","name"],["pSortableColumn","email",2,"width","20%"],["field","middleName"],["pSortableColumn","cellphone",2,"width","20%"],["pSortableColumn","role",2,"width","20%"],["pButton","","pRipple","","icon","pi pi-book",1,"p-button-rounded","p-button-help",3,"click"],[3,"value"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],[1,"field"],[1,"formgrid","grid"],[1,"field","col"],["for","user"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["for","point"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(t,o){if(1&t){const i=e.EpF();e.YNc(0,D,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,N,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,y,18,0,"ng-template",7),e.YNc(9,J,13,5,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(a){return o.showDialog=a}),e.YNc(11,O,2,0,"div",0),e.TgZ(12,"div",10)(13,"form",11,12),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.MAs(14);return e.KtG(o.onSubmit(a))}),e.TgZ(15,"div")(16,"label",13),e._uU(17,"Nombre:"),e.qZA(),e.TgZ(18,"input",14),e.NdJ("ngModelChange",function(a){return o.user.name=a}),e.qZA()(),e.TgZ(19,"div")(20,"label",15),e._uU(21,"Apellido:"),e.qZA(),e.TgZ(22,"input",16),e.NdJ("ngModelChange",function(a){return o.user.middleName=a}),e.qZA()(),e.TgZ(23,"div")(24,"label",17),e._uU(25,"Rol:"),e.qZA(),e.TgZ(26,"select",18),e.NdJ("ngModelChange",function(a){return o.user.role=a}),e.YNc(27,P,2,2,"option",19),e.qZA()(),e.TgZ(28,"div")(29,"label",20),e._uU(30,"Correo:"),e.qZA(),e.TgZ(31,"input",21),e.NdJ("ngModelChange",function(a){return o.user.email=a}),e.qZA()(),e.TgZ(32,"div")(33,"label",22),e._uU(34,"Celular:"),e.qZA(),e.TgZ(35,"input",23),e.NdJ("ngModelChange",function(a){return o.user.cellphone=a}),e.qZA()(),e.TgZ(36,"div")(37,"label",24),e._uU(38,"Contrase\xf1a:"),e.qZA(),e.TgZ(39,"input",25),e.NdJ("ngModelChange",function(a){return o.user.password=a}),e.qZA()(),e.TgZ(40,"button",26),e._uU(41,"Guardar"),e.qZA()()(),e.YNc(42,x,1,0,"ng-template",27),e.qZA(),e.TgZ(43,"p-dialog",28),e.NdJ("visibleChange",function(a){return o.showChangeTalonarioDialog=a}),e.YNc(44,V,2,0,"div",0),e.YNc(45,E,17,6,"ng-template",29),e.YNc(46,q,2,0,"ng-template",27),e.qZA()}if(2&t){const i=e.MAs(14);e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("value",o.users)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(25,I))("rowsPerPageOptions",e.DdM(26,B)),e.xp6(3),e.Akn(e.DdM(27,w)),e.Q6J("visible",o.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("ngModel",o.user.name),e.xp6(4),e.Q6J("ngModel",o.user.middleName),e.xp6(4),e.Q6J("ngModel",o.user.role),e.xp6(1),e.Q6J("ngForOf",o.roles),e.xp6(4),e.Q6J("ngModel",o.user.email),e.xp6(4),e.Q6J("ngModel",o.user.cellphone),e.xp6(4),e.Q6J("ngModel",o.user.password),e.xp6(1),e.Q6J("disabled",i.invalid),e.xp6(3),e.Akn(e.DdM(28,w)),e.Q6J("visible",o.showChangeTalonarioDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar)}},dependencies:[g.sg,g.O5,p.iA,c.jx,p.lQ,p.fz,m.FN,v.o,U.Hq,S.V,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.wO,u.c5,u.On,u.F,b.R,A.t],styles:['label[_ngcontent-%COMP%] {\n  color: #6b6d6e;\n  font-weight: bold;\n}\n\n\ninput[_ngcontent-%COMP%] {\n  border: 1px solid #ccc;\n  padding: 10px;\n  margin-bottom: 20px;\n  width: 100%;\n}\ninput[type="text"][_ngcontent-%COMP%] {\n  border-radius: 5px;\n}\n\ninput[type="password"][_ngcontent-%COMP%] {\n  border-radius: 15px;\n}\n\n\nbutton[type="submit"][_ngcontent-%COMP%] {\n  background-color: #0077c9;\n  color: #fff;\n  padding: 10px 20px;\n  border: none;\n  cursor: pointer;\n}\n\n\nbutton[type="submit"][disabled][_ngcontent-%COMP%] {\n  background-color: #ccc;\n  cursor: not-allowed;\n}']}),n})(),G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:F,canActivate:[T.j]}]),_.Bz]}),n})();var Q=r(1424),R=r(4891);let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,G,p.U$,m.EV,v.V,U.hJ,S.S,Q.j,u.u5,R.E]}),n})()},6768:(M,h,r)=>{r.d(h,{t:()=>Z});var g=r(5e3),_=r(7747),T=r(5384),c=r(3075),f=r(4036);let Z=(()=>{class e{constructor(l,p){this.commonService=l,this.eventService=p,this.ValueSelectedChange=new g.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){var l;this.ValueSelected=null===(l=this.selectedData)||void 0===l?void 0:l.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){var l;this.ValueSelected=null===(l=this.selectedData)||void 0===l?void 0:l.value,this.ValueSelectedChange.emit(this.ValueSelected)}}return e.\u0275fac=function(l){return new(l||e)(g.Y36(_.M),g.Y36(T.P))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(l,p){1&l&&(g.TgZ(0,"p-dropdown",0),g.NdJ("onClick",function(){return p.selectedValue()})("onChange",function(){return p.changeValue()})("ngModelChange",function(v){return p.selectedData=v}),g.qZA()),2&l&&g.Q6J("filter",p.Filter)("options",p.data)("ngModel",p.selectedData)},dependencies:[c.JJ,c.On,f.Lt],encapsulation:2}),e})()}}]);
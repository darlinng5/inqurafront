"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[6329],{3003:(C,_,p)=>{p.d(_,{c:()=>e});class e{}},6329:(C,_,p)=>{p.r(_),p.d(_,{ImpuestoModule:()=>M});var e=p(9808),d=p(7449),T=p(9783),m=p(3003),t=p(5e3),o=p(7747),l=p(5384),u=p(5652),g=p(845),v=p(3075),y=p(6186),x=p(7773);function O(c,f){if(1&c&&(t.TgZ(0,"tr",11)(1,"th",12),t._uU(2),t.qZA(),t.TgZ(3,"th",12),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.qZA(),t.TgZ(15,"th",13),t._uU(16),t.qZA()()),2&c){const i=f.$implicit;t.xp6(2),t.Oqu(i.invoiceDate),t.xp6(2),t.Oqu(i.taxName),t.xp6(2),t.Oqu(i.invoiceNumber),t.xp6(2),t.Oqu(i.productName),t.xp6(2),t.Oqu(i.price),t.xp6(2),t.Oqu(i.quantity),t.xp6(2),t.Oqu(i.totalProduct),t.xp6(2),t.Oqu(i.taxTotal)}}function Z(c,f){if(1&c&&(t.TgZ(0,"tr",11)(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.qZA()()),2&c){const i=f.$implicit;t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.baseTax),t.xp6(2),t.Oqu(i.taxTotal)}}let I=(()=>{class c{constructor(i,r,n,s){this.router=i,this.productService=r,this.messageService=n,this.eventService=s,this.loading=!1,this.InvoiceList=[],this.taxReport=[],this.taxResume=[],this.redirect=!1,this.AccessName="/pages/tax"}ngOnInit(){const r=this.eventService.getPermisionsException().split(",").map(n=>n.trim());this.redirect=r.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized")}load(){this.loading=!0;var i=new m.c;i.initialDate=this.StartDate,i.finalDate=this.FinalDate,this.getInvoiceReport(i)}getInvoiceReport(i){const r=this.eventService.getToken();i.userFilter="",i.warehouseFilter="",this.productService.GetTaxReport(i,r).subscribe(n=>{var s;if(n.data){this.taxReport=n.data.taxReport,this.taxResume=n.data.taxResume;var a=0;null===(s=this.taxReport)||void 0===s||s.forEach(h=>{a+=h.taxTotal}),this.taxTotal=Number(a.toFixed(2))}else this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3});this.loading=!1},n=>{this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.loading=!1})}}return c.\u0275fac=function(i){return new(i||c)(t.Y36(d.F0),t.Y36(o.M),t.Y36(T.ez),t.Y36(l.P))},c.\u0275cmp=t.Xpm({type:c,selectors:[["ng-component"]],features:[t._Bn([T.ez])],decls:69,vars:9,consts:[["id","print-section"],[1,"grid"],[1,"col-12"],[1,"card"],["htmlFor","age1"],["inputId","icon",3,"ngModel","showIcon","ngModelChange"],["label","Search","icon","pi pi-search","iconPos","right",1,"space",3,"loading","onClick"],[2,"background-color","#7288a2","color","white"],["style","font-size: small;",4,"ngFor","ngForOf"],[2,"color","black"],["printSectionId","print-section","ngxPrint","","pButton","","pRipple","","label","imprimir","icon","pi pi-print",1,"p-button-help"],[2,"font-size","small"],["align","left"],["align","right"]],template:function(i,r){1&i&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4"),t._uU(6,"Reporte de Impuestos"),t.qZA(),t.TgZ(7,"label",4),t._uU(8,"Inicial "),t.qZA(),t.TgZ(9,"p-calendar",5),t.NdJ("ngModelChange",function(s){return r.StartDate=s}),t.qZA(),t.TgZ(10,"label",4),t._uU(11,"Final "),t.qZA(),t.TgZ(12,"p-calendar",5),t.NdJ("ngModelChange",function(s){return r.FinalDate=s}),t.qZA(),t.TgZ(13,"p-button",6),t.NdJ("onClick",function(){return r.load()}),t.qZA(),t._UZ(14,"p")(15,"p"),t.TgZ(16,"table")(17,"tr",7)(18,"th"),t._uU(19,"Fecha"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Impuesto"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Factura"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Producto"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Precio"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Cantidad"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Total Producto"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Total Impuesto"),t.qZA()(),t.YNc(34,O,17,8,"tr",8),t.TgZ(35,"tr",9)(36,"th"),t._uU(37,"Totales"),t.qZA(),t._UZ(38,"th")(39,"th")(40,"th")(41,"th")(42,"th")(43,"th"),t.TgZ(44,"th"),t._uU(45),t.qZA()()(),t.TgZ(46,"h3"),t._uU(47,"Resumen"),t.qZA(),t.TgZ(48,"table")(49,"tr",7)(50,"th"),t._uU(51,"Nombre"),t.qZA(),t.TgZ(52,"th"),t._uU(53,"Base"),t.qZA(),t.TgZ(54,"th"),t._uU(55,"Impuesto"),t.qZA()(),t.YNc(56,Z,7,3,"tr",8),t.TgZ(57,"tr",9)(58,"th"),t._uU(59,"Totales"),t.qZA(),t._UZ(60,"th")(61,"th")(62,"th")(63,"th")(64,"th")(65,"th"),t.TgZ(66,"th"),t._uU(67),t.qZA()()()()()()(),t._UZ(68,"button",10)),2&i&&(t.xp6(9),t.Q6J("ngModel",r.StartDate)("showIcon",!0),t.xp6(3),t.Q6J("ngModel",r.FinalDate)("showIcon",!0),t.xp6(1),t.Q6J("loading",r.loading),t.xp6(21),t.Q6J("ngForOf",r.taxReport),t.xp6(11),t.Oqu(r.taxTotal),t.xp6(11),t.Q6J("ngForOf",r.taxResume),t.xp6(11),t.Oqu(r.taxTotal))},dependencies:[e.sg,u.f,g.Hq,g.zx,v.JJ,v.On,y.I,x.FN],styles:["table[_ngcontent-%COMP%] {\n      border-collapse: collapse;\n      width: 100%;\n    }\n    \n    tr[_ngcontent-%COMP%] {\n      border-bottom: 1px solid #ddd;\n    }\n    .space[_ngcontent-%COMP%] {\n  width: 4px;\n  height: auto;\n  margin-left: 20px;\n}"]}),c})(),A=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[d.Bz.forChild([{path:"",component:I}]),d.Bz]}),c})(),M=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[e.ez,A,u._8,g.hJ,v.u5,v.UX,y.K,x.EV]}),c})()},6186:(C,_,p)=>{p.d(_,{I:()=>d,K:()=>T});var e=p(5e3);let d=(()=>{class m{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(o){for(let l in o)o.hasOwnProperty(l)&&this._printStyle.push((l+JSON.stringify(o[l])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(o){let l=function(u){return`<link rel="stylesheet" type="text/css" href="${u}">`};if(-1!==o.indexOf(",")){const u=o.split(",");for(let g of u)this._styleSheetFile=this._styleSheetFile+l(g)}else this._styleSheetFile=l(o)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(o){const l=[],u=document.getElementsByTagName(o);for(let g=0;g<u.length;g++)l.push(u[g].outerHTML);return l.join("\r\n")}getFormData(o){for(var l=0;l<o.length;l++)o[l].defaultValue=o[l].value,o[l].checked&&(o[l].defaultChecked=!0)}getHtmlContents(){let o=document.getElementById(this.printSectionId),l=o.getElementsByTagName("input");this.getFormData(l);let u=o.getElementsByTagName("textarea");return this.getFormData(u),o.innerHTML}print(){let o,l,u="",g="";const v=this.getElementTag("base");this.useExistingCss&&(u=this.getElementTag("style"),g=this.getElementTag("link")),o=this.getHtmlContents(),l=window.open("","_blank","top=0,left=0,height=auto,width=auto"),l.document.open(),l.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${v}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${u}\n          ${g}\n        </head>\n        <body>\n          ${o}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),l.document.close()}}return m.\u0275fac=function(o){return new(o||m)},m.\u0275dir=e.lG2({type:m,selectors:[["button","ngxPrint",""]],hostBindings:function(o,l){1&o&&e.NdJ("click",function(){return l.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),m})(),T=(()=>{class m{}return m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({}),m})()},7773:(C,_,p)=>{p.d(_,{EV:()=>f,FN:()=>c});var e=p(5e3),d=p(9808),T=p(9783),m=p(5921),t=p(5787),o=p(1777);const l=["container"],u=function(i,r,n,s){return{"pi-info-circle":i,"pi-exclamation-triangle":r,"pi-times-circle":n,"pi-check":s}};function g(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"span",6),e.TgZ(2,"div",7)(3,"div",8),e._uU(4),e.qZA(),e.TgZ(5,"div",9),e._uU(6),e.qZA()(),e.BQk()),2&i){const n=e.oxw();e.xp6(1),e.Tol("p-toast-message-icon pi"+(n.message.icon?" "+n.message.icon:"")),e.Q6J("ngClass",e.l5B(5,u,"info"==n.message.severity,"warn"==n.message.severity,"error"==n.message.severity,"success"==n.message.severity)),e.xp6(3),e.Oqu(n.message.summary),e.xp6(2),e.Oqu(n.message.detail)}}function v(i,r){1&i&&e.GkF(0)}function y(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(a){e.CHM(n);const h=e.oxw();return e.KtG(h.onCloseIconClick(a))})("keydown.enter",function(a){e.CHM(n);const h=e.oxw();return e.KtG(h.onCloseIconClick(a))}),e._UZ(1,"span",11),e.qZA()}}const x=function(i){return[i,"p-toast-message"]},O=function(i,r,n,s){return{showTransformParams:i,hideTransformParams:r,showTransitionParams:n,hideTransitionParams:s}},Z=function(i){return{value:"visible",params:i}},I=function(i){return{$implicit:i}};function A(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"p-toastItem",3),e.NdJ("onClose",function(a){e.CHM(n);const h=e.oxw();return e.KtG(h.onMessageClose(a))})("@toastAnimation.start",function(a){e.CHM(n);const h=e.oxw();return e.KtG(h.onAnimationStart(a))})("@toastAnimation.done",function(a){e.CHM(n);const h=e.oxw();return e.KtG(h.onAnimationEnd(a))}),e.qZA()}if(2&i){const n=r.$implicit,s=r.index,a=e.oxw();e.Q6J("message",n)("index",s)("template",a.template)("@toastAnimation",void 0)("showTransformOptions",a.showTransformOptions)("hideTransformOptions",a.hideTransformOptions)("showTransitionOptions",a.showTransitionOptions)("hideTransitionOptions",a.hideTransitionOptions)}}let M=(()=>{class i{constructor(n){this.zone=n,this.onClose=new e.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(n){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),n.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["p-toastItem"]],viewQuery:function(n,s){if(1&n&&e.Gf(l,5),2&n){let a;e.iGM(a=e.CRH())&&(s.containerViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0,1),e.NdJ("mouseenter",function(){return s.onMouseEnter()})("mouseleave",function(){return s.onMouseLeave()}),e.TgZ(2,"div",2),e.YNc(3,g,7,10,"ng-container",3),e.YNc(4,v,1,0,"ng-container",4),e.YNc(5,y,2,0,"button",5),e.qZA()()),2&n&&(e.Tol(s.message.styleClass),e.Q6J("ngClass",e.VKq(10,x,"p-toast-message-"+s.message.severity))("@messageState",e.VKq(17,Z,e.l5B(12,O,s.showTransformOptions,s.hideTransformOptions,s.showTransitionOptions,s.hideTransitionOptions))),e.uIk("id",s.message.id),e.xp6(2),e.Q6J("ngClass",s.message.contentStyleClass),e.xp6(1),e.Q6J("ngIf",!s.template),e.xp6(1),e.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",e.VKq(19,I,s.message)),e.xp6(1),e.Q6J("ngIf",!1!==s.message.closable))},dependencies:[d.mk,d.O5,d.tP,t.H],encapsulation:2,data:{animation:[(0,o.X$)("messageState",[(0,o.SB)("visible",(0,o.oB)({transform:"translateY(0)",opacity:1})),(0,o.eR)("void => *",[(0,o.oB)({transform:"{{showTransformParams}}",opacity:0}),(0,o.jt)("{{showTransitionParams}}")]),(0,o.eR)("* => void",[(0,o.jt)("{{hideTransitionParams}}",(0,o.oB)({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),c=(()=>{class i{constructor(n,s,a){this.messageService=n,this.cd=s,this.config=a,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new e.vpe,this.id=(0,m.Th)()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(n=>{if(n)if(n instanceof Array){const s=n.filter(a=>this.canAdd(a));this.add(s)}else this.canAdd(n)&&this.add([n])}),this.clearSubscription=this.messageService.clearObserver.subscribe(n=>{n?this.key===n&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(n){this.messages=this.messages?[...this.messages,...n]:[...n],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...n]:[...n]),this.cd.markForCheck()}canAdd(n){let s=this.key===n.key;return s&&this.preventOpenDuplicates&&(s=!this.containsMessage(this.messages,n)),s&&this.preventDuplicates&&(s=!this.containsMessage(this.messagesArchieve,n)),s}containsMessage(n,s){return!!n&&null!=n.find(a=>a.summary===s.summary&&a.detail==s.detail&&a.severity===s.severity)}ngAfterContentInit(){this.templates.forEach(n=>{n.getType(),this.template=n.template})}onMessageClose(n){this.messages.splice(n.index,1),this.onClose.emit({message:n.message}),this.cd.detectChanges()}onAnimationStart(n){"void"===n.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&m.P9.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(n){"void"===n.toState&&this.autoZIndex&&m.gb.isEmpty(this.messages)&&m.P9.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let n="";for(let s in this.breakpoints){let a="";for(let h in this.breakpoints[s])a+=h+":"+this.breakpoints[s][h]+" !important;";n+=`\n                    @media screen and (max-width: ${s}) {\n                        .p-toast[${this.id}] {\n                           ${a}\n                        }\n                    }\n                `}this.styleElement.innerHTML=n}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&m.P9.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(T.ez),e.Y36(e.sBO),e.Y36(T.b4))},i.\u0275cmp=e.Xpm({type:i,selectors:[["p-toast"]],contentQueries:function(n,s,a){if(1&n&&e.Suo(a,T.jx,4),2&n){let h;e.iGM(h=e.CRH())&&(s.templates=h)}},viewQuery:function(n,s){if(1&n&&e.Gf(l,5),2&n){let a;e.iGM(a=e.CRH())&&(s.containerViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0,1),e.YNc(2,A,1,8,"p-toastItem",2),e.qZA()),2&n&&(e.Tol(s.styleClass),e.Q6J("ngClass","p-toast p-component p-toast-"+s.position)("ngStyle",s.style),e.xp6(2),e.Q6J("ngForOf",s.messages))},dependencies:[d.mk,d.sg,d.PC,M],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[(0,o.X$)("toastAnimation",[(0,o.eR)(":enter, :leave",[(0,o.IO)("@*",(0,o.pV)())])])]},changeDetection:0}),i})(),f=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,t.T,T.m8]}),i})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[5150],{6768:(P,g,a)=>{a.d(g,{t:()=>e});var s=a(4650),u=a(7747),y=a(5384),r=a(4006),C=a(2210);let e=(()=>{class p{constructor(d,l){this.commonService=d,this.eventService=l,this.ValueSelectedChange=new s.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#e=this.\u0275fac=function(l){return new(l||p)(s.Y36(u.M),s.Y36(y.P))};static#t=this.\u0275cmp=s.Xpm({type:p,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(l,c){1&l&&(s.TgZ(0,"p-dropdown",0),s.NdJ("onClick",function(){return c.selectedValue()})("onChange",function(){return c.changeValue()})("ngModelChange",function(_){return c.selectedData=_}),s.qZA()),2&l&&s.Q6J("filter",c.Filter)("options",c.data)("ngModel",c.selectedData)},dependencies:[r.JJ,r.On,C.Lt],encapsulation:2})}return p})()},7116:(P,g,a)=>{a.d(g,{R:()=>y});var s=a(4650),u=a(3162);let y=(()=>{class r{constructor(){}static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275cmp=s.Xpm({type:r,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(p,D){1&p&&s._UZ(0,"mat-progress-bar",0)},dependencies:[u.pW],encapsulation:2})}return r})()},5150:(P,g,a)=>{a.r(g),a.d(g,{PayTypeModule:()=>F});var s=a(6895),u=a(9197),y=a(1546),r=a(805);class C{}var e=a(4650),p=a(7747),D=a(5384),d=a(99),l=a(2453),c=a(1383),v=a(5593),_=a(1493),Z=a(1740),f=a(4006),S=a(7116),w=a(6768);function A(n,m){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function M(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e._UZ(1,"p-toast"),e.TgZ(2,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openNew())}),e.qZA()()}}function N(n,m){1&n&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2,"Nombre"),e._UZ(3,"p-sortIcon",20),e.qZA(),e.TgZ(4,"th",21),e._uU(5,"Descripcion "),e._UZ(6,"p-sortIcon",22),e.qZA(),e.TgZ(7,"th",23),e._uU(8,"Tipo "),e._UZ(9,"p-sortIcon",24),e.qZA()())}function E(n,m){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=m.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.type)}}function b(n,m){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function U(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"label",12),e._uU(3,"Tipo"),e.qZA(),e.TgZ(4,"div",13)(5,"app-drop-down",25),e.NdJ("ValueSelectedChange",function(i){e.CHM(t);const h=e.oxw();return e.KtG(h.filterPayTypeGeneric(i))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("IsCreating",!0)("DropDownDataSource",t.payTypeGeneric)}}function I(n,m){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideDialog())}),e.qZA(),e.TgZ(1,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveCostumer())}),e.qZA()}}const B=function(){return{"min-width":"50rem"}},x=function(){return[10,25,50]},J=function(){return{width:"850px"}};let O=(()=>{class n{constructor(t,o,i,h){this.router=t,this.productService=o,this.eventService=i,this.messageService=h,this.payTypeData=[],this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.isLoadingPayGeneric=!0,this.redirect=!1,this.AccessName="/pages/pay-type",this.GetGenericPayTypes(),this.GetPayTypes()}ngOnInit(){const o=this.eventService.getPermisionsException().split(",").map(i=>i.trim());this.redirect=o.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(i=>this.products1=i)}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var t=new C;t.name=null==this.payName?"":this.payName,t.description=null==this.payDescription?"":this.payDescription,t.id=this.payTypeId,t.userId=this.eventService.getToken(),this.AddNewPayType(t)}AddNewPayType(t){this.showProgressBar=!0,this.productService.AddNewPayTypeEnterprise(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El tipo de pago "+t.name+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetPayTypes()):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}filterPayTypeGeneric(t){this.payTypeId=t}GetGenericPayTypes(){this.isLoadingPayGeneric=!0,this.productService.GetGenericPayTypes(this.eventService.getToken()).subscribe(t=>{t.data?this.payTypeGeneric=t.data:this.messageService.add({severity:"error",summary:"Error",detail:"No tiene productos creados",life:3e3}),this.isLoadingPayGeneric=!1})}GetPayTypes(){this.showProgressBar=!0,this.productService.GetPayTypesReport(this.eventService.getToken()).subscribe(t=>{t.data?this.payTypeData=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(u.F0),e.Y36(p.M),e.Y36(D.P),e.Y36(r.ez))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([r.ez])],decls:31,vars:18,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Descripci\xf3n",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","rtn"],["pSortableColumn","description",2,"width","20%"],["field","name"],["pSortableColumn","type",2,"width","20%"],["field","middleName"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(o,i){1&o&&(e.YNc(0,A,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,M,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,N,10,0,"ng-template",7),e.YNc(9,E,7,3,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(T){return i.showDialog=T}),e.YNc(11,b,2,0,"div",0),e.TgZ(12,"div",10),e.YNc(13,U,6,2,"div",0),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Nombre"),e.qZA(),e.TgZ(17,"div",13)(18,"input",14),e.NdJ("ngModelChange",function(T){return i.payName=T}),e.qZA()()(),e.TgZ(19,"div",11)(20,"label",12),e._uU(21,"Descripci\xf3n"),e.qZA(),e.TgZ(22,"div",13)(23,"input",15),e.NdJ("ngModelChange",function(T){return i.payDescription=T}),e.qZA()()(),e.TgZ(24,"div",11),e._UZ(25,"label",12)(26,"div",13),e.qZA(),e.TgZ(27,"div",11),e._UZ(28,"label",12)(29,"div",13),e.qZA()(),e.YNc(30,I,2,0,"ng-template",16),e.qZA()),2&o&&(e.Q6J("ngIf",i.showProgressBar),e.xp6(7),e.Q6J("value",i.payTypeData)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(15,B))("rowsPerPageOptions",e.DdM(16,x)),e.xp6(3),e.Akn(e.DdM(17,J)),e.Q6J("visible",i.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",i.showProgressBar),e.xp6(2),e.Q6J("ngIf",!i.isLoadingPayGeneric),e.xp6(5),e.Q6J("ngModel",i.payName),e.xp6(5),e.Q6J("ngModel",i.payDescription))},dependencies:[s.O5,d.iA,r.jx,d.lQ,d.fz,l.FN,c.o,v.Hq,_.V,Z.o,f.Fj,f.JJ,f.On,S.R,w.t],encapsulation:2})}return n})(),G=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild([{path:"",component:O,canActivate:[y.j]}]),u.Bz]})}return n})();var V=a(4891);let F=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[s.ez,G,d.U$,l.EV,c.V,v.hJ,_.S,Z.j,f.u5,V.E]})}return n})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[6065],{6065:(P,b,n)=>{n.r(b),n.d(b,{ManualReceivableReportModule:()=>z});var e=n(6895),d=n(9197),f=n(5861),u=n(6624),T=n(805),h=n(6166),g=n(4159),v=n.n(g),m=n(574),t=n(4650),a=n(5384),c=n(7747),i=n(5593),Z=n(7116),U=n(2496),x=n(1383),F=n(2453),H=n(302);function N(l,S){1&l&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function G(l,S){if(1&l&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"lempira"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"lempira"),t.qZA()()),2&l){const o=S.$implicit;t.xp6(2),t.Oqu(o.wareHouse),t.xp6(2),t.Oqu(o.customer),t.xp6(2),t.Oqu(o.user),t.xp6(2),t.Oqu(o.movementType),t.xp6(2),t.Oqu(o.reference),t.xp6(2),t.Oqu(o.description),t.xp6(2),t.Oqu(t.xi3(15,9,o.date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.lcZ(18,12,o.facturaAlCredito)),t.xp6(3),t.Oqu(t.lcZ(21,14,o.cobros))}}let Q=(()=>{class l{constructor(o,r,s){this.eventService=o,this.productService=r,this.messageService=s,this.manualMovements=[]}handleSearchCriteria(o){var r=new u.C(o.initialDate,o.finalDate,o.selectedUser,o.selectedBranch,this.eventService.getToken());this.GetReport(r)}GetReport(o){this.isLoading=!0,this.productService.GetManualMovementReport(o).subscribe(r=>{this.manualMovements=[],r.data?this.manualMovements=r.data:this.messageService.add({severity:"info",summary:"Error",detail:r.message,life:3e3}),this.isLoading=!1},r=>{this.messageService.add({severity:"error",summary:"Error",detail:`Error in GetManualMovementReport: ${r.status} - ${r.message||r.error}`,life:3e3}),this.isLoading=!1})}printReport(){var o=this;return(0,f.Z)(function*(){o.messageService.add({severity:"info",summary:"Info",detail:"El reporte se esta generando, favor espere",life:3e3}),o.isLoading=!0;const r=document.getElementById("print-section"),s=new h.ZP("p","pt","a4"),C={background:"white",scale:3},p=s.internal.pageSize.getWidth(),E=s.internal.pageSize.getHeight(),_={top:15,bottom:15,left:15,right:15},I=p-_.left-_.right,D=E-_.top-_.bottom;function j(M,B,y){B.addImage(M,"PNG",_.left,y,I,0,void 0,"FAST")}try{const M=yield v()(r,C),y=(M.toDataURL("image/png"),M.width),A=y/I;let R=M.height/A,q=_.top,J=1;for(;R>0;){const w=Math.min(D,R),O=document.createElement("canvas"),X=O.getContext("2d");O.width=y,O.height=w*A,X.drawImage(M,0,(J-1)*D*A,y,w*A,0,0,y,w*A),j(O.toDataURL("image/png"),s,q),R-=D,q=_.top,R>0&&(s.addPage(),J++)}const $=s.output("blob"),V=URL.createObjectURL($);o.isLoading=!1,window.open(V,"_blank")}catch(M){console.error("Error generando PDF:",M),o.isLoading=!1}})()}exportToExcel(){const r=[["Empresa","Cliente","Usuario","Tipo de Movimiento","Referencia","Descripcion","Fecha","Factura al Credito","Cobro"]];this.manualMovements.forEach(p=>{r.push([p.wareHouse,p.customer,p.user,p.movementType,p.reference,p.description,p.date,p.facturaAlCredito,p.cobros])});const s=m.P6.aoa_to_sheet(r),C=m.P6.book_new();m.P6.book_append_sheet(C,s,"Detalle de Movimientos Manuales"),m.NC(C,"MovimientosManualesReporte.xlsx")}getTotalFacturaAlCredito(){return this.manualMovements.reduce((o,r)=>o+r.facturaAlCredito,0)}getTotalCobros(){return this.manualMovements.reduce((o,r)=>o+r.cobros,0)}static#t=this.\u0275fac=function(r){return new(r||l)(t.Y36(a.P),t.Y36(c.M),t.Y36(T.ez))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-manualreceivable-report"]],features:[t._Bn([T.ez])],decls:48,vars:11,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],[3,"dateInDays","showDate","searchCriteria"],["id","print-section",1,"receivable-report-container"],[2,"display","flex","justify-content","center","align-items","center","height","100%"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"total-row"],["colspan","7"],[2,"margin-top","20px"],["styleClass","mb-4"],[1,"my-2"],["printSectionId","PrintFull","pButton","","pRipple","","label","imprimir","icon","pi pi-print",1,"p-button-help",3,"click"],["pButton","","pRipple","","label","Exportar a Excel","icon","pi pi-cloud-download",1,"p-button-success","mr-2",2,"margin-left","10px",3,"disabled","click"]],template:function(r,s){1&r&&(t.YNc(0,N,2,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p-toast"),t.TgZ(5,"app-header-report-filter",4),t.NdJ("searchCriteria",function(p){return s.handleSearchCriteria(p)}),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"h4"),t._uU(9,"Reporte Movimientos manuales"),t.qZA()(),t.TgZ(10,"div",7)(11,"table")(12,"thead")(13,"tr")(14,"th"),t._uU(15,"Empresa"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Cliente"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Usuario"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Tipo de Movimiento"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Referencia"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Descripcion"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Fecha"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Factura Al Credito"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Cobros"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,G,22,16,"tr",8),t.TgZ(34,"tr",9)(35,"td",10),t._uU(36,"Totales"),t.qZA(),t.TgZ(37,"td"),t._uU(38),t.ALo(39,"lempira"),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.ALo(42,"lempira"),t.qZA()()()()()()()()(),t._UZ(43,"div",11),t.TgZ(44,"p-toolbar",12)(45,"div",13)(46,"button",14),t.NdJ("click",function(){return s.printReport()}),t.qZA(),t.TgZ(47,"button",15),t.NdJ("click",function(){return s.exportToExcel()}),t.qZA()()()),2&r&&(t.Q6J("ngIf",s.isLoading),t.xp6(5),t.Q6J("dateInDays",!0)("showDate",!0),t.xp6(28),t.Q6J("ngForOf",s.manualMovements),t.xp6(5),t.Oqu(t.lcZ(39,7,s.getTotalFacturaAlCredito())),t.xp6(3),t.Oqu(t.lcZ(42,9,s.getTotalCobros())),t.xp6(6),t.Q6J("disabled",!s.manualMovements||0===s.manualMovements.length))},dependencies:[e.sg,e.O5,i.Hq,Z.R,U.F,x.o,F.FN,e.uU,H.E],styles:["[_nghost-%COMP%] {\n  --primary-color: #023b78;\n  --secondary-color: #1565bb;\n  --background-color: #f0f8ff;\n  --text-color: #333;\n  --border-color: #ccc;\n  --hover-color: #e9ecef;\n  font-family: 'Arial', sans-serif;\n  color: var(--text-color);\n  padding: 20px;\n}\n\n.table-container[_ngcontent-%COMP%] {\n  overflow-x: auto;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n}\n\ntable[_ngcontent-%COMP%] {\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n  background-color: white;\n}\n\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n  padding: 12px 15px;\n  text-align: left;\n  border-bottom: 1px solid var(--border-color);\n  border-right: 1px solid var(--border-color);\n}\n\nth[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child {\n  border-right: none;\n}\n\nth[_ngcontent-%COMP%] {\n  background-color: var(--primary-color);\n  color: white;\n  font-weight: normal;\n  text-transform: uppercase;\n}\n\ntr[_ngcontent-%COMP%]:nth-child(even):not(.total-row) {\n  background-color: var(--background-color);\n}\n\ntr[_ngcontent-%COMP%]:not(.total-row):hover {\n  background-color: var(--hover-color);\n}\n\n.total-row[_ngcontent-%COMP%] {\n  font-weight: bold;\n  background-color: var(--secondary-color) !important;\n  color: white;\n}\n\n.total-row[_ngcontent-%COMP%]:hover {\n  background-color: var(--secondary-color) !important;\n}\n\n.total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  border-bottom: none;\n}"]})}return l})(),W=(()=>{class l{static#t=this.\u0275fac=function(r){return new(r||l)};static#e=this.\u0275mod=t.oAB({type:l});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild([{path:"",component:Q}]),d.Bz]})}return l})();var L=n(4006),Y=n(9585),k=n(4891);let z=(()=>{class l{static#t=this.\u0275fac=function(r){return new(r||l)};static#e=this.\u0275mod=t.oAB({type:l});static#n=this.\u0275inj=t.cJS({imports:[e.ez,W,L.u5,i.hJ,Y.xD,L.u5,k.E,x.V,F.EV]})}return l})()},7116:(P,b,n)=>{n.d(b,{R:()=>f});var e=n(4650),d=n(3162);let f=(()=>{class u{constructor(){}static#t=this.\u0275fac=function(g){return new(g||u)};static#e=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(g,v){1&g&&e._UZ(0,"mat-progress-bar",0)},dependencies:[d.pW],encapsulation:2})}return u})()},1383:(P,b,n)=>{n.d(b,{V:()=>t,o:()=>m});var e=n(4650),d=n(6895),f=n(805);function u(a,c){1&a&&e.GkF(0)}function T(a,c){if(1&a&&(e.TgZ(0,"div",3),e.YNc(1,u,1,0,"ng-container",4),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.leftTemplate)}}function h(a,c){1&a&&e.GkF(0)}function g(a,c){if(1&a&&(e.TgZ(0,"div",5),e.YNc(1,h,1,0,"ng-container",4),e.qZA()),2&a){const i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.rightTemplate)}}const v=["*"];let m=(()=>{class a{constructor(i){this.el=i}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(i=>{switch(i.getType()){case"left":this.leftTemplate=i.template;break;case"right":this.rightTemplate=i.template}})}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(e.SBq))},a.\u0275cmp=e.Xpm({type:a,selectors:[["p-toolbar"]],contentQueries:function(i,Z,U){if(1&i&&e.Suo(U,f.jx,4),2&i){let x;e.iGM(x=e.CRH())&&(Z.templates=x)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:v,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(i,Z){1&i&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.YNc(2,T,2,1,"div",1),e.YNc(3,g,2,1,"div",2),e.qZA()),2&i&&(e.Tol(Z.styleClass),e.Q6J("ngClass","p-toolbar p-component")("ngStyle",Z.style),e.xp6(2),e.Q6J("ngIf",Z.leftTemplate),e.xp6(1),e.Q6J("ngIf",Z.rightTemplate))},dependencies:[d.mk,d.O5,d.tP,d.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),a})(),t=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez]}),a})()},5861:(P,b,n)=>{function e(f,u,T,h,g,v,m){try{var t=f[v](m),a=t.value}catch(c){return void T(c)}t.done?u(a):Promise.resolve(a).then(h,g)}function d(f){return function(){var u=this,T=arguments;return new Promise(function(h,g){var v=f.apply(u,T);function m(a){e(v,h,g,m,t,"next",a)}function t(a){e(v,h,g,m,t,"throw",a)}m(void 0)})}}n.d(b,{Z:()=>d})}}]);
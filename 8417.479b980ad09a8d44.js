"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[8417],{8417:(T,d,a)=>{a.r(d),a.d(d,{XReportModule:()=>R});var u=a(6895),l=a(9197),p=a(805),e=a(4650),f=a(7747),y=a(5384),s=a(4006),m=a(5593),g=a(1493);const x=function(){return{standalone:!0}};function b(n,h){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"p",12),e._uU(3),e.qZA(),e.TgZ(4,"div",13)(5,"input",14),e.NdJ("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.change())})("ngModelChange",function(o){const c=e.CHM(t).$implicit;return e.KtG(c.total=o)}),e.qZA()()()()}if(2&n){const t=h.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("ngModelOptions",e.DdM(3,x))("ngModel",t.total)}}function v(n,h){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.GenerateXReport=!1)}),e.qZA(),e.TgZ(1,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmGenerateXReport())}),e.qZA()}}const C=function(){return{width:"450px"}};let _=(()=>{class n{constructor(t,r,o,i){this.router=t,this.productService=r,this.messageService=o,this.eventService=i,this.PayTypes=[],this.GenerateXReport=!1,this.closeReport={userId:"",commentsBySales:"",commentsByAccounting:"",details:[]}}ngOnInit(){this.GetPayTypesValuesByEnterprise(),this.closeReport.userId=this.eventService.getToken()}change(){}handleButtonClick(){this.GenerateXReport=!0}confirmGenerateXReport(){this.GenerateXReport=!1,this.addDetail()}addDetail(){this.PayTypes.forEach(t=>{this.closeReport.details.push({type:1,amount:t.total,name:t.name})}),this.save()}save(){this.productService.AddXReport(this.closeReport).subscribe(t=>{this.messageService.add(t.data?{severity:"success",summary:"Success",detail:"Reporte cerrado exitosamente",life:3e3}:{severity:"error",summary:"Error",detail:"No se pudo cerrar el reporte",life:3e3})})}GetPayTypesValuesByEnterprise(){this.productService.GetPayTypesValues(this.eventService.getToken()).subscribe(t=>{t.data?(this.PayTypes=t.data,console.log(this.PayTypes)):this.messageService.add({severity:"error",summary:"Error",detail:"No tiene tipos de pago creados",life:3e3})})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(l.F0),e.Y36(f.M),e.Y36(p.ez),e.Y36(y.P))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([p.ez])],decls:19,vars:7,consts:[[1,"container"],[1,"title"],[4,"ngFor","ngForOf"],[1,"form-group"],["for","commentsBySales"],["id","commentsBySales","placeholder","Comentarios adicionales...",1,"form-control","textarea-styleNewPay",3,"ngModel","ngModelChange"],[1,"styled-button",3,"click"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["pTemplate","footer"],[1,"row","align-items-center","payment-row"],[1,"col-12","payment-name"],[1,"col-6"],["min","0","type","number",1,"input-styleNewPay","form-control",3,"ngModelOptions","ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Si",1,"p-button-text",3,"click"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Cierre X"),e.qZA(),e.YNc(3,b,6,4,"div",2),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Comentarios"),e.qZA(),e.TgZ(7,"textarea",5),e.NdJ("ngModelChange",function(c){return o.closeReport.commentsBySales=c}),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return o.handleButtonClick()}),e._uU(9,"Generar Cierre"),e.qZA()(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(c){return o.GenerateXReport=c}),e.TgZ(11,"div",8),e._UZ(12,"i",9),e.TgZ(13,"span")(14,"b"),e._uU(15,"Esta seguro que desea generar un reporte X?"),e.qZA(),e._UZ(16,"br"),e._uU(17,"Esta acci\xf3n bloqueara su talonario de facturas hasta que su administrador apruebe su reporte"),e.qZA()(),e.YNc(18,v,2,0,"ng-template",10),e.qZA()),2&r&&(e.xp6(3),e.Q6J("ngForOf",o.PayTypes),e.xp6(4),e.Q6J("ngModel",o.closeReport.commentsBySales),e.xp6(3),e.Akn(e.DdM(6,C)),e.Q6J("visible",o.GenerateXReport)("modal",!0))},dependencies:[u.sg,s.Fj,s.wV,s.JJ,s.qQ,s.On,m.Hq,g.V,p.jx],styles:[".container[_ngcontent-%COMP%] {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 8px;\n}\n\n.title[_ngcontent-%COMP%] {\n  font-size: 1.5em;\n  font-weight: 700;\n  color: #2c3e50;\n  text-align: center;\n  margin-bottom: 5px;\n}\n\n.payment-row[_ngcontent-%COMP%] {\n  background-color: #f5f7fa;\n  border: 1px solid #dce1e7;\n  border-radius: 8px;\n  padding: 10px;\n  margin-bottom: 10px;\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.payment-row[_ngcontent-%COMP%]:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 16px rgba(0, 123, 255, 0.5);\n}\n\n.payment-name[_ngcontent-%COMP%] {\n  font-size: 1.2em;\n  font-weight: 600;\n  color: #2c3e50;\n  margin: 0;\n}\n\n.input-styleNewPay[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #b3c6e0;\n  border-radius: 4px;\n  color: #2c3e50;\n}\n\n.input-styleNewPay[_ngcontent-%COMP%]:focus, .textarea-styleNewPay[_ngcontent-%COMP%]:focus {\n  border-color: #007bff;  \n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.25);\n}\n\n.input-styleNewPay[_ngcontent-%COMP%]:hover, .textarea-styleNewPay[_ngcontent-%COMP%]:hover {\n  box-shadow: 0 8px 16px rgba(0, 123, 255, 0.5);\n}\n\n.styled-button[_ngcontent-%COMP%] {\n  display: block;\n  width: 100%;\n  padding: 10px;\n  background-color: #007bff;\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  font-size: 1em;\n  font-weight: 600;\n  text-align: center;\n  cursor: pointer;\n  transition: background-color 0.3s ease, box-shadow 0.3s ease;\n  margin-top: 20px;\n}\n\n.styled-button[_ngcontent-%COMP%]:hover {\n  background-color: #0056b3;\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\n}\n\n.textarea-styleNewPay[_ngcontent-%COMP%] {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #b3c6e0;\n  border-radius: 4px;\n  color: #2c3e50;\n  resize: vertical;\n}\n\n.textarea-styleNewPay[_ngcontent-%COMP%]:focus {\n  border-color: #007bff;  \n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.25);\n}"]})}return n})(),M=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[l.Bz.forChild([{path:"",component:_}]),l.Bz]})}return n})();var P=a(4891);let R=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.ez,M,s.u5,m.hJ,P.E,g.S]})}return n})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[3282],{3282:(it,m,o)=>{o.r(m),o.d(m,{TalonarioModule:()=>ot});var c=o(9808),g=o(7449),C=o(1546),t=o(5e3),d=o(9783),A=o(4266),P=o(1726),x=o(7747),S=o(5384),U=o(478),u=o(8952),h=o(845),v=o(1424),f=o(5787),T=o(7773),Z=o(5315);const F=["filter"];function Q(i,a){1&i&&(t.TgZ(0,"div")(1,"h4")(2,"FONT",14),t._uU(3,"Producto agregado de forma correcta!!! "),t.qZA()()())}function M(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),l=t.MAs(7);return t.KtG(r.clear(l))}),t.qZA(),t.TgZ(2,"span",17),t._UZ(3,"i",18),t.TgZ(4,"input",19,20),t.NdJ("input",function(r){t.CHM(e);const l=t.oxw(),s=t.MAs(7);return t.KtG(l.onGlobalFilter(s,r))}),t.qZA()()()}}function N(i,a){1&i&&(t.TgZ(0,"tr")(1,"th")(2,"div",21),t._uU(3," Nombre "),t._UZ(4,"p-columnFilter",22),t.qZA()(),t.TgZ(5,"th")(6,"div",21),t._uU(7," Actual Correlativo "),t._UZ(8,"p-columnFilter",23),t.qZA()(),t.TgZ(9,"th")(10,"div",21),t._uU(11," Correlativo Inicial "),t._UZ(12,"p-columnFilter",24),t.qZA()(),t.TgZ(13,"th")(14,"div",21),t._uU(15," Correlativo Final "),t._UZ(16,"p-columnFilter",24),t.qZA()(),t.TgZ(17,"th")(18,"div",21),t._uU(19," Fecha Inicial "),t._UZ(20,"p-columnFilter",24),t.qZA()(),t.TgZ(21,"th")(22,"div",21),t._uU(23," Fecha Final "),t._UZ(24,"p-columnFilter",24),t.qZA()(),t.TgZ(25,"th")(26,"div",21),t._uU(27," CAI "),t._UZ(28,"p-columnFilter",25),t.qZA()()())}function D(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",28),t._uU(10),t.qZA(),t.TgZ(11,"td",28),t._uU(12),t.qZA(),t.TgZ(13,"td",28),t._uU(14),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.actualCorrelative," "),t.xp6(2),t.hij(" ",e.initialCorrelative," "),t.xp6(2),t.hij(" ",e.finalCorrelative," "),t.xp6(2),t.hij(" ",e.initialDate," "),t.xp6(2),t.hij(" ",e.finalDate," "),t.xp6(2),t.hij(" ",e.cai," ")}}function B(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"No se encontraron correlativos."),t.qZA()())}function O(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"Obteniendo los correlativos... Espere..."),t.qZA()())}function j(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showAddCorrelative=!1)}),t.qZA()}}const I=function(){return["name","categoryName","productPrice","status"]},J=function(){return{width:"850px"}};let L=(()=>{class i{constructor(e,n,r,l){this.customerService=e,this.productService=n,this.messageService=r,this.eventService=l,this.ProductToInvoiceSelected=new t.vpe,this.CorrelativeList=[],this.showAddCorrelative=!1,this.showProductAdded=!1,this.defaultProductQuantity=1,this.addProductDialog=!1,this.customers1=[],this.showProgressBar=!1,this.selectedCustomers1=[],this.selectedCustomer={},this.representatives=[],this.loading=!0,this.value()}ngOnChanges(e){}ngOnInit(){this.customerService.getCustomersLarge().then(e=>{this.customers1=e,this.loading=!1,this.customers1.forEach(n=>n.date=new Date(n.date))})}onSort(){this.updateRowGroupMetaData()}updateRowGroupMetaData(){this.rowGroupMetadata={}}confirmQuantity(){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}selectProduct(e){this.showProductAdded=!1,this.addProductDialog=!0,this.productSelected=e}formatCurrency(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(e,n){e.filterGlobal(n.target.value,"contains")}changeQuantity(e){this.currentQuantity=e}clear(e){e.clear(),this.filter.nativeElement.value=""}keyEnterPress(e){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}cancelAddQuantityDialog(){this.showProductAdded=!1,this.currentQuantity=void 0,this.addProductDialog=!1}emitProductDTO(){var e,n,r,l;this.showProductAdded=!0;var s=new A.i;s.id=null===(e=this.productSelected)||void 0===e?void 0:e.productId,s.name=null===(n=this.productSelected)||void 0===n?void 0:n.productName,s.code=null===(r=this.productSelected)||void 0===r?void 0:r.productName,s.quantity=this.currentQuantity,s.price=null===(l=this.productSelected)||void 0===l?void 0:l.productPrice,s.total=s.price*this.currentQuantity,this.productSelected=void 0,this.currentQuantity=void 0,this.ProductToInvoiceSelected.emit(s)}value(){this.productService.getCorrelative(this.eventService.getToken()).subscribe(e=>{e.data?this.CorrelativeList=e.data:this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3}),this.showProgressBar=!1},e=>{this.showProgressBar=!1,this.messageService.add({severity:"error",summary:"Error",detail:e,life:3e3})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(P.v),t.Y36(x.M),t.Y36(d.ez),t.Y36(S.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(F,5),2&e){let r;t.iGM(r=t.CRH())&&(n.filter=r.first)}},inputs:{productsToShow:"productsToShow"},outputs:{ProductToInvoiceSelected:"ProductToInvoiceSelected"},features:[t._Bn([d.ez,d.YP]),t.TTD],decls:17,vars:13,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["dataKey","pointOfSaleId","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","",3,"visible","modal","visibleChange"],["pTemplate","footer"],["COLOR","green"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","name","display","menu","placeholder","Buscar por codigo"],["type","text","field","cai","display","menu","placeholder","Buscar por nombre"],["type","text","field","cai","display","menu","placeholder","Buscar por precio"],["type","text","field","cai","display","menu","placeholder","Buscar por categoria"],[2,"min-width","12rem"],[2,"min-width","14rem"],[2,"min-width","10rem"],["colspan","7"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,Q,4,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p-toast"),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.showAddCorrelative=!0}),t.qZA(),t.TgZ(6,"p-table",5,6),t.YNc(8,M,6,0,"ng-template",7),t.YNc(9,N,29,0,"ng-template",8),t.YNc(10,D,15,7,"ng-template",9),t.YNc(11,B,3,0,"ng-template",10),t.YNc(12,O,3,0,"ng-template",11),t.qZA()()(),t.TgZ(13,"p-dialog",12),t.NdJ("visibleChange",function(l){return n.showAddCorrelative=l}),t.TgZ(14,"div"),t._UZ(15,"app-sar-correlative"),t.qZA(),t.YNc(16,j,1,0,"ng-template",13),t.qZA()()),2&e&&(t.Q6J("ngIf",n.showProductAdded),t.xp6(6),t.Q6J("value",n.CorrelativeList)("rows",10)("loading",n.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",t.DdM(11,I)),t.xp6(7),t.Akn(t.DdM(12,J)),t.Q6J("visible",n.showAddCorrelative)("modal",!0))},dependencies:[c.O5,U.y,u.iA,d.jx,u.xl,h.Hq,v.o,f.H,T.FN,Z.V],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}form[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;width:50%}"]}),i})(),Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild([{path:"",component:L,canActivate:[C.j]}]),g.Bz]}),i})();var b=o(4891),G=o(7531),y=o(7010),w=o(5652),E=o(3954),H=o(6198),R=o(7376),z=o(6186),p=o(3075),K=o(8185),$=o(4036),X=o(6526),V=o(2841),W=o(4776),q=o(8018),k=o(5899),_=o(4107),tt=o(2978),et=o(5245);let ot=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez,Y,b.E,G.c,u.U$,y.L$,et.Ps,tt.lN,_.LD,k.Cv,p.u5,c.ez,p.u5,q.Xt,h.hJ,W.JH,v.j,V.KZ,f.T,X.q4,$.kW,K.q,T.EV,Z.S,y.L$,p.UX,z.K,R.x,H.L,E.N6,w._8]}),i})()}}]);
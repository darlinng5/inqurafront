"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[464],{6768:(ce,te,A)=>{A.d(te,{t:()=>Z});var M=A(5e3),C=A(7747),ne=A(5384),K=A(3075),ie=A(4036);let Z=(()=>{class e{constructor(D,B){this.commonService=D,this.eventService=B,this.ValueSelectedChange=new M.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){var D;this.ValueSelected=null===(D=this.selectedData)||void 0===D?void 0:D.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){var D;this.ValueSelected=null===(D=this.selectedData)||void 0===D?void 0:D.value,this.ValueSelectedChange.emit(this.ValueSelected)}}return e.\u0275fac=function(D){return new(D||e)(M.Y36(C.M),M.Y36(ne.P))},e.\u0275cmp=M.Xpm({type:e,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(D,B){1&D&&(M.TgZ(0,"p-dropdown",0),M.NdJ("onClick",function(){return B.selectedValue()})("onChange",function(){return B.changeValue()})("ngModelChange",function(se){return B.selectedData=se}),M.qZA()),2&D&&M.Q6J("filter",B.Filter)("options",B.data)("ngModel",B.selectedData)},dependencies:[K.JJ,K.On,ie.Lt],encapsulation:2}),e})()},464:(ce,te,A)=>{A.r(te),A.d(te,{InventoryModule:()=>d});var M=A(9808),C=A(7449),ne=A(1546),K=A(9783);class ie{}var Z=A(5108),e=A(5e3),k=A(520),D=A(7747),B=A(5384),I=A(5315),se=A(7010),Q=A(3075),Te=A(845),Y=A(7116),me=A(6768),V=A(7773),ve=A(3407);function Se(a,o){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function xe(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",29),e.NdJ("ValueSelectedChange",function(s){e.CHM(i);const f=e.oxw(2);return e.KtG(f.filterProduct(s))}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!0)("DropDownDataSource",i.products)}}function U(a,o){1&a&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function Ae(a,o){if(1&a){const i=e.EpF();e.YNc(0,xe,5,3,"div",18),e.YNc(1,U,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Precio de Compra"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=s)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=s)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Precio de Venta"),e.qZA(),e.TgZ(15,"p-inputNumber",22),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.priceSale=s)}),e.qZA()()(),e.TgZ(16,"div",19)(17,"div",20)(18,"label",25),e._uU(19,"Descripci\xf3n"),e.qZA(),e.TgZ(20,"textarea",26),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=s)}),e.qZA()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",i.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.priceSale),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.description)}}function ke(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.postTransaccion(s.inventoryTransaccion))}),e.qZA()}}function de(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Sucursales"),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",32),e.NdJ("ValueSelectedChange",function(s){e.CHM(i);const f=e.oxw(2);return e.KtG(f.filterWareHouse(s))}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!1)("DropDownDataSource",i.wareHouseDropDown)}}function re(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",29),e.NdJ("ValueSelectedChange",function(s){e.CHM(i);const f=e.oxw(2);return e.KtG(f.filterProduct(s))}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.Q6J("IsCreating",!1)("showFilter",!0)("DropDownDataSource",i.products)}}function q(a,o){1&a&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function ge(a,o){if(1&a){const i=e.EpF();e.YNc(0,de,5,3,"div",18),e.YNc(1,re,5,3,"div",18),e.YNc(2,q,3,0,"div",0),e.TgZ(3,"div",19)(4,"div",20)(5,"label",23),e._uU(6,"Cantidad"),e.qZA(),e.TgZ(7,"p-inputNumber",24),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=s)}),e.qZA()()(),e._UZ(8,"div",19),e.TgZ(9,"div",19)(10,"div",20)(11,"label",25),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"textarea",26),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=s)}),e.qZA()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.quantity),e.xp6(6),e.Q6J("ngModel",i.inventoryTransaccion.description)}}function ye(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.postTransaccion(s.inventoryTransaccion))}),e.qZA()}}function be(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",33),e.NdJ("ValueSelectedChange",function(s){e.CHM(i);const f=e.oxw(2);return e.KtG(f.filterProduct(s))}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",i.products)}}function Ce(a,o){1&a&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function H(a,o){if(1&a){const i=e.EpF();e.YNc(0,be,5,3,"div",18),e.YNc(1,Ce,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=s)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=s)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",26),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=s)}),e.qZA()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",i.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.description)}}function we(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.postTransaccion(s.inventoryTransaccion))}),e.qZA()}}function Re(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"div",27)(1,"label",28),e._uU(2,"Productos "),e.qZA(),e._UZ(3,"label",28),e.TgZ(4,"app-drop-down",33),e.NdJ("ValueSelectedChange",function(s){e.CHM(i);const f=e.oxw(2);return e.KtG(f.filterProduct(s))}),e.qZA()()}if(2&a){const i=e.oxw(2);e.xp6(4),e.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",i.products)}}function Me(a,o){1&a&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Cargando los productos, espere..."),e.qZA()())}function Ue(a,o){if(1&a){const i=e.EpF();e.YNc(0,Re,5,3,"div",18),e.YNc(1,Me,3,0,"div",0),e.TgZ(2,"div",19)(3,"div",20)(4,"label",21),e._uU(5,"Costo individual"),e.qZA(),e.TgZ(6,"p-inputNumber",22),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.buyCost=s)}),e.qZA()(),e.TgZ(7,"div",20)(8,"label",23),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"p-inputNumber",24),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.quantity=s)}),e.qZA()()(),e.TgZ(11,"div",19)(12,"div",20)(13,"label",25),e._uU(14,"Descripci\xf3n"),e.qZA(),e.TgZ(15,"textarea",26),e.NdJ("ngModelChange",function(s){e.CHM(i);const f=e.oxw();return e.KtG(f.inventoryTransaccion.description=s)}),e.qZA()()()}if(2&a){const i=e.oxw();e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.buyCost),e.xp6(4),e.Q6J("ngModel",i.inventoryTransaccion.quantity),e.xp6(5),e.Q6J("ngModel",i.inventoryTransaccion.description)}}function fe(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.postTransaccion(s.inventoryTransaccion))}),e.qZA()}}const r=function(){return{width:"2.5rem",height:"2.5rem"}},t=function(){return{width:"650px"}};let n=(()=>{class a{constructor(i,p,s,f,w){this.router=i,this.http=p,this.productService=s,this.eventService=f,this.messageService=w,this.wareHouseSelectd="0",this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1,this.inventoryTransaccion=new ie,this.isLoading=!1,this.showTransferDialog=!1,this.redirect=!1,this.AccessName="/pages/inventory",this.getProductValues(),this.GetWareHouseByRole()}ngOnInit(){this.wareHouseSelectd="0";const p=this.eventService.getPermisionsException().split(",").map(s=>s.trim());this.redirect=p.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized")}setInventaryTransaction(i){"Buy"==i?(this.transaccionInventaryType="Buy",this.showBuyDialog=!0):"AdjustmentAdd"==i?(this.transaccionInventaryType="AdjustmentAdd",this.showAddDialog=!0):"AdjustmentReduce"==i?(this.transaccionInventaryType="AdjustmentReduce",this.showReduceDialog=!0):"Shared"==i&&(this.transaccionInventaryType="Shared",this.showTransferDialog=!0)}hideDialog(){this.transaccionInventaryType="",this.showBuyDialog=!1,this.showAddDialog=!1,this.showReduceDialog=!1,this.showTransferDialog=!1}getProductValues(){this.isLoading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(i=>{i.data&&(this.products=i.data),this.isLoading=!1})}filterProduct(i){this.inventoryTransaccion.productId=i}postTransaccion(i){this.isLoading=!0,this.inventoryTransaccion.productId=null==this.inventoryTransaccion.productId?0:this.inventoryTransaccion.productId,this.inventoryTransaccion.buyCost=null==i.buyCost?0:i.buyCost,this.inventoryTransaccion.priceSale=null==i.priceSale?0:i.priceSale,this.inventoryTransaccion.quantity=null==i.quantity?0:i.quantity,this.inventoryTransaccion.transaccionType=null==this.transaccionInventaryType?"":this.transaccionInventaryType,this.inventoryTransaccion.wareHouse=this.wareHouseSelectd,this.inventoryTransaccion.description=null==i.description?"":i.description,this.inventoryTransaccion.userId=this.eventService.getToken(),this.hideDialog(),console.log(this.inventoryTransaccion),this.productService.AddProductTransaccion(this.inventoryTransaccion).subscribe(p=>{this.messageService.add(p.data?{severity:"success",summary:"Success",detail:"Se ha guardado de forma correcta",life:3e3}:{severity:"error",summary:"error",detail:p.message,life:3e3}),this.isLoading=!1})}startRecording(){navigator.mediaDevices.getUserMedia({audio:!0}).then(i=>{this.recorder=new Z(i,{type:"audio",mimeType:"audio/wav"}),this.recorder.startRecording()})}stopRecording(){this.recorder.stopRecording(()=>{const i=this.recorder.getBlob(),p=URL.createObjectURL(i);console.log(p),console.log("Tama\xf1o del audioBlob:",i.size);const s=new FormData;s.append("audioStream",i,"audio.wav"),fetch("http://localhost:5134/api/Product/PostAudio",{method:"GET",body:s}).then(f=>{if(f.ok)return f.json();throw new Error("Error en la solicitud")}).then(f=>{console.log("Respuesta:",f)}).catch(f=>{console.error("Error en la solicitud:",f)})})}filterWareHouse(i){this.wareHouseSelectd=i}GetWareHouseByRole(){this.productService.GetWareHouseByRoleValues(this.eventService.getToken()).subscribe(i=>{i.data&&(this.wareHouseDropDown=i.data,this.wareHouseDropDown=this.wareHouseDropDown.filter(p=>"0"!==p.value)),this.isLoading=!1})}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(C.F0),e.Y36(k.eN),e.Y36(D.M),e.Y36(B.P),e.Y36(K.ez))},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],features:[e._Bn([K.ez])],decls:59,vars:29,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12","lg:col-6","xl:col-3",3,"click"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-plus-circle","text-green-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"pi","pi-share-alt","text-orange-500","text-xl"],[1,"pi","pi-minus-circle","text-red-500","text-xl"],["header","Agregar Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Transferir Inventario",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Ajuste de inventario: Agregar",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Ajuste de inventario: Rebajar",1,"p-fluid",3,"visible","modal","visibleChange"],["class","field",4,"ngIf"],[1,"formgrid","grid"],[1,"field","col"],["for","price"],["id","price","mode","currency","currency","LPS","locale","en-US",3,"ngModel","ngModelChange"],["for","quantity"],["id","quantity",3,"ngModel","ngModelChange"],["for","productPrice"],["id","description","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"field"],["for","status"],[3,"IsCreating","showFilter","DropDownDataSource","ValueSelectedChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[2,"width","100%",3,"IsCreating","showFilter","DropDownDataSource","ValueSelectedChange"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"]],template:function(i,p){1&i&&(e.YNc(0,Se,2,0,"div",0),e._UZ(1,"p-toast"),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return p.setInventaryTransaction("Buy")}),e.TgZ(4,"div",3)(5,"div",4)(6,"div")(7,"span",5),e._uU(8,"Compras"),e.qZA()(),e.TgZ(9,"div",6),e._UZ(10,"i",7),e.qZA()(),e.TgZ(11,"span",8),e._uU(12,"Agregar"),e.qZA(),e._UZ(13,"span",9),e.qZA()(),e.TgZ(14,"div",2),e.NdJ("click",function(){return p.setInventaryTransaction("Shared")}),e.TgZ(15,"div",3)(16,"div",4)(17,"div")(18,"span",5),e._uU(19,"Tranferencias"),e.qZA()(),e.TgZ(20,"div",6),e._UZ(21,"i",10),e.qZA()(),e.TgZ(22,"span",8),e._uU(23,"Transferir"),e.qZA(),e._UZ(24,"span",9),e.qZA()(),e.TgZ(25,"div",2),e.NdJ("click",function(){return p.setInventaryTransaction("AdjustmentAdd")}),e.TgZ(26,"div",3)(27,"div",4)(28,"div")(29,"span",5),e._uU(30,"Ajuste:Agregar"),e.qZA()(),e.TgZ(31,"div",6),e._UZ(32,"i",7),e.qZA()(),e.TgZ(33,"span",8),e._uU(34,"Agregar"),e.qZA(),e._UZ(35,"span",9),e.qZA()(),e.TgZ(36,"div",2),e.NdJ("click",function(){return p.setInventaryTransaction("AdjustmentReduce")}),e.TgZ(37,"div",3)(38,"div",4)(39,"div")(40,"span",5),e._uU(41,"Ajuste:Reducir"),e.qZA()(),e.TgZ(42,"div",6),e._UZ(43,"i",11),e.qZA()(),e.TgZ(44,"span",8),e._uU(45,"Reducir"),e.qZA(),e._UZ(46,"span",9),e.qZA()()(),e.TgZ(47,"p-dialog",12),e.NdJ("visibleChange",function(f){return p.showBuyDialog=f}),e.YNc(48,Ae,21,6,"ng-template",13),e.YNc(49,ke,2,0,"ng-template",14),e.qZA(),e.TgZ(50,"p-dialog",15),e.NdJ("visibleChange",function(f){return p.showTransferDialog=f}),e.YNc(51,ge,14,5,"ng-template",13),e.YNc(52,ye,2,0,"ng-template",14),e.qZA(),e.TgZ(53,"p-dialog",16),e.NdJ("visibleChange",function(f){return p.showAddDialog=f}),e.YNc(54,H,16,5,"ng-template",13),e.YNc(55,we,2,0,"ng-template",14),e.qZA(),e.TgZ(56,"p-dialog",17),e.NdJ("visibleChange",function(f){return p.showReduceDialog=f}),e.YNc(57,Ue,16,5,"ng-template",13),e.YNc(58,fe,2,0,"ng-template",14),e.qZA()),2&i&&(e.Q6J("ngIf",p.isLoading),e.xp6(9),e.Q6J("ngStyle",e.DdM(21,r)),e.xp6(11),e.Q6J("ngStyle",e.DdM(22,r)),e.xp6(11),e.Q6J("ngStyle",e.DdM(23,r)),e.xp6(11),e.Q6J("ngStyle",e.DdM(24,r)),e.xp6(5),e.Akn(e.DdM(25,t)),e.Q6J("visible",p.showBuyDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(26,t)),e.Q6J("visible",p.showTransferDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(27,t)),e.Q6J("visible",p.showAddDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(28,t)),e.Q6J("visible",p.showReduceDialog)("modal",!0))},dependencies:[M.O5,M.PC,I.V,K.jx,se.Rn,Q.Fj,Q.JJ,Q.Q7,Q.On,Te.Hq,Y.R,me.t,V.FN,ve.g],styles:["div[_ngcontent-%COMP%]:hover {\n  cursor: pointer;\n}"]}),a})(),u=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[C.Bz.forChild([{path:"",component:n,canActivate:[ne.j]}]),C.Bz]}),a})();var h=A(4891);let d=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[M.ez,u,I.S,se.L$,Q.u5,Te.hJ,h.E,V.EV,ve.A]}),a})()},5108:(ce,te)=>{var M,r;function C(r,t){if(!r)throw"First parameter is required.";t=new ne(r,t=t||{type:"video"});var n=this;function h(g){g&&(t.initCallback=function(){g(),g=t.initCallback=null});var m=new K(r,t);(v=new m(r,t)).record(),f("recording"),t.disableLogs||console.log("Initialized recorderType:",v.constructor.name,"for output-type:",t.type)}function d(g){if(g=g||function(){},v){if("paused"===n.state)return n.resumeRecording(),void setTimeout(function(){d(g)},1);"recording"!==n.state&&!t.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?v.stop(m):(v.stop(),m()),f("stopped")}else y();function m(b){if(v){Object.keys(v).forEach(function(_){"function"!=typeof v[_]&&(n[_]=v[_])});var l=v.blob;if(!l){if(!b)throw"Recording failed.";v.blob=l=b}if(l&&!t.disableLogs&&console.log(l.type,"->",ve(l.size)),g){var c;try{c=I.createObjectURL(l)}catch(_){}"function"==typeof g.call?g.call(n,c):g(c)}!t.autoWriteToDisk||p(function(_){var T={};T[t.type+"Blob"]=_,H.Store(T)})}else"function"==typeof g.call?g.call(n,""):g("")}}function i(g){postMessage((new FileReaderSync).readAsDataURL(g))}function p(g,m){if(!g)throw"Pass a callback function over getDataURL.";var b=m?m.blob:(v||{}).blob;if(!b)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){p(g,m)},1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var c=new FileReader;c.readAsDataURL(b),c.onload=function(T){g(T.target.result)}}else{var l=function _(T){try{var L=I.createObjectURL(new Blob([T.toString(),"this.onmessage =  function (eee) {"+T.name+"(eee.data);}"],{type:"application/javascript"})),x=new Worker(L);return I.revokeObjectURL(L),x}catch(P){}}(i);l.onmessage=function(T){g(T.data)},l.postMessage(b)}}function s(g){if(g=g||0,"paused"!==n.state){if("stopped"!==n.state){if(g>=n.recordingDuration)return void d(n.onRecordingStopped);g+=1e3,setTimeout(function(){s(g)},1e3)}}else setTimeout(function(){s(g)},1e3)}function f(g){!n||(n.state=g,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,g):n.onStateChanged(g))}var w='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function y(){!0!==t.disableLogs&&console.warn(w)}var v,R={startRecording:function u(g){return t.disableLogs||console.log("RecordRTC version: ",n.version),g&&(t=new ne(r,g)),t.disableLogs||console.log("started recording "+t.type+" stream."),v?(v.clearRecordedData(),v.record(),f("recording"),n.recordingDuration&&s(),n):(h(function(){n.recordingDuration&&s()}),n)},stopRecording:d,pauseRecording:function a(){v?"recording"===n.state?(f("paused"),v.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):y()},resumeRecording:function o(){v?"paused"===n.state?(f("recording"),v.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):y()},initRecorder:h,setRecordingDuration:function(g,m){if(void 0===g)throw"recordingDuration is required.";if("number"!=typeof g)throw"recordingDuration must be a number.";return n.recordingDuration=g,n.onRecordingStopped=m||function(){},{onRecordingStopped:function(b){n.onRecordingStopped=b}}},clearRecordedData:function(){v?(v.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):y()},getBlob:function(){if(v)return v.blob;y()},getDataURL:p,toURL:function(){if(v)return I.createObjectURL(v.blob);y()},getInternalRecorder:function(){return v},save:function(g){v?Se(v.blob,g):y()},getFromDisk:function(g){v?C.getFromDisk(t.type,g):y()},setAdvertisementArray:function(g){t.advertisement=[];for(var m=g.length,b=0;b<m;b++)t.advertisement.push({duration:b,image:g[b]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"===n.state&&!t.disableLogs&&console.warn("Stop an active recorder."),v&&"function"==typeof v.clearRecordedData&&v.clearRecordedData(),v=null,f("inactive"),n.blob=null},onStateChanged:function(g){t.disableLogs||console.log("Recorder state changed:",g)},state:"inactive",getState:function(){return n.state},destroy:function(){var g=t.disableLogs;t={disableLogs:!0},n.reset(),f("destroyed"),R=n=null,de.AudioContextConstructor&&(de.AudioContextConstructor.close(),de.AudioContextConstructor=null),t.disableLogs=g,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return n=R,R;for(var S in R)this[S]=R[S];return n=this,R}function ne(r,t){return!t.recorderType&&!t.type&&(t.audio&&t.video?t.type="video":!!t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===be||t.recorderType===ye||void 0!==fe&&t.recorderType===fe?t.type="video":t.recorderType===we?t.type="gif":t.recorderType===ge?t.type="audio":t.recorderType===q&&(U(r,"audio").length&&U(r,"video").length||!U(r,"audio").length&&U(r,"video").length?t.type="video":U(r,"audio").length&&!U(r,"video").length&&(t.type="audio"))),void 0!==q&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0])),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function K(r,t){var n;return(Y||se||Q)&&(n=ge),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!Y&&(n=q),"video"===t.type&&(Y||Q)&&(n=be,void 0!==fe&&"undefined"!=typeof ReadableStream&&(n=fe)),"gif"===t.type&&(n=we),"canvas"===t.type&&(n=ye),re()&&n!==ye&&n!==we&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(U(r,"video").length||U(r,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=q):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=q)),r instanceof Array&&r.length&&(n=Me),t.recorderType&&(n=t.recorderType),!t.disableLogs&&!!n&&!!n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&me&&(n=q),n}function ie(r){this.addStream=function(t){t&&(r=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var n,t=this.mediaType,u=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof t.audio&&re()&&!U(r,"audio").length&&(t.audio=!1),"function"!=typeof t.video&&re()&&!U(r,"video").length&&(t.video=!1),"function"!=typeof t.gif&&re()&&!U(r,"video").length&&(t.gif=!1),!t.audio&&!t.video&&!t.gif)throw"MediaStream must have either audio or video tracks.";if(t.audio&&(n=null,"function"==typeof t.audio&&(n=t.audio),this.audioRecorder=new C(r,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:n,mimeType:u.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),t.video||this.audioRecorder.startRecording()),t.video){n=null,"function"==typeof t.video&&(n=t.video);var h=r;if(re()&&t.audio&&"function"==typeof t.audio){var d=U(r,"video")[0];Te?((h=new V).addTrack(d),n&&n===be&&(n=q)):(h=new V).addTrack(d)}this.videoRecorder=new C(h,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:n,mimeType:u.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),t.audio||this.videoRecorder.startRecording()}if(t.audio&&t.video){var a=this,o=!0===re();(t.audio instanceof ge&&!!t.video||!0!==t.audio&&!0!==t.video&&t.audio!==t.video)&&(o=!1),!0===o?(a.audioRecorder=null,a.videoRecorder.startRecording()):a.videoRecorder.initRecorder(function(){a.audioRecorder.initRecorder(function(){a.videoRecorder.startRecording(),a.audioRecorder.startRecording()})})}t.gif&&(n=null,"function"==typeof t.gif&&(n=t.gif),this.gifRecorder=new C(r,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:n,mimeType:u.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(n){t(n,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(n){t(n,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(n){t(n,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(t){var n={};return this.audioRecorder&&(n.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(n.video=this.videoRecorder.getBlob()),this.gifRecorder&&(n.gif=this.gifRecorder.getBlob()),t&&t(n),n},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(t){function n(h,d){if("undefined"!=typeof Worker){var a=function u(h){var o,d=I.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),a=new Worker(d);if(void 0!==I)o=I;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";o=webkitURL}return o.revokeObjectURL(d),a}(function(p){postMessage((new FileReaderSync).readAsDataURL(p))});a.onmessage=function(i){d(i.data)},a.postMessage(h)}else{var o=new FileReader;o.readAsDataURL(h),o.onload=function(i){d(i.target.result)}}}this.getBlob(function(h){h.audio&&h.video?n(h.audio,function(d){n(h.video,function(a){t({audio:d,video:a})})}):h.audio?n(h.audio,function(d){t({audio:d})}):h.video&&n(h.video,function(d){t({video:d})})})},this.writeToDisk=function(){C.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(t){!!(t=t||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof t.audio?t.audio:""),!!t.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof t.video?t.video:""),t.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof t.gif?t.gif:"")}}C.version="5.6.2",ce.exports=C,void 0!==(M=function(){return C}.apply(te,[]))&&(ce.exports=M),C.getFromDisk=function(r,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===r?"blobs":r+" blob ")+" from disk!"),H.Fetch(function(n,u){"all"!==r&&u===r+"Blob"&&t&&t(n),"all"===r&&t&&t(n,u.replace("Blob",""))})},C.writeToDisk=function(r){console.log("Writing recorded blob(s) to disk!"),(r=r||{}).audio&&r.video&&r.gif?r.audio.getDataURL(function(t){r.video.getDataURL(function(n){r.gif.getDataURL(function(u){H.Store({audioBlob:t,videoBlob:n,gifBlob:u})})})}):r.audio&&r.video?r.audio.getDataURL(function(t){r.video.getDataURL(function(n){H.Store({audioBlob:t,videoBlob:n})})}):r.audio&&r.gif?r.audio.getDataURL(function(t){r.gif.getDataURL(function(n){H.Store({audioBlob:t,gifBlob:n})})}):r.video&&r.gif?r.video.getDataURL(function(t){r.gif.getDataURL(function(n){H.Store({videoBlob:t,gifBlob:n})})}):r.audio?r.audio.getDataURL(function(t){H.Store({audioBlob:t})}):r.video?r.video.getDataURL(function(t){H.Store({videoBlob:t})}):r.gif&&r.gif.getDataURL(function(t){H.Store({gifBlob:t})})},ie.getFromDisk=C.getFromDisk,ie.writeToDisk=C.writeToDisk,void 0!==C&&(C.MRecordRTC=ie),!(r="undefined"!=typeof global?global:null)||"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),(void 0===global.console.log||void 0===global.console.error)&&(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(r.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return t},r.HTMLVideoElement=function(){}),"undefined"==typeof location&&(r.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(r.screen={width:0,height:0}),void 0===I&&(r.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),r.window=global);var e=window.requestAnimationFrame;if(void 0===e)if("undefined"!=typeof webkitRequestAnimationFrame)e=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)e=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)e=msRequestAnimationFrame;else if(void 0===e){var k=0;e=function(r,t){var n=(new Date).getTime(),u=Math.max(0,16-(n-k)),h=setTimeout(function(){r(n+u)},u);return k=n+u,h}}var D=window.cancelAnimationFrame;void 0===D&&("undefined"!=typeof webkitCancelAnimationFrame?D=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?D=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?D=msCancelAnimationFrame:void 0===D&&(D=function(r){clearTimeout(r)}));var B=window.AudioContext;void 0===B&&("undefined"!=typeof webkitAudioContext&&(B=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(B=mozAudioContext));var I=window.URL;void 0===I&&"undefined"!=typeof webkitURL&&(I=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var se=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),Q=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),Te=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),Y=!Q&&!se&&!!navigator.webkitGetUserMedia||xe()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),me=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);me&&!Y&&-1!==navigator.userAgent.indexOf("CriOS")&&(me=!1,Y=!0);var V=window.MediaStream;function ve(r){if(0===r)return"0 Bytes";var u=parseInt(Math.floor(Math.log(r)/Math.log(1e3)),10);return(r/Math.pow(1e3,u)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][u]}function Se(r,t){if(!r)throw"Blob object is required.";if(!r.type)try{r.type="video/webm"}catch(a){}var n=(r.type||"video/webm").split("/")[1];if(-1!==n.indexOf(";")&&(n=n.split(";")[0]),t&&-1!==t.indexOf(".")){var u=t.split(".");t=u[0],n=u[1]}var h=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(r,h);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(r,h);var d=document.createElement("a");d.href=I.createObjectURL(r),d.download=h,d.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(d),"function"==typeof d.click?d.click():(d.target="_blank",d.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),I.revokeObjectURL(d.href)}function xe(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}function U(r,t){return r&&r.getTracks?r.getTracks().filter(function(n){return n.kind===(t||"audio")}):[]}function Ae(r,t){"srcObject"in t?t.srcObject=r:"mozSrcObject"in t?t.mozSrcObject=r:t.srcObject=r}void 0===V&&"undefined"!=typeof webkitMediaStream&&(V=webkitMediaStream),void 0!==V&&void 0===V.prototype.stop&&(V.prototype.stop=function(){this.getTracks().forEach(function(r){r.stop()})}),void 0!==C&&(C.invokeSaveAsDialog=Se,C.getTracks=U,C.getSeekableBlob=function ke(r,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,u=new EBML.Decoder,h=EBML.tools,d=new FileReader;d.onload=function(a){u.decode(this.result).forEach(function(f){n.read(f)}),n.stop();var i=h.makeMetadataSeekable(n.metadatas,n.duration,n.cues),p=this.result.slice(n.metadataSize),s=new Blob([i,p],{type:"video/webm"});t(s)},d.readAsArrayBuffer(r)},C.bytesToSize=ve,C.isElectron=xe);var de={};function re(){if(Te||me||se)return!0;navigator;var d,a,t=navigator.userAgent,n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10);return(Y||Q)&&(d=t.indexOf("Chrome"),n=t.substring(d+7)),-1!==(a=n.indexOf(";"))&&(n=n.substring(0,a)),-1!==(a=n.indexOf(" "))&&(n=n.substring(0,a)),u=parseInt(""+n,10),isNaN(u)&&(n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10)),u>=49}function q(r,t){var n,s=this;if(void 0===r)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(t=t||{mimeType:"video/webm"}).type&&(U(r,"video").length&&U(r,"audio").length&&(navigator.mozGetUserMedia?(n=new V).addTrack(U(r,"audio")[0]):n=new V(U(r,"audio")),r=n),(!t.mimeType||-1===t.mimeType.toString().toLowerCase().indexOf("audio"))&&(t.mimeType=Y?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg"));var o,u=[];function h(){s.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(s.timestamps[s.timestamps.length-1],s.timestamps)}function d(f){return o&&o.mimeType?o.mimeType:f.mimeType||"video/webm"}function a(){u=[],o=null,s.timestamps=[]}this.getArrayOfBlobs=function(){return u},this.record=function(){s.blob=null,s.clearRecordedData(),s.timestamps=[],p=[],u=[];var f=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",f),o&&(o=null),Y&&!re()&&(f="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&f.mimeType&&(MediaRecorder.isTypeSupported(f.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",f.mimeType),f.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{o=new MediaRecorder(r,f),t.mimeType=f.mimeType}catch(w){o=new MediaRecorder(r)}f.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in o&&!1===o.canRecordMimeType(f.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",f.mimeType)),o.ondataavailable=function(w){if(w.data&&p.push("ondataavailable: "+ve(w.data.size)),"number"!=typeof t.timeSlice)!w.data||!w.data.size||w.data.size<100||s.blob?s.recordingCallback&&(s.recordingCallback(new Blob([],{type:d(f)})),s.recordingCallback=null):(s.blob=t.getNativeBlob?w.data:new Blob([w.data],{type:d(f)}),s.recordingCallback&&(s.recordingCallback(s.blob),s.recordingCallback=null));else if(w.data&&w.data.size&&(u.push(w.data),h(),"function"==typeof t.ondataavailable)){var y=t.getNativeBlob?w.data:new Blob([w.data],{type:d(f)});t.ondataavailable(y)}},o.onstart=function(){p.push("started")},o.onpause=function(){p.push("paused")},o.onresume=function(){p.push("resumed")},o.onstop=function(){p.push("stopped")},o.onerror=function(w){!w||(w.name||(w.name="UnknownError"),p.push("error: "+w),t.disableLogs||(-1!==w.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",w):-1!==w.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",f.mimeType,") is not supported.",w):-1!==w.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",w):"OutOfMemory"===w.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",w):"IllegalStreamModification"===w.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",w):"OtherRecordingError"===w.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",w):"GenericError"===w.name?console.error("The UA cannot provide the codec or recording option that has been requested.",w):console.error("MediaRecorder Error",w)),function(y){if(!s.manuallyStopped&&o&&"inactive"===o.state)return delete t.timeslice,void o.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==o.state&&"stopped"!==o.state&&o.stop())},"number"==typeof t.timeSlice?(h(),o.start(t.timeSlice)):o.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(f){f=f||function(){},s.manuallyStopped=!0,o&&(this.recordingCallback=f,"recording"===o.state&&o.stop(),"number"==typeof t.timeSlice&&setTimeout(function(){s.blob=new Blob(u,{type:d(t)}),s.recordingCallback(s.blob)},100))},this.pause=function(){!o||"recording"===o.state&&o.pause()},this.resume=function(){!o||"paused"===o.state&&o.resume()},this.clearRecordedData=function(){o&&"recording"===o.state&&s.stop(a),a()},this.getInternalRecorder=function(){return o},this.blob=null,this.getState=function(){return o&&o.state||"inactive"};var p=[];this.getAllStates=function(){return p},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1),s=this,function f(){if(o&&!1!==t.checkForInactiveTracks){if(!1===function i(){if("active"in r){if(!r.active)return!1}else if("ended"in r&&r.ended)return!1;return!0}())return t.disableLogs||console.log("MediaStream seems stopped."),void s.stop();setTimeout(f,1e3)}}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function ge(r,t){if(!U(r,"audio").length)throw"Your stream has no audio tracks.";var o,n=this,u=[],h=[],d=!1,a=0,i=2,p=(t=t||{}).desiredSampRate;function s(){if(!1===t.checkForInactiveTracks)return!0;if("active"in r){if(!r.active)return!1}else if("ended"in r&&r.ended)return!1;return!0}function f(x,P){function F(E,_e){var Ie,X=E.numberOfAudioChannels,J=E.leftBuffers.slice(0),le=E.rightBuffers.slice(0),$=E.sampleRate,oe=E.internalInterleavedLength,z=E.desiredSampRate;function pe(N,ee,G){var W=Math.round(N.length*(ee/G)),j=[],ae=Number((N.length-1)/(W-1));j[0]=N[0];for(var he=1;he<W-1;he++){var Ne=he*ae,Oe=Number(Math.floor(Ne)).toFixed(),ze=Number(Math.ceil(Ne)).toFixed();j[he]=Be(N[Oe],N[ze],Ne-Oe)}return j[W-1]=N[N.length-1],j}function Be(N,ee,G){return N+(ee-N)*G}function Fe(N,ee){for(var G=new Float64Array(ee),W=0,j=N.length,ae=0;ae<j;ae++){var he=N[ae];G.set(he,W),W+=he.length}return G}function De(N,ee,G){for(var W=G.length,j=0;j<W;j++)N.setUint8(ee+j,G.charCodeAt(j))}2===X&&(J=Fe(J,oe),le=Fe(le,oe),z&&(J=pe(J,z,$),le=pe(le,z,$))),1===X&&(J=Fe(J,oe),z&&(J=pe(J,z,$))),z&&($=z),2===X&&(Ie=function je(N,ee){for(var G=N.length+ee.length,W=new Float64Array(G),j=0,ae=0;ae<G;)W[ae++]=N[j],W[ae++]=ee[j],j++;return W}(J,le)),1===X&&(Ie=J);var Le=Ie.length,Ze=new ArrayBuffer(44+2*Le),O=new DataView(Ze);De(O,0,"RIFF"),O.setUint32(4,36+2*Le,!0),De(O,8,"WAVE"),De(O,12,"fmt "),O.setUint32(16,16,!0),O.setUint16(20,1,!0),O.setUint16(22,X,!0),O.setUint32(24,$,!0),O.setUint32(28,$*X*2,!0),O.setUint16(32,2*X,!0),O.setUint16(34,16,!0),De(O,36,"data"),O.setUint32(40,2*Le,!0);for(var Je=Le,Pe=44,Ee=0;Ee<Je;Ee++)O.setInt16(Pe,32767*Ie[Ee],!0),Pe+=2;if(_e)return _e({buffer:Ze,view:O});postMessage({buffer:Ze,view:O})}if(x.noWorker)F(x,function(E){P(E.buffer,E.view)});else{var ue=function w(x){var P=I.createObjectURL(new Blob([x.toString(),";this.onmessage =  function (eee) {"+x.name+"(eee.data);}"],{type:"application/javascript"})),F=new Worker(P);return F.workerURL=P,F}(F);ue.onmessage=function(E){P(E.data.buffer,E.data.view),I.revokeObjectURL(ue.workerURL),ue.terminate()},ue.postMessage(x)}}!0===t.leftChannel&&(i=1),1===t.numberOfAudioChannels&&(i=1),(!i||i<1)&&(i=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+i),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===s())throw"Please make sure MediaStream is active.";b(),c=m=!1,d=!0,void 0!==t.timeSlice&&L()},this.stop=function(x){x=x||function(){},d=!1,f({desiredSampRate:p,sampleRate:g,numberOfAudioChannels:i,internalInterleavedLength:a,leftBuffers:u,rightBuffers:1===i?[]:h,noWorker:t.noWorker},function(P,F){n.blob=new Blob([F],{type:"audio/wav"}),n.buffer=new ArrayBuffer(F.buffer.byteLength),n.view=F,n.sampleRate=p||g,n.bufferSize=S,n.length=a,c=!1,x&&x(n.blob)})},void 0===C.Storage&&(C.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!C.Storage.AudioContextConstructor||"closed"===C.Storage.AudioContextConstructor.state)&&(C.Storage.AudioContextConstructor=new C.Storage.AudioContext);var y=C.Storage.AudioContextConstructor,v=y.createMediaStreamSource(r),R=[0,256,512,1024,2048,4096,8192,16384],S=void 0===t.bufferSize?4096:t.bufferSize;if(-1===R.indexOf(S)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(R,null,"\t"))),y.createJavaScriptNode)o=y.createJavaScriptNode(S,i,i);else{if(!y.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=y.createScriptProcessor(S,i,i)}v.connect(o),t.bufferSize||(S=o.bufferSize);var g=void 0!==t.sampleRate?t.sampleRate:y.sampleRate||44100;(g<22050||g>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var m=!1;function b(){h=[],a=0,c=!1,d=!1,m=!1,y=null,n.leftchannel=u=[],n.rightchannel=h,n.numberOfAudioChannels=i,n.desiredSampRate=p,n.sampleRate=g,n.recordingLength=a,T={left:[],right:[],recordingLength:0}}function l(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),v&&(v.disconnect(),v=null),b()}this.pause=function(){m=!0},this.resume=function(){if(!1===s())throw"Please make sure MediaStream is active.";if(!d)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();m=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,d&&this.stop(l),l()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var c=!1;o.onaudioprocess=function _(x){if(!m){if(!1===s()&&(t.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),d=!1),!d)return void(v&&(v.disconnect(),v=null));c||(c=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var P=x.inputBuffer.getChannelData(0),F=new Float32Array(P);if(u.push(F),2===i){var ue=x.inputBuffer.getChannelData(1),E=new Float32Array(ue);h.push(E)}n.recordingLength=a+=S,void 0!==t.timeSlice&&(T.recordingLength+=S,T.left.push(F),2===i&&T.right.push(E))}},o.connect(y.createMediaStreamDestination?y.createMediaStreamDestination():y.destination),this.leftchannel=u,this.rightchannel=h,this.numberOfAudioChannels=i,this.desiredSampRate=p,this.sampleRate=g,n.recordingLength=a;var T={left:[],right:[],recordingLength:0};function L(){!d||"function"!=typeof t.ondataavailable||void 0===t.timeSlice||(T.left.length?(f({desiredSampRate:p,sampleRate:g,numberOfAudioChannels:i,internalInterleavedLength:T.recordingLength,leftBuffers:T.left,rightBuffers:1===i?[]:T.right},function(x,P){var F=new Blob([P],{type:"audio/wav"});t.ondataavailable(F),setTimeout(L,t.timeSlice)}),T={left:[],right:[],recordingLength:0}):setTimeout(L,t.timeSlice))}}function ye(r,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(R){R in document.createElement("canvas")&&(n=!0)});var a,o,i,u=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),h=50,d=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(u&&d&&d[2]&&(h=parseInt(d[2],10)),u&&h<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),r instanceof HTMLCanvasElement)a=r;else{if(!(r instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";a=r.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(i=!0,n&&!t.useWhammyRecorder){var R;"captureStream"in a?R=a.captureStream(25):"mozCaptureStream"in a?R=a.mozCaptureStream(25):"webkitCaptureStream"in a&&(R=a.webkitCaptureStream(25));try{var S=new V;S.addTrack(U(R,"video")[0]),R=S}catch(g){}if(!R)throw"captureStream API are NOT available.";(o=new q(R,{mimeType:t.mimeType||"video/webm"})).record()}else v.frames=[],y=(new Date).getTime(),w();t.initCallback&&t.initCallback()},this.getWebPImages=function(R){if("canvas"===r.nodeName.toLowerCase()){var S=v.frames.length;v.frames.forEach(function(g,m){var b=S-m;t.disableLogs||console.log(b+"/"+S+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(b,S);var l=g.image.toDataURL("image/webp",1);v.frames[m].image=l}),t.disableLogs||console.log("Generating WebM"),R()}else R()},this.stop=function(R){i=!1;var S=this;n&&o?o.stop(R):this.getWebPImages(function(){v.compile(function(g){t.disableLogs||console.log("Recording finished!"),S.blob=g,S.blob.forEach&&(S.blob=new Blob([],{type:"video/webm"})),R&&R(S.blob),v.frames=[]})})};var p=!1;function s(){v.frames=[],i=!1,p=!1}function f(){var R=document.createElement("canvas"),S=R.getContext("2d");return R.width=r.width,R.height=r.height,S.drawImage(r,0,0),R}function w(){if(p)return y=(new Date).getTime(),setTimeout(w,500);if("canvas"===r.nodeName.toLowerCase()){var R=(new Date).getTime()-y;return y=(new Date).getTime(),v.frames.push({image:f(),duration:R}),void(i&&setTimeout(w,t.frameInterval))}html2canvas(r,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(S){var g=(new Date).getTime()-y;if(!g)return setTimeout(w,t.frameInterval);y=(new Date).getTime(),v.frames.push({image:S.toDataURL("image/webp",1),duration:g}),i&&setTimeout(w,t.frameInterval)}})}this.pause=function(){p=!0,o instanceof q&&o.pause()},this.resume=function(){p=!1,o instanceof q?o.resume():i||this.record()},this.clearRecordedData=function(){i&&this.stop(s),s()},this.name="CanvasRecorder",this.toString=function(){return this.name};var y=(new Date).getTime(),v=new Ce.Video(100)}function be(r,t){function n(y){y=void 0!==y?y:10;var v=(new Date).getTime()-f;return v?a?(f=(new Date).getTime(),setTimeout(n,100)):(f=(new Date).getTime(),s.paused&&s.play(),p.drawImage(s,0,0,i.width,i.height),w.frames.push({duration:v,image:i.toDataURL("image/webp")}),void(d||setTimeout(n,y,y))):setTimeout(n,y,y)}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),i.width=t.canvas.width||320,i.height=t.canvas.height||240,p=i.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),Ae(r,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),f=(new Date).getTime(),w=new Ce.Video,t.disableLogs||(console.log("canvas resolutions",i.width,"*",i.height),console.log("video width/height",s.width||i.width,"*",s.height||i.height)),n(t.frameInterval)};var d=!1;this.stop=function(y){y=y||function(){},d=!0;var v=this;setTimeout(function(){!function h(y,v,R,S,g){var m=document.createElement("canvas");m.width=i.width,m.height=i.height;var b=m.getContext("2d"),l=[],c=-1===v,_=v&&v>0&&v<=y.length?v:y.length,L=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),x=R&&R>=0&&R<=1?R:0,P=S&&S>=0&&S<=1?S:0,F=!1;!function u(y){var v=-1,R=y.length;!function S(){++v!==R?setTimeout(function(){y.functionToLoop(S,v)},1):y.callback()}()}({length:_,functionToLoop:function(ue,E){var _e,X,J,le=function(){!F&&J-_e<=J*P||(c&&(F=!0),l.push(y[E])),ue()};if(F)le();else{var $=new Image;$.onload=function(){b.drawImage($,0,0,i.width,i.height);var oe=b.getImageData(0,0,i.width,i.height);_e=0,X=oe.data.length,J=oe.data.length/4;for(var z=0;z<X;z+=4){var pe={r:oe.data[z],g:oe.data[z+1],b:oe.data[z+2]};Math.sqrt(Math.pow(pe.r-0,2)+Math.pow(pe.g-0,2)+Math.pow(pe.b-0,2))<=L*x&&_e++}le()},$.src=y[E].image}},callback:function(){(l=l.concat(y.slice(_))).length<=0&&l.push(y[y.length-1]),g(l)}})}(w.frames,-1,null,null,function(R){w.frames=R,t.advertisement&&t.advertisement.length&&(w.frames=t.advertisement.concat(w.frames)),w.compile(function(S){v.blob=S,v.blob.forEach&&(v.blob=new Blob([],{type:"video/webm"})),y&&y(v.blob)})})},10)};var a=!1;function o(){w.frames=[],d=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,d&&this.record()},this.clearRecordedData=function(){d||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,f,w,i=document.createElement("canvas"),p=i.getContext("2d")}void 0!==B?de.AudioContext=B:"undefined"!=typeof webkitAudioContext&&(de.AudioContext=webkitAudioContext),void 0!==C&&(C.Storage=de),void 0!==C&&(C.MediaStreamRecorder=q),void 0!==C&&(C.StereoAudioRecorder=ge),void 0!==C&&(C.CanvasRecorder=ye),void 0!==C&&(C.WhammyRecorder=be);var Ce=function(){function r(u){this.frames=[],this.duration=u||1,this.quality=.8}function n(u){function d(m,b,l){return[{data:m,id:231}].concat(l.map(function(c){var _=function w(m){var b=0;if(m.keyframe&&(b|=128),m.invisible&&(b|=8),m.lacing&&(b|=m.lacing<<1),m.discardable&&(b|=1),m.trackNum>127)throw"TrackNumber > 127 not supported";var l=[128|m.trackNum,m.timecode>>8,255&m.timecode,b].map(function(c){return String.fromCharCode(c)}).join("")+m.frame;return l}({discardable:0,frame:c.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(b)});return b+=c.duration,{data:_,id:163}}))}function o(m){for(var b=[];m>0;)b.push(255&m),m>>=8;return new Uint8Array(b.reverse())}function i(m){return new Uint8Array(m.split("").map(function(b){return b.charCodeAt(0)}))}function p(m){var b=[];m=(m.length%8?new Array(9-m.length%8).join("0"):"")+m;for(var c=0;c<m.length;c+=8)b.push(parseInt(m.substr(c,8),2));return new Uint8Array(b)}function s(m){for(var b=[],l=0;l<m.length;l++){var c=m[l].data;"object"==typeof c&&(c=s(c)),"number"==typeof c&&(c=p(c.toString(2))),"string"==typeof c&&(c=i(c));var _=c.size||c.byteLength||c.length,T=Math.ceil(Math.ceil(Math.log(_)/Math.log(2))/8),L=_.toString(2),x=new Array(7*T+7+1-L.length).join("0")+L,P=new Array(T).join("0")+"1"+x;b.push(o(m[l].id)),b.push(p(P)),b.push(c)}return new Blob(b,{type:"video/webm"})}function v(m,b){return parseInt(m.substr(b+4,4).split("").map(function(l){var c=l.charCodeAt(0).toString(2);return new Array(8-c.length+1).join("0")+c}).join(""),2)}function R(m){for(var b=0,l={};b<m.length;){var c=m.substr(b,4),_=v(m,b),T=m.substr(b+4+4,_);b+=8+_,l[c]=l[c]||[],l[c].push("RIFF"===c||"LIST"===c?R(T):T)}return l}function S(m){return[].slice.call(new Uint8Array(new Float64Array([m]).buffer),0).map(function(b){return String.fromCharCode(b)}).reverse().join("")}var g=new function h(m){var b=function a(m){if(m[0]){for(var b=m[0].width,l=m[0].height,c=m[0].duration,_=1;_<m.length;_++)c+=m[_].duration;return{duration:c,width:b,height:l}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(m);if(!b)return[];for(var c=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:S(b.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:b.width,id:176},{data:b.height,id:186}]}]}]}]}],_=0,T=0;_<m.length;){var L=[],x=0;do{L.push(m[_]),x+=m[_].duration,_++}while(_<m.length&&x<3e4);var F={id:524531317,data:d(T,0,L)};c[1].data.push(F),T+=x}return s(c)}(u.map(function(m){var b=function y(m){for(var b=m.RIFF[0].WEBP[0],l=b.indexOf("\x9d\x01*"),c=0,_=[];c<4;c++)_[c]=b.charCodeAt(l+3+c);return{width:16383&(_[1]<<8|_[0]),height:16383&(_[3]<<8|_[2]),data:b,riff:m}}(R(atob(m.image.slice(23))));return b.duration=m.duration,b}));postMessage(g)}return r.prototype.add=function(u,h){if("canvas"in u&&(u=u.canvas),"toDataURL"in u&&(u=u.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(u))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:u,duration:h||this.duration})},r.prototype.compile=function(u){var h=function t(u){var h=I.createObjectURL(new Blob([u.toString(),"this.onmessage =  function (eee) {"+u.name+"(eee.data);}"],{type:"application/javascript"})),d=new Worker(h);return I.revokeObjectURL(h),d}(n);h.onmessage=function(d){d.data.error?console.error(d.data.error):u(d.data)},h.postMessage(this.frames)},{Video:r}}();void 0!==C&&(C.Whammy=Ce);var H={init:function(){var r=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var u,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h=indexedDB.open(n,1);h.onerror=r.onError,h.onsuccess=function(){(u=h.result).onerror=r.onError,u.setVersion&&1!==u.version?u.setVersion(1).onsuccess=function(){d(u),a()}:a()},h.onupgradeneeded=function(o){d(o.target.result)}}else console.error("IndexedDB API are not available in this browser.");function d(o){o.createObjectStore(r.dataStoreName)}function a(){var o=u.transaction([r.dataStoreName],"readwrite");function i(p){o.objectStore(r.dataStoreName).get(p).onsuccess=function(s){r.callback&&r.callback(s.target.result,p)}}r.videoBlob&&o.objectStore(r.dataStoreName).put(r.videoBlob,"videoBlob"),r.gifBlob&&o.objectStore(r.dataStoreName).put(r.gifBlob,"gifBlob"),r.audioBlob&&o.objectStore(r.dataStoreName).put(r.audioBlob,"audioBlob"),i("audioBlob"),i("videoBlob"),i("gifBlob")}},Fetch:function(r){return this.callback=r,this.init(),this},Store:function(r){return this.audioBlob=r.audioBlob,this.videoBlob=r.videoBlob,this.gifBlob=r.gifBlob,this.init(),this},onError:function(r){console.error(JSON.stringify(r,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function we(r,t){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var u=r instanceof CanvasRenderingContext2D||r instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&i?(u||(t.width||(t.width=p.offsetWidth||320),t.height||(t.height=p.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),a.width=t.canvas.width||320,a.height=t.canvas.height||240,p.width=t.video.width||320,p.height=t.video.height||240),(v=new GIFEncoder).setRepeat(0),v.setDelay(t.frameRate||200),v.setQuality(t.quality||10),v.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),s=e(function S(g){if(!0!==R.clearedRecordedData){if(h)return setTimeout(function(){S(g)},100);s=e(S),void 0===typeof y&&(y=g),!(g-y<90)&&(!u&&p.paused&&p.play(),u||o.drawImage(p,0,0,a.width,a.height),t.onGifPreview&&t.onGifPreview(a.toDataURL("image/png")),v.addFrame(o),y=g)}}),t.initCallback&&t.initCallback()):setTimeout(R.record,1e3)},this.stop=function(S){S=S||function(){},s&&D(s),Date.now(),this.blob=new Blob([new Uint8Array(v.stream().bin)],{type:"image/gif"}),S(this.blob),v.stream().bin=[]};var h=!1;this.pause=function(){h=!0},this.resume=function(){h=!1},this.clearRecordedData=function(){R.clearedRecordedData=!0,function d(){v&&(v.stream().bin=[])}()},this.name="GifRecorder",this.toString=function(){return this.name};var a=document.createElement("canvas"),o=a.getContext("2d");u&&(r instanceof CanvasRenderingContext2D?a=(o=r).canvas:r instanceof HTMLCanvasElement&&(o=r.getContext("2d"),a=r));var i=!0;if(!u){var p=document.createElement("video");p.muted=!0,p.autoplay=!0,p.playsInline=!0,i=!1,p.onloadedmetadata=function(){i=!0},Ae(r,p),p.play()}var y,v,s=null,R=this}function Re(r,t){var l;l="undefined"!=typeof global?global:null,void 0===C&&(!l||"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),(void 0===global.console.log||void 0===global.console.error)&&(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(l.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var c={getContext:function(){return c},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return c},l.HTMLVideoElement=function(){}),"undefined"==typeof location&&(l.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(l.screen={width:0,height:0}),void 0===p&&(l.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),l.window=global)),t=t||"multi-streams-mixer";var u=[],h=!1,d=document.createElement("canvas"),a=d.getContext("2d");d.style.opacity=0,d.style.position="absolute",d.style.zIndex=-1,d.style.top="-1000em",d.style.left="-1000em",d.className=t,(document.body||document.documentElement).appendChild(d),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var o=this,i=window.AudioContext;void 0===i&&("undefined"!=typeof webkitAudioContext&&(i=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(i=mozAudioContext));var p=window.URL;void 0===p&&"undefined"!=typeof webkitURL&&(p=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var s=window.MediaStream;void 0===s&&"undefined"!=typeof webkitMediaStream&&(s=webkitMediaStream),void 0!==s&&void 0===s.prototype.stop&&(s.prototype.stop=function(){this.getTracks().forEach(function(l){l.stop()})});var f={};function y(){if(!h){var l=u.length,c=!1,_=[];if(u.forEach(function(L){L.stream||(L.stream={}),L.stream.fullcanvas?c=L:_.push(L)}),c)d.width=c.stream.width,d.height=c.stream.height;else if(_.length){d.width=l>1?2*_[0].width:_[0].width;var T=1;(3===l||4===l)&&(T=2),(5===l||6===l)&&(T=3),(7===l||8===l)&&(T=4),(9===l||10===l)&&(T=5),d.height=_[0].height*T}else d.width=o.width||360,d.height=o.height||240;c&&c instanceof HTMLVideoElement&&v(c),_.forEach(function(L,x){v(L,x)}),setTimeout(y,o.frameInterval)}}function v(l,c){if(!h){var _=0,T=0,L=l.width,x=l.height;1===c&&(_=l.width),2===c&&(T=l.height),3===c&&(_=l.width,T=l.height),4===c&&(T=2*l.height),5===c&&(_=l.width,T=2*l.height),6===c&&(T=3*l.height),7===c&&(_=l.width,T=3*l.height),void 0!==l.stream.left&&(_=l.stream.left),void 0!==l.stream.top&&(T=l.stream.top),void 0!==l.stream.width&&(L=l.stream.width),void 0!==l.stream.height&&(x=l.stream.height),a.drawImage(l,_,T,L,x),"function"==typeof l.stream.onRender&&l.stream.onRender(a,_,T,L,x,c)}}function m(l){var c=document.createElement("video");return function w(l,c){"srcObject"in c?c.srcObject=l:"mozSrcObject"in c?c.mozSrcObject=l:c.srcObject=l}(l,c),c.className=t,c.muted=!0,c.volume=0,c.width=l.width||o.width||360,c.height=l.height||o.height||240,c.play(),c}function b(l){u=[],(l=l||r).forEach(function(c){if(c.getTracks().filter(function(T){return"video"===T.kind}).length){var _=m(c);_.stream=c,u.push(_)}})}void 0!==i?f.AudioContext=i:"undefined"!=typeof webkitAudioContext&&(f.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){y()},this.appendStreams=function(l){if(!l)throw"First parameter is required.";l instanceof Array||(l=[l]),l.forEach(function(c){var _=new s;if(c.getTracks().filter(function(x){return"video"===x.kind}).length){var T=m(c);T.stream=c,u.push(T),_.addTrack(c.getTracks().filter(function(x){return"video"===x.kind})[0])}if(c.getTracks().filter(function(x){return"audio"===x.kind}).length){var L=o.audioContext.createMediaStreamSource(c);o.audioDestination=o.audioContext.createMediaStreamDestination(),L.connect(o.audioDestination),_.addTrack(o.audioDestination.stream.getTracks().filter(function(x){return"audio"===x.kind})[0])}r.push(_)})},this.releaseStreams=function(){u=[],h=!0,o.gainNode&&(o.gainNode.disconnect(),o.gainNode=null),o.audioSources.length&&(o.audioSources.forEach(function(l){l.disconnect()}),o.audioSources=[]),o.audioDestination&&(o.audioDestination.disconnect(),o.audioDestination=null),o.audioContext&&o.audioContext.close(),o.audioContext=null,a.clearRect(0,0,d.width,d.height),d.stream&&(d.stream.stop(),d.stream=null)},this.resetVideoStreams=function(l){l&&!(l instanceof Array)&&(l=[l]),b(l)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function R(){h=!1;var l=function S(){var l;b(),"captureStream"in d?l=d.captureStream():"mozCaptureStream"in d?l=d.mozCaptureStream():o.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var c=new s;return l.getTracks().filter(function(_){return"video"===_.kind}).forEach(function(_){c.addTrack(_)}),d.stream=c,c}(),c=function g(){f.AudioContextConstructor||(f.AudioContextConstructor=new f.AudioContext),o.audioContext=f.AudioContextConstructor,o.audioSources=[],!0===o.useGainNode&&(o.gainNode=o.audioContext.createGain(),o.gainNode.connect(o.audioContext.destination),o.gainNode.gain.value=0);var l=0;if(r.forEach(function(c){if(c.getTracks().filter(function(T){return"audio"===T.kind}).length){l++;var _=o.audioContext.createMediaStreamSource(c);!0===o.useGainNode&&_.connect(o.gainNode),o.audioSources.push(_)}}),l)return o.audioDestination=o.audioContext.createMediaStreamDestination(),o.audioSources.forEach(function(c){c.connect(o.audioDestination)}),o.audioDestination.stream}();return c&&c.getTracks().filter(function(T){return"audio"===T.kind}).forEach(function(T){l.addTrack(T)}),r.forEach(function(T){}),l}}function Me(r,t){r=r||[];var u,h,n=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){u=new Re(r,t.elementClass||"multi-streams-mixer"),function d(){var a=[];return r.forEach(function(o){U(o,"video").forEach(function(i){a.push(i)})}),a}().length&&(u.frameInterval=t.frameInterval||10,u.width=t.video.width||360,u.height=t.video.height||240,u.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(u.getMixedStream()),(h=new q(u.getMixedStream(),t)).record()},this.stop=function(a){!h||h.stop(function(o){n.blob=o,a(o),n.clearRecordedData()})},this.pause=function(){h&&h.pause()},this.resume=function(){h&&h.resume()},this.clearRecordedData=function(){h&&(h.clearRecordedData(),h=null),u&&(u.releaseStreams(),u=null)},this.addStreams=function(a){if(!a)throw"First parameter is required.";a instanceof Array||(a=[a]),r.concat(a),h&&u&&(u.appendStreams(a),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(u.getMixedStream()))},this.resetVideoStreams=function(a){!u||(a&&!(a instanceof Array)&&(a=[a]),u.resetVideoStreams(a))},this.getMixer=function(){return u},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function fe(r,t){var u,d,o;function a(s,f){if(!t.workerPath&&!f)return u=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(y){y.arrayBuffer().then(function(v){a(s,v)})});if(!t.workerPath&&f instanceof ArrayBuffer){var w=new Blob([f],{type:"text/javascript"});t.workerPath=I.createObjectURL(w)}t.workerPath||console.error("workerPath parameter is missing."),(d=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),d.addEventListener("message",function(y){"READY"===y.data?(d.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),function h(){return new ReadableStream({start:function(s){var f=document.createElement("canvas"),w=document.createElement("video"),y=!0;w.srcObject=r,w.muted=!0,w.height=t.height,w.width=t.width,w.volume=0,w.onplaying=function(){f.width=t.width,f.height=t.height;var v=f.getContext("2d"),S=setInterval(function(){if(u&&(clearInterval(S),s.close()),y&&(y=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),v.drawImage(w,0,0),"closed"!==s._controlledReadableStream.state)try{s.enqueue(v.getImageData(0,0,t.width,t.height))}catch(m){}},1e3/t.frameRate)},w.play()}})}().pipeTo(new WritableStream({write:function(v){u?console.error("Got image, but recorder is finished!"):d.postMessage(v.data.buffer,[v.data.buffer])}}))):y.data&&(o||p.push(y.data))})}("undefined"==typeof ReadableStream||"undefined"==typeof WritableStream)&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){p=[],o=!1,this.blob=null,a(r),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){o=!0},this.resume=function(){o=!1};var p=[];this.stop=function(s){u=!0;var f=this;!function i(s){d?(d.addEventListener("message",function(f){null===f.data&&(d.terminate(),d=null,s&&s())}),d.postMessage(null)):s&&s()}(function(){f.blob=new Blob(p,{type:"video/webm"}),s(f.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){p=[],o=!1,this.blob=null},this.blob=null}void 0!==C&&(C.DiskStorage=H),void 0!==C&&(C.GifRecorder=we),void 0===C&&(ce.exports=Re,void 0!==(M=function(){return Re}.apply(te,[]))&&(ce.exports=M)),void 0!==C&&(C.MultiStreamRecorder=Me),void 0!==C&&(C.RecordRTCPromisesHandler=function Ue(r,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===r)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new C(r,t),this.startRecording=function(){return new Promise(function(u,h){try{n.recordRTC.startRecording(),u()}catch(d){h(d)}})},this.stopRecording=function(){return new Promise(function(u,h){try{n.recordRTC.stopRecording(function(d){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?u(d):h("Empty blob.",n.blob)})}catch(d){h(d)}})},this.pauseRecording=function(){return new Promise(function(u,h){try{n.recordRTC.pauseRecording(),u()}catch(d){h(d)}})},this.resumeRecording=function(){return new Promise(function(u,h){try{n.recordRTC.resumeRecording(),u()}catch(d){h(d)}})},this.getDataURL=function(u){return new Promise(function(h,d){try{n.recordRTC.getDataURL(function(a){h(a)})}catch(a){d(a)}})},this.getBlob=function(){return new Promise(function(u,h){try{u(n.recordRTC.getBlob())}catch(d){h(d)}})},this.getInternalRecorder=function(){return new Promise(function(u,h){try{u(n.recordRTC.getInternalRecorder())}catch(d){h(d)}})},this.reset=function(){return new Promise(function(u,h){try{u(n.recordRTC.reset())}catch(d){h(d)}})},this.destroy=function(){return new Promise(function(u,h){try{u(n.recordRTC.destroy())}catch(d){h(d)}})},this.getState=function(){return new Promise(function(u,h){try{u(n.recordRTC.getState())}catch(d){h(d)}})},this.blob=null,this.version="5.6.2"}),void 0!==C&&(C.WebAssemblyRecorder=fe)},3407:(ce,te,A)=>{A.d(te,{A:()=>ie,g:()=>K});var M=A(5e3),C=A(9808),ne=A(3075);let K=(()=>{class Z{constructor(k,D,B,I){this.el=k,this.ngModel=D,this.control=B,this.cd=I,this.onResize=new M.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(k){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(k){this.autoResize&&this.resize(k)}onBlur(k){this.autoResize&&this.resize(k)}resize(k){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(k||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return Z.\u0275fac=function(k){return new(k||Z)(M.Y36(M.SBq),M.Y36(ne.On,8),M.Y36(ne.a5,8),M.Y36(M.sBO))},Z.\u0275dir=M.lG2({type:Z,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(k,D){1&k&&M.NdJ("input",function(I){return D.onInput(I)})("focus",function(I){return D.onFocus(I)})("blur",function(I){return D.onBlur(I)}),2&k&&M.ekj("p-filled",D.filled)("p-inputtextarea-resizable",D.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),Z})(),ie=(()=>{class Z{}return Z.\u0275fac=function(k){return new(k||Z)},Z.\u0275mod=M.oAB({type:Z}),Z.\u0275inj=M.cJS({imports:[C.ez]}),Z})()}}]);
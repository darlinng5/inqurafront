"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9995],{6768:(M,_,n)=>{n.d(_,{t:()=>l});var e=n(4650),p=n(7747),g=n(5384),h=n(4006),f=n(2210);let l=(()=>{class d{constructor(i,t){this.commonService=i,this.eventService=t,this.ValueSelectedChange=new e.vpe,this.categorys=[],this.Filter=!1}ngOnInit(){this.data=this.DropDownDataSource,this.Filter=this.showFilter}changeValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}selectedValue(){this.ValueSelected=this.selectedData?.value,this.ValueSelectedChange.emit(this.ValueSelected)}static#t=this.\u0275fac=function(t){return new(t||d)(e.Y36(p.M),e.Y36(g.P))};static#e=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-drop-down"]],inputs:{ValueSelected:"ValueSelected",IsCreating:"IsCreating",showFilter:"showFilter",DropDownDataSource:"DropDownDataSource"},outputs:{ValueSelectedChange:"ValueSelectedChange"},decls:1,vars:3,consts:[["optionLabel","viewValue",3,"filter","options","ngModel","onClick","onChange","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"p-dropdown",0),e.NdJ("onClick",function(){return o.selectedValue()})("onChange",function(){return o.changeValue()})("ngModelChange",function(r){return o.selectedData=r}),e.qZA()),2&t&&e.Q6J("filter",o.Filter)("options",o.data)("ngModel",o.selectedData)},dependencies:[h.JJ,h.On,f.Lt],encapsulation:2})}return d})()},2384:(M,_,n)=>{n.d(_,{b:()=>e});class e{}},9995:(M,_,n)=>{n.r(_),n.d(_,{KardexDemoModule:()=>N});var e=n(6895),p=n(5593),g=n(9197),h=n(1546),f=n(5861),l=n(805),d=n(6166),v=n(4159),i=n.n(v),t=n(4650),o=n(7747),u=n(5384),r=n(6768),T=n(2453),A=n(1383),P=n(5108);function R(s,U){if(1&s){const a=t.EpF();t.TgZ(0,"div")(1,"app-drop-down",16),t.NdJ("ValueSelectedChange",function(c){t.CHM(a);const Z=t.oxw();return t.KtG(Z.filterProduct(c))}),t.qZA()()}if(2&s){const a=t.oxw();t.xp6(1),t.Q6J("showFilter",!0)("IsCreating",!0)("DropDownDataSource",a.products)}}function V(s,U){1&s&&(t.TgZ(0,"div",17)(1,"h5"),t._uU(2,"Cargando los productos, espere...."),t.qZA()())}function K(s,U){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()()),2&s){const a=U.$implicit;t.xp6(2),t.Oqu(a.id),t.xp6(2),t.Oqu(a.fecha),t.xp6(2),t.Oqu(a.descripcion),t.xp6(2),t.Oqu(a.costoUnitario),t.xp6(2),t.Oqu(a.entradaCantidad),t.xp6(2),t.Oqu(a.entradaValor),t.xp6(2),t.Oqu(a.salidaCantidad),t.xp6(2),t.Oqu(a.salidaValor),t.xp6(2),t.Oqu(a.balanceCantidad),t.xp6(2),t.Oqu(a.balanceValor)}}let J=(()=>{class s{constructor(a,m,c,Z){this.router=a,this.productService=m,this.eventService=c,this.messageService=Z,this.kardex=[],this.loading=!1,this.isLoading=!1,this.redirect=!1,this.AccessName="/pages/kardex",this.getProductValues()}ngOnInit(){const m=this.eventService.getPermisionsException().split(",").map(c=>c.trim());this.redirect=m.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized")}load(){this.producId=null==this.producId?0:this.producId,this.GetKardex()}filterProduct(a){this.producId=a}getProductValues(){this.loading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(a=>{a.data&&(this.products=a.data),this.loading=!1})}printReport(){var a=this;return(0,f.Z)(function*(){a.messageService.add({severity:"info",summary:"Info",detail:"El reporte se esta generando, favor espere",life:3e3}),a.isLoading=!0;const m=document.getElementById("print-section"),c=new d.ZP("p","pt","a4"),Z={background:"white",scale:3},W=c.internal.pageSize.getWidth(),Y=c.internal.pageSize.getHeight(),D={top:15,bottom:15,left:15,right:15},S=W-D.left-D.right,I=Y-D.top-D.bottom;function j(C,F,O){F.addImage(C,"PNG",D.left,O,S,0,void 0,"FAST")}try{const C=yield i()(m,Z),O=(C.toDataURL("image/png"),C.width),x=O/S;let y=C.height/x,w=D.top,L=1;for(;y>0;){const E=Math.min(I,y),b=document.createElement("canvas"),H=b.getContext("2d");b.width=O,b.height=E*x,H.drawImage(C,0,(L-1)*I*x,O,E*x,0,0,O,E*x),j(b.toDataURL("image/png"),c,w),y-=I,w=D.top,y>0&&(c.addPage(),L++)}const q=c.output("blob"),Q=URL.createObjectURL(q);a.isLoading=!1,window.open(Q,"_blank")}catch(C){console.error("Error generando PDF:",C),a.isLoading=!1}})()}GetKardex(){this.isLoading=!0,this.productService.GettKardexReport(this.producId,this.eventService.getToken()).subscribe(a=>{a.data?(this.kardex=a.data.kardex,this.code=a.data.encabezado.code,this.product=a.data.encabezado.product,this.supplier=a.data.encabezado.proveedor,this.localization=a.data.encabezado.ubicacion):this.messageService.add({severity:"error",summary:"error",detail:a.message,life:6e3}),this.isLoading=!1})}static#t=this.\u0275fac=function(m){return new(m||s)(t.Y36(g.F0),t.Y36(o.M),t.Y36(u.P),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["ng-component"]],features:[t._Bn([l.ez])],decls:65,vars:8,consts:[["id","print-section"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"header"],[4,"ngIf"],["class","loading",4,"ngIf"],["label","Search","icon","pi pi-search","iconPos","right",1,"button-space",3,"loading","onClick"],[1,"product-info"],["colspan","4"],["colspan","2"],[4,"ngFor","ngForOf"],["styleClass","mb-4"],[1,"my-2"],["align","left"],["pButton","","label","Imprimir","icon","pi pi-print",1,"p-button-outlined","mb-2",3,"click"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],[1,"loading"]],template:function(m,c){1&m&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p-toast"),t.TgZ(5,"div",4),t.YNc(6,R,2,3,"div",5),t.YNc(7,V,3,0,"div",6),t.TgZ(8,"p-button",7),t.NdJ("onClick",function(){return c.load()}),t.qZA()(),t.TgZ(9,"div",8)(10,"div")(11,"p")(12,"strong"),t._uU(13,"Producto:"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"strong"),t._uU(17,"Proveedor:"),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"div")(20,"p")(21,"strong"),t._uU(22,"C\xf3digo:"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"p")(25,"strong"),t._uU(26,"Localizaci\xf3n:"),t.qZA(),t._uU(27),t.qZA()()(),t.TgZ(28,"table")(29,"thead")(30,"tr"),t._UZ(31,"th",9),t.TgZ(32,"th",10),t._uU(33,"Entradas"),t.qZA(),t.TgZ(34,"th",10),t._uU(35,"Salidas"),t.qZA(),t.TgZ(36,"th",10),t._uU(37,"Saldos"),t.qZA()(),t.TgZ(38,"tr")(39,"th"),t._uU(40,"N."),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Fecha"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Descripci\xf3n"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Costo Unitario"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"Cant."),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Valor"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Cant."),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Valor"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"Cant."),t.qZA(),t.TgZ(57,"th"),t._uU(58,"Valor"),t.qZA()()(),t.TgZ(59,"tbody"),t.YNc(60,K,21,10,"tr",11),t.qZA()()()()()(),t.TgZ(61,"p-toolbar",12)(62,"div",13)(63,"p-divider",14)(64,"button",15),t.NdJ("click",function(){return c.printReport()}),t.qZA()()()()),2&m&&(t.xp6(6),t.Q6J("ngIf",!c.loading),t.xp6(1),t.Q6J("ngIf",c.loading),t.xp6(1),t.Q6J("loading",c.isLoading),t.xp6(6),t.hij(" ",c.product,""),t.xp6(4),t.hij(" ",c.supplier,""),t.xp6(5),t.hij(" ",c.code,""),t.xp6(4),t.hij(" ",c.localization,""),t.xp6(33),t.Q6J("ngForOf",c.kardex))},dependencies:[e.sg,e.O5,r.t,p.Hq,p.zx,T.FN,A.o,P.i],styles:["[_nghost-%COMP%] {\n    --primary-color: #023b78;\n    --secondary-color: #1565bb;\n    --background-color: #f0f8ff;\n    --text-color: #333;\n    --border-color: #ccc;\n    --hover-color: #e9ecef;\n    \n    font-family: 'Arial', sans-serif;\n    color: var(--text-color);\n  \n    padding: 20px;\n  }\n\n\n\n  .header[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n\n  .product-info[_ngcontent-%COMP%] {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 20px;\n    margin-bottom: 20px;\n    background-color: var(--hover-color);\n    padding: 15px;\n    border-radius: 6px;\n  }\n\n  .product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    margin: 5px 0;\n  }\n\n  .product-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n    color: var(--primary-color);\n  }\n\n  table[_ngcontent-%COMP%] {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n  }\n\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    padding: 12px;\n    text-align: left;\n    border-bottom: 1px solid var(--border-color);\n  }\n\n  th[_ngcontent-%COMP%] {\n    background-color: var(--primary-color);\n    color: white;\n    font-weight: bold;\n  }\n  tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover {\n    background-color: var(--hover-color);\n    transition: background-color 0.3s ease;\n  }\n\n  tr[_ngcontent-%COMP%]:nth-child(even) {\n    background-color: var(--hover-color);\n  }\n\n  .button-space[_ngcontent-%COMP%] {\n    margin-left: 10px;\n  }\n\n  .loading[_ngcontent-%COMP%] {\n    text-align: center;\n    color: var(--secondary-color);\n    font-style: italic;\n  }"]})}return s})(),B=(()=>{class s{static#t=this.\u0275fac=function(m){return new(m||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild([{path:"",component:J,canActivate:[h.j]}]),g.Bz]})}return s})();var z=n(4891),G=n(5552);let N=(()=>{class s{static#t=this.\u0275fac=function(m){return new(m||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[e.ez,B,G.K8,z.E,p.hJ,T.EV,A.V,P.x]})}return s})()},7083:(M,_,n)=>{n.d(_,{K:()=>l});var e=n(529),p=n(2340),g=n(2384),h=n(4650);const f=p.N.baseUrl;let l=(()=>{class d{constructor(i){this.http=i}addUser(i){return this.http.post(`${f}auth/register`,i)}login(i,t){var o=new g.b;return o.email=i,o.password=t,this.http.post(`${f}auth/login`,o)}GetUserPermisions(){const u={headers:new e.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",u)}static#t=this.\u0275fac=function(t){return new(t||d)(h.LFG(e.eN))};static#e=this.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},1546:(M,_,n)=>{n.d(_,{j:()=>f});var e=n(4650),p=n(5384),g=n(9197),h=n(7083);let f=(()=>{class l{constructor(v,i,t){this.eventService=v,this.router=i,this._userService=t,this.isTokenValid=!1}canActivate(v,i){const t=this.eventService.getToken();return(""==t||null==t||null==t)&&this.router.navigateByUrl("/auth/login"),!0}static#t=this.\u0275fac=function(i){return new(i||l)(e.LFG(p.P),e.LFG(g.F0),e.LFG(h.K))};static#e=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},1383:(M,_,n)=>{n.d(_,{V:()=>t,o:()=>i});var e=n(4650),p=n(6895),g=n(805);function h(o,u){1&o&&e.GkF(0)}function f(o,u){if(1&o&&(e.TgZ(0,"div",3),e.YNc(1,h,1,0,"ng-container",4),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",r.leftTemplate)}}function l(o,u){1&o&&e.GkF(0)}function d(o,u){if(1&o&&(e.TgZ(0,"div",5),e.YNc(1,l,1,0,"ng-container",4),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",r.rightTemplate)}}const v=["*"];let i=(()=>{class o{constructor(r){this.el=r}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(r=>{switch(r.getType()){case"left":this.leftTemplate=r.template;break;case"right":this.rightTemplate=r.template}})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["p-toolbar"]],contentQueries:function(r,T,A){if(1&r&&e.Suo(A,g.jx,4),2&r){let P;e.iGM(P=e.CRH())&&(T.templates=P)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:v,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(r,T){1&r&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.YNc(2,f,2,1,"div",1),e.YNc(3,d,2,1,"div",2),e.qZA()),2&r&&(e.Tol(T.styleClass),e.Q6J("ngClass","p-toolbar p-component")("ngStyle",T.style),e.xp6(2),e.Q6J("ngIf",T.leftTemplate),e.xp6(1),e.Q6J("ngIf",T.rightTemplate))},dependencies:[p.mk,p.O5,p.tP,p.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),o})(),t=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez]}),o})()},5861:(M,_,n)=>{function e(g,h,f,l,d,v,i){try{var t=g[v](i),o=t.value}catch(u){return void f(u)}t.done?h(o):Promise.resolve(o).then(l,d)}function p(g){return function(){var h=this,f=arguments;return new Promise(function(l,d){var v=g.apply(h,f);function i(o){e(v,l,d,i,t,"next",o)}function t(o){e(v,l,d,i,t,"throw",o)}i(void 0)})}}n.d(_,{Z:()=>p})}}]);
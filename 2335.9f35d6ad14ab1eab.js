"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[2335],{3282:(U,p,i)=>{i.r(p),i.d(p,{TalonarioModule:()=>ot});var l=i(6895),c=i(9197),h=i(1546),t=i(4650),m=i(805),g=i(4266),d=i(1726),T=i(7747),S=i(5384),F=i(478),v=i(99),y=i(5593),Z=i(1740),C=i(1795),A=i(2453),P=i(1493);const D=["filter"];function N(o,s){1&o&&(t.TgZ(0,"div")(1,"h4")(2,"FONT",14),t._uU(3,"Producto agregado de forma correcta!!! "),t.qZA()()())}function Q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),a=t.MAs(7);return t.KtG(r.clear(a))}),t.qZA(),t.TgZ(2,"span",17),t._UZ(3,"i",18),t.TgZ(4,"input",19,20),t.NdJ("input",function(r){t.CHM(e);const a=t.oxw(),u=t.MAs(7);return t.KtG(a.onGlobalFilter(u,r))}),t.qZA()()()}}function M(o,s){1&o&&(t.TgZ(0,"tr")(1,"th")(2,"div",21),t._uU(3," Nombre "),t._UZ(4,"p-columnFilter",22),t.qZA()(),t.TgZ(5,"th")(6,"div",21),t._uU(7," Actual Correlativo "),t._UZ(8,"p-columnFilter",23),t.qZA()(),t.TgZ(9,"th")(10,"div",21),t._uU(11," Correlativo Inicial "),t._UZ(12,"p-columnFilter",24),t.qZA()(),t.TgZ(13,"th")(14,"div",21),t._uU(15," Correlativo Final "),t._UZ(16,"p-columnFilter",24),t.qZA()(),t.TgZ(17,"th")(18,"div",21),t._uU(19," Fecha Inicial "),t._UZ(20,"p-columnFilter",24),t.qZA()(),t.TgZ(21,"th")(22,"div",21),t._uU(23," Fecha Final "),t._UZ(24,"p-columnFilter",24),t.qZA()(),t.TgZ(25,"th")(26,"div",21),t._uU(27," CAI "),t._UZ(28,"p-columnFilter",25),t.qZA()()())}function B(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",28),t._uU(10),t.qZA(),t.TgZ(11,"td",28),t._uU(12),t.qZA(),t.TgZ(13,"td",28),t._uU(14),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.actualCorrelative," "),t.xp6(2),t.hij(" ",e.initialCorrelative," "),t.xp6(2),t.hij(" ",e.finalCorrelative," "),t.xp6(2),t.hij(" ",e.initialDate," "),t.xp6(2),t.hij(" ",e.finalDate," "),t.xp6(2),t.hij(" ",e.cai," ")}}function O(o,s){1&o&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"No se encontraron correlativos."),t.qZA()())}function E(o,s){1&o&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"Obteniendo los correlativos... Espere..."),t.qZA()())}function I(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showAddCorrelative=!1)}),t.qZA()}}const j=function(){return["name","categoryName","productPrice","status"]},L=function(){return{width:"850px"}};let Y=(()=>{class o{constructor(e,n,r,a,u){this.router=e,this.customerService=n,this.productService=r,this.messageService=a,this.eventService=u,this.ProductToInvoiceSelected=new t.vpe,this.CorrelativeList=[],this.showAddCorrelative=!1,this.showProductAdded=!1,this.defaultProductQuantity=1,this.addProductDialog=!1,this.customers1=[],this.showProgressBar=!1,this.selectedCustomers1=[],this.selectedCustomer={},this.representatives=[],this.loading=!0,this.redirect=!1,this.AccessName="/pages/talonarios",this.value()}ngOnChanges(e){}ngOnInit(){const n=this.eventService.getPermisionsException().split(",").map(r=>r.trim());this.redirect=n.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.customerService.getCustomersLarge().then(r=>{this.customers1=r,this.loading=!1,this.customers1.forEach(a=>a.date=new Date(a.date))})}onSort(){this.updateRowGroupMetaData()}updateRowGroupMetaData(){this.rowGroupMetadata={}}confirmQuantity(){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}selectProduct(e){this.showProductAdded=!1,this.addProductDialog=!0,this.productSelected=e}formatCurrency(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(e,n){e.filterGlobal(n.target.value,"contains")}changeQuantity(e){this.currentQuantity=e}clear(e){e.clear(),this.filter.nativeElement.value=""}keyEnterPress(e){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}cancelAddQuantityDialog(){this.showProductAdded=!1,this.currentQuantity=void 0,this.addProductDialog=!1}emitProductDTO(){this.showProductAdded=!0;var e=new g.i;e.id=this.productSelected?.productId,e.name=this.productSelected?.productName,e.code=this.productSelected?.productName,e.quantity=this.currentQuantity,e.price=this.productSelected?.productPrice,e.total=e.price*this.currentQuantity,this.productSelected=void 0,this.currentQuantity=void 0,this.ProductToInvoiceSelected.emit(e)}value(){this.productService.getCorrelative(this.eventService.getToken()).subscribe(e=>{e.data?this.CorrelativeList=e.data:this.messageService.add({severity:"error",summary:"Error",detail:e.message,life:3e3}),this.showProgressBar=!1},e=>{this.showProgressBar=!1,this.messageService.add({severity:"error",summary:"Error",detail:e,life:3e3})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(c.F0),t.Y36(d.v),t.Y36(T.M),t.Y36(m.ez),t.Y36(S.P))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(n,r){if(1&n&&t.Gf(D,5),2&n){let a;t.iGM(a=t.CRH())&&(r.filter=a.first)}},inputs:{productsToShow:"productsToShow"},outputs:{ProductToInvoiceSelected:"ProductToInvoiceSelected"},features:[t._Bn([m.ez,m.YP]),t.TTD],decls:17,vars:13,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["dataKey","pointOfSaleId","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","",3,"visible","modal","visibleChange"],["pTemplate","footer"],["COLOR","green"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","name","display","menu","placeholder","Buscar por codigo"],["type","text","field","cai","display","menu","placeholder","Buscar por nombre"],["type","text","field","cai","display","menu","placeholder","Buscar por precio"],["type","text","field","cai","display","menu","placeholder","Buscar por categoria"],[2,"min-width","12rem"],[2,"min-width","14rem"],[2,"min-width","10rem"],["colspan","7"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"]],template:function(n,r){1&n&&(t.YNc(0,N,4,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"p-toast"),t.TgZ(5,"button",4),t.NdJ("click",function(){return r.showAddCorrelative=!0}),t.qZA(),t.TgZ(6,"p-table",5,6),t.YNc(8,Q,6,0,"ng-template",7),t.YNc(9,M,29,0,"ng-template",8),t.YNc(10,B,15,7,"ng-template",9),t.YNc(11,O,3,0,"ng-template",10),t.YNc(12,E,3,0,"ng-template",11),t.qZA()()(),t.TgZ(13,"p-dialog",12),t.NdJ("visibleChange",function(u){return r.showAddCorrelative=u}),t.TgZ(14,"div"),t._UZ(15,"app-sar-correlative"),t.qZA(),t.YNc(16,I,1,0,"ng-template",13),t.qZA()()),2&n&&(t.Q6J("ngIf",r.showProductAdded),t.xp6(6),t.Q6J("value",r.CorrelativeList)("rows",10)("loading",r.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",t.DdM(11,j)),t.xp6(7),t.Akn(t.DdM(12,L)),t.Q6J("visible",r.showAddCorrelative)("modal",!0))},dependencies:[l.O5,F.y,v.iA,m.jx,v.xl,y.Hq,Z.o,C.H,A.FN,P.V],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}form[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;width:50%}"]})}return o})(),b=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild([{path:"",component:Y,canActivate:[h.j]}]),c.Bz]})}return o})();var J=i(4891),G=i(4144),x=i(5047),w=i(585),R=i(782),z=i(7932),H=i(5108),K=i(5552),f=i(4006),W=i(8235),X=i(2210),$=i(5722),V=i(1167),q=i(8177),k=i(6408),_=i(3162),tt=i(4385),et=i(9549),it=i(7392);let ot=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[l.ez,b,J.E,G.c,v.U$,x.L$,it.Ps,et.lN,tt.LD,_.Cv,f.u5,l.ez,f.u5,k.Xt,y.hJ,q.JH,Z.j,V.KZ,C.T,$.q4,X.kW,W.q,A.EV,P.S,x.L$,f.UX,K.K8,H.x,z.L,R.N6,w._8]})}return o})()},7116:(U,p,i)=>{i.d(p,{R:()=>h});var l=i(4650),c=i(3162);let h=(()=>{class t{constructor(){}static#t=this.\u0275fac=function(d){return new(d||t)};static#e=this.\u0275cmp=l.Xpm({type:t,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(d,T){1&d&&l._UZ(0,"mat-progress-bar",0)},dependencies:[c.pW],encapsulation:2})}return t})()}}]);
"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7817],{7817:(Fe,A,o)=>{o.r(A),o.d(A,{TalonarioModule:()=>xe});var p=o(9808),I=o(5077),P=o(1546),e=o(5e3),v=o(9783),D=o(4266),Q=o(1726),x=o(7747),F=o(5384),n=o(3075),q=o(9019);class J{}var m=o(845),g=o(1424),h=o(5787),_=o(6198),S=o(7531),y=o(5652),O=o(7116);function Y(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}const w=function(){return{width:"500px",height:"50px"}};function M(i,a){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Espere......"),e.qZA(),e._UZ(3,"p-progressSpinner",1),e.qZA()),2&i&&(e.xp6(3),e.Akn(e.DdM(2,w)))}function B(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un Correlativo Inicial valido!!! "),e.qZA()())}function L(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un Correlativo Final valido!!! "),e.qZA()())}function j(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar una fecha de inicio del talonario valida!!! "),e.qZA()())}function E(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar una fecha final del talonario valida!!! "),e.qZA()())}function H(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un correlativo inicial valido "),e.qZA()())}function G(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un correlativo final valido "),e.qZA()())}function R(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un CAI valido "),e.qZA()())}function z(i,a){1&i&&(e.TgZ(0,"p")(1,"FONT",20),e._uU(2,"Debe ingresar un nombre valido "),e.qZA()())}function K(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function W(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.createCorrelative())}),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5"),e._uU(6,"Correlativo de Facturas"),e.qZA(),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",6)(12,"label",7),e._uU(13,"Numero Inicial"),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",6)(16,"label",7),e._uU(17,"Numero Final"),e.qZA(),e._UZ(18,"input",10),e.qZA(),e.TgZ(19,"div",6)(20,"label",11),e._uU(21,"Fecha Inicial"),e.qZA(),e._UZ(22,"p-calendar",12),e.qZA(),e.TgZ(23,"div",6)(24,"label",11),e._uU(25,"Fecha Final"),e.qZA(),e._UZ(26,"p-calendar",13),e.qZA(),e.TgZ(27,"div",6)(28,"label",11),e._uU(29,"Correlativo Inicial"),e.qZA(),e._UZ(30,"input",14),e.qZA(),e.TgZ(31,"div",6)(32,"label",11),e._uU(33,"Correlativo Final"),e.qZA(),e._UZ(34,"input",15),e.qZA(),e.TgZ(35,"div",6)(36,"label",11),e._uU(37,"CAI"),e.qZA(),e._UZ(38,"input",16),e.qZA(),e.TgZ(39,"div",17)(40,"div",18),e.YNc(41,B,3,0,"p",0),e.YNc(42,L,3,0,"p",0),e.YNc(43,j,3,0,"p",0),e.YNc(44,E,3,0,"p",0),e.YNc(45,H,3,0,"p",0),e.YNc(46,G,3,0,"p",0),e.YNc(47,R,3,0,"p",0),e.YNc(48,z,3,0,"p",0),e.qZA()(),e._UZ(49,"button",19),e.qZA(),e.YNc(50,K,2,0,"div",0),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.correlativeForm),e.xp6(21),e.Q6J("showIcon",!0),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(15),e.Q6J("ngIf",t.validate("InitialCorrelative")),e.xp6(1),e.Q6J("ngIf",t.validate("FinalCorrelative")),e.xp6(1),e.Q6J("ngIf",t.validate("InitialDate")),e.xp6(1),e.Q6J("ngIf",t.validate("FinalDate")),e.xp6(1),e.Q6J("ngIf",t.validate("completeInitialCorrelative")),e.xp6(1),e.Q6J("ngIf",t.validate("completeFinalCorrelative")),e.xp6(1),e.Q6J("ngIf",t.validate("CAI")),e.xp6(1),e.Q6J("ngIf",t.validate("name")),e.xp6(2),e.Q6J("ngIf",t.showProgressBar)}}let X=(()=>{class i{constructor(t,r,l){this.fb=t,this.eventService=r,this.productService=l,this.showProgressBar=!1,this.formSend=!1,this.isLoading=!1,this.correlativeCreated=!1,this.correlativeForm=this.fb.group({InitialCorrelative:[0,[n.kI.required,n.kI.min(0)]],FinalCorrelative:[0,[n.kI.required,n.kI.min(50)]],InitialDate:["",[n.kI.required]],FinalDate:["",n.kI.required],completeInitialCorrelative:["",[n.kI.required,n.kI.minLength(15)]],completeFinalCorrelative:["",[n.kI.required,n.kI.minLength(15)]],CAI:["",[n.kI.required,n.kI.minLength(10)]],name:["",[n.kI.required,n.kI.minLength(5)]]}),this.correlativeCreated=r.getHasCorrelative()==q.N.SuccessResponse}validate(t){var r;return!(!(null===(r=this.correlativeForm.get(t))||void 0===r?void 0:r.invalid)||1!=this.formSend)}createCorrelative(){var t,r,l,s,d,C,T,Z;if(this.formSend=!0,this.showProgressBar=!0,this.correlativeForm.valid){var c=new J;c.CAI=null===(t=this.correlativeForm.get("CAI"))||void 0===t?void 0:t.value,c.InitialCorrelative=null===(r=this.correlativeForm.get("InitialCorrelative"))||void 0===r?void 0:r.value,c.FinalCorrelative=null===(l=this.correlativeForm.get("FinalCorrelative"))||void 0===l?void 0:l.value,c.InitialDate=null===(s=this.correlativeForm.get("InitialDate"))||void 0===s?void 0:s.value,c.FinalDate=null===(d=this.correlativeForm.get("FinalDate"))||void 0===d?void 0:d.value,c.completeInitialCorrelative=null===(C=this.correlativeForm.get("completeInitialCorrelative"))||void 0===C?void 0:C.value,c.completeFinalCorrelative=null===(T=this.correlativeForm.get("completeFinalCorrelative"))||void 0===T?void 0:T.value,c.name=null===(Z=this.correlativeForm.get("name"))||void 0===Z?void 0:Z.value,c.userId=this.eventService.getToken(),this.productService.AddCorrelative(c).subscribe(u=>{u.data?(this.eventService.setToken(u.data.token),this.eventService.setHasEnterprise(u.data.hasEnterprise),this.eventService.setHasWareHouse(u.data.hasWareHouse),this.eventService.setHasPointOfSale(u.data.hasPointOfSale),this.eventService.setHasCorrelative(u.data.hasCorrelative),alert("Se registro de forma exitosa")):alert(u.message),this.showProgressBar=!1},u=>{this.showProgressBar=!1,alert(u)})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.qu),e.Y36(F.P),e.Y36(x.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sar-correlative"]],decls:3,vars:3,consts:[[4,"ngIf"],["styleClass","custom-spinner","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s"],[1,"form-material",3,"formGroup","ngSubmit"],[1,"grid",2,"margin-left","150px"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"field"],["htmlFor","email1"],["matInput","","pInputText","","placeholder","Ejemplo Talonario 1","type","text","formControlName","name",1,"form-control"],["matInput","","pInputText","","placeholder","Ejemplo 100","type","number","formControlName","InitialCorrelative",1,"form-control"],["matInput","","pInputText","","placeholder","Ejemplo 500","type","number","formControlName","FinalCorrelative"],["htmlFor","age1"],["inputId","icon","formControlName","InitialDate",3,"showIcon"],["inputId","icon","formControlName","FinalDate",3,"showIcon"],["pInputText","","id","age1","placeholder","Ejemplo 000-001-01-00000100","type","text","formControlName","completeInitialCorrelative"],["pInputText","","id","age1","placeholder","Ejemplo 000-001-01-00000500","type","text","formControlName","completeFinalCorrelative"],["pInputText","","id","age1","placeholder","CAI","type","text","formControlName","CAI"],[1,"row"],[1,"col","tex-danger"],["type","submit","pButton","","pRipple","","label","Save","icon","pi pi-check"],["COLOR","red"]],template:function(t,r){1&t&&(e.YNc(0,Y,2,0,"div",0),e.YNc(1,M,4,3,"div",0),e.YNc(2,W,51,12,"div",0)),2&t&&(e.Q6J("ngIf",r.showProgressBar),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",!r.isLoading))},dependencies:[n._Y,n.Fj,n.wV,n.JJ,n.JL,p.O5,m.Hq,g.o,h.H,n.sg,n.u,_.G,S.Nt,y.f,O.R],encapsulation:2}),i})();var f=o(8952),U=o(7773),N=o(5315);const $=["filter"];function V(i,a){1&i&&(e.TgZ(0,"div")(1,"h4")(2,"FONT",14),e._uU(3,"Producto agregado de forma correcta!!! "),e.qZA()()())}function k(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"button",16),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(),s=e.MAs(7);return e.KtG(l.clear(s))}),e.qZA(),e.TgZ(2,"span",17),e._UZ(3,"i",18),e.TgZ(4,"input",19,20),e.NdJ("input",function(l){e.CHM(t);const s=e.oxw(),d=e.MAs(7);return e.KtG(s.onGlobalFilter(d,l))}),e.qZA()()()}}function ee(i,a){1&i&&(e.TgZ(0,"tr")(1,"th")(2,"div",21),e._uU(3," Nombre "),e._UZ(4,"p-columnFilter",22),e.qZA()(),e.TgZ(5,"th")(6,"div",21),e._uU(7," Actual Correlativo "),e._UZ(8,"p-columnFilter",23),e.qZA()(),e.TgZ(9,"th")(10,"div",21),e._uU(11," Correlativo Inicial "),e._UZ(12,"p-columnFilter",24),e.qZA()(),e.TgZ(13,"th")(14,"div",21),e._uU(15," Correlativo Final "),e._UZ(16,"p-columnFilter",24),e.qZA()(),e.TgZ(17,"th")(18,"div",21),e._uU(19," Fecha Inicial "),e._UZ(20,"p-columnFilter",24),e.qZA()(),e.TgZ(21,"th")(22,"div",21),e._uU(23," Fecha Final "),e._UZ(24,"p-columnFilter",24),e.qZA()(),e.TgZ(25,"th")(26,"div",21),e._uU(27," CAI "),e._UZ(28,"p-columnFilter",25),e.qZA()()())}function te(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td",26),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._uU(4),e.qZA(),e.TgZ(5,"td",27),e._uU(6),e.qZA(),e.TgZ(7,"td",27),e._uU(8),e.qZA(),e.TgZ(9,"td",28),e._uU(10),e.qZA(),e.TgZ(11,"td",28),e._uU(12),e.qZA(),e.TgZ(13,"td",28),e._uU(14),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.actualCorrelative," "),e.xp6(2),e.hij(" ",t.initialCorrelative," "),e.xp6(2),e.hij(" ",t.finalCorrelative," "),e.xp6(2),e.hij(" ",t.initialDate," "),e.xp6(2),e.hij(" ",t.finalDate," "),e.xp6(2),e.hij(" ",t.cai," ")}}function ie(i,a){1&i&&(e.TgZ(0,"tr")(1,"td",29),e._uU(2,"No se encontraron correlativos."),e.qZA()())}function oe(i,a){1&i&&(e.TgZ(0,"tr")(1,"td",29),e._uU(2,"Obteniendo los correlativos... Espere..."),e.qZA()())}function re(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.showAddCorrelative=!1)}),e.qZA()}}const ae=function(){return["name","categoryName","productPrice","status"]},ne=function(){return{width:"850px"}};let le=(()=>{class i{constructor(t,r,l,s){this.customerService=t,this.productService=r,this.messageService=l,this.eventService=s,this.ProductToInvoiceSelected=new e.vpe,this.CorrelativeList=[],this.showAddCorrelative=!1,this.showProductAdded=!1,this.defaultProductQuantity=1,this.addProductDialog=!1,this.customers1=[],this.showProgressBar=!1,this.selectedCustomers1=[],this.selectedCustomer={},this.representatives=[],this.loading=!0,this.value()}ngOnChanges(t){}ngOnInit(){this.customerService.getCustomersLarge().then(t=>{this.customers1=t,this.loading=!1,this.customers1.forEach(r=>r.date=new Date(r.date))})}onSort(){this.updateRowGroupMetaData()}updateRowGroupMetaData(){this.rowGroupMetadata={}}confirmQuantity(){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}selectProduct(t){this.showProductAdded=!1,this.addProductDialog=!0,this.productSelected=t}formatCurrency(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(t,r){t.filterGlobal(r.target.value,"contains")}changeQuantity(t){this.currentQuantity=t}clear(t){t.clear(),this.filter.nativeElement.value=""}keyEnterPress(t){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}cancelAddQuantityDialog(){this.showProductAdded=!1,this.currentQuantity=void 0,this.addProductDialog=!1}emitProductDTO(){var t,r,l,s;this.showProductAdded=!0;var d=new D.i;d.id=null===(t=this.productSelected)||void 0===t?void 0:t.productId,d.name=null===(r=this.productSelected)||void 0===r?void 0:r.productName,d.code=null===(l=this.productSelected)||void 0===l?void 0:l.productName,d.quantity=this.currentQuantity,d.price=null===(s=this.productSelected)||void 0===s?void 0:s.productPrice,d.total=d.price*this.currentQuantity,this.productSelected=void 0,this.currentQuantity=void 0,this.ProductToInvoiceSelected.emit(d)}value(){this.productService.getCorrelative(this.eventService.getToken()).subscribe(t=>{t.data?this.CorrelativeList=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1},t=>{this.showProgressBar=!1,this.messageService.add({severity:"error",summary:"Error",detail:t,life:3e3})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Q.v),e.Y36(x.M),e.Y36(v.ez),e.Y36(F.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,r){if(1&t&&e.Gf($,5),2&t){let l;e.iGM(l=e.CRH())&&(r.filter=l.first)}},inputs:{productsToShow:"productsToShow"},outputs:{ProductToInvoiceSelected:"ProductToInvoiceSelected"},features:[e._Bn([v.ez,v.YP]),e.TTD],decls:17,vars:13,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["dataKey","pointOfSaleId","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","",3,"visible","modal","visibleChange"],["pTemplate","footer"],["COLOR","green"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","name","display","menu","placeholder","Buscar por codigo"],["type","text","field","cai","display","menu","placeholder","Buscar por nombre"],["type","text","field","cai","display","menu","placeholder","Buscar por precio"],["type","text","field","cai","display","menu","placeholder","Buscar por categoria"],[2,"min-width","12rem"],[2,"min-width","14rem"],[2,"min-width","10rem"],["colspan","7"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"]],template:function(t,r){1&t&&(e.YNc(0,V,4,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"p-toast"),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.showAddCorrelative=!0}),e.qZA(),e.TgZ(6,"p-table",5,6),e.YNc(8,k,6,0,"ng-template",7),e.YNc(9,ee,29,0,"ng-template",8),e.YNc(10,te,15,7,"ng-template",9),e.YNc(11,ie,3,0,"ng-template",10),e.YNc(12,oe,3,0,"ng-template",11),e.qZA()()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(s){return r.showAddCorrelative=s}),e.TgZ(14,"div"),e._UZ(15,"app-sar-correlative"),e.qZA(),e.YNc(16,re,1,0,"ng-template",13),e.qZA()()),2&t&&(e.Q6J("ngIf",r.showProductAdded),e.xp6(6),e.Q6J("value",r.CorrelativeList)("rows",10)("loading",r.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(11,ae)),e.xp6(7),e.Akn(e.DdM(12,ne)),e.Q6J("visible",r.showAddCorrelative)("modal",!0))},dependencies:[p.O5,X,f.iA,v.jx,f.xl,m.Hq,g.o,h.H,U.FN,N.V],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}form[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;width:50%}"]}),i})(),se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[I.Bz.forChild([{path:"",component:le,canActivate:[P.j]}]),I.Bz]}),i})();var de=o(4891),b=o(7010),ce=o(3954),ue=o(7376),pe=o(6186),ve=o(8185),me=o(4036),ge=o(6526),he=o(2841),fe=o(4776),Ce=o(8018),Te=o(5899),Ze=o(5009),Ae=o(4106),Ie=o(5245);let xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,se,de.E,S.c,f.U$,b.L$,Ie.Ps,Ae.lN,Ze.LD,Te.Cv,n.u5,p.ez,n.u5,Ce.Xt,m.hJ,fe.JH,g.j,he.KZ,h.T,ge.q4,me.kW,ve.q,U.EV,N.S,b.L$,n.UX,pe.K,ue.x,_.L,ce.N6,y._8]}),i})()}}]);
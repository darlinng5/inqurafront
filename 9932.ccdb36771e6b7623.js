"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[9932],{9932:(A,h,o)=>{o.r(h),o.d(h,{SupplierModule:()=>B});var t=o(6895),c=o(9197),f=o(1546),d=o(805);class T{}var e=o(4650),g=o(7747),C=o(5384),a=o(99),u=o(2453),i=o(1383),m=o(5593),l=o(1493),v=o(1740),Z=o(4006),S=o(7116);function y(r,b){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function I(r,b){if(1&r){const n=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"p-toast"),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.openNew())}),e.qZA()()}}function N(r,b){1&r&&(e.TgZ(0,"tr")(1,"th",22),e._uU(2,"Rtn "),e._UZ(3,"p-sortIcon",23),e.qZA(),e.TgZ(4,"th",24),e._uU(5,"Nombre "),e._UZ(6,"p-sortIcon",25),e.qZA(),e.TgZ(7,"th",26),e._uU(8,"Apellido "),e._UZ(9,"p-sortIcon",27),e.qZA(),e.TgZ(10,"th",28),e._uU(11,"Direcci\xf3n "),e._UZ(12,"p-sortIcon",29),e.qZA(),e.TgZ(13,"th",30),e._uU(14,"Celular "),e._UZ(15,"p-sortIcon",31),e.qZA()())}function E(r,b){if(1&r&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()()),2&r){const n=b.$implicit;e.xp6(2),e.Oqu(n.rtn),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.middleName),e.xp6(2),e.Oqu(n.address),e.xp6(2),e.Oqu(n.cellPhone)}}function P(r,b){1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function U(r,b){if(1&r){const n=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.saveCostumer())}),e.qZA()}}const D=function(){return{"min-width":"50rem"}},x=function(){return[10,25,50]},O=function(){return{width:"850px"}};let R=(()=>{class r{constructor(n,p,s,M){this.router=n,this.productService=p,this.eventService=s,this.messageService=M,this.showDialog=!1,this.isCreating=!0,this.showProgressBar=!1,this.redirect=!1,this.AccessName="/pages/supplier"}ngOnInit(){const p=this.eventService.getPermisionsException().split(",").map(s=>s.trim());this.redirect=p.includes(this.AccessName),this.redirect&&this.router.navigateByUrl("/pages/unautorized"),this.productService.getProductsSmall().then(s=>this.products1=s),this.GetSuppliers()}hideDialog(){this.isCreating=!1,this.showDialog=!1}openNew(){this.showDialog=!0,this.isCreating=!0}saveCostumer(){var n=new T;n.id=this.isCreating?0:this.costumerId,n.rtn=null==this.costumerRTN?"":this.costumerRTN,n.name=null==this.costumerName?"":this.costumerName,n.middleName=null==this.costumerMiddleName?"":this.costumerMiddleName,n.address=null==this.costumerAddress?"":this.costumerAddress,n.cellphone=null==this.costumerCellphone?"":this.costumerCellphone,n.userIdentifiquer=this.eventService.getToken(),n.isCreating=this.isCreating,this.AddNewCostumer(n)}AddNewCostumer(n){this.showProgressBar=!0,this.productService.AddNewSupplier(n).subscribe(p=>{p.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El proveedor "+n.name+" "+n.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetSuppliers()):this.messageService.add({severity:"error",summary:"Error",detail:p.message,life:3e3}),this.showProgressBar=!1})}GetSuppliers(){this.showProgressBar=!0,this.productService.GetSupplierByEnterprise(this.eventService.getToken()).subscribe(n=>{n.data?this.costumer=n.data:this.messageService.add({severity:"error",summary:"Error",detail:n.message,life:3e3}),this.showProgressBar=!1})}static#e=this.\u0275fac=function(p){return new(p||r)(e.Y36(c.F0),e.Y36(g.M),e.Y36(C.P),e.Y36(d.ez))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e._Bn([d.ez])],decls:39,vars:20,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[1,"field","grid"],["htmlFor","email3",1,"col-12","mb-2","md:col-2","md:mb-0"],[1,"col-12","md:col-10"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","RTN",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Apellido",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Celular",3,"ngModel","ngModelChange"],["autocomplete","off","pInputText","","id","email3","type","text","placeholder","Direcci\xf3n",3,"ngModel","ngModelChange"],["pTemplate","footer"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","rtn",2,"width","20%"],["field","rtn"],["pSortableColumn","name",2,"width","20%"],["field","name"],["pSortableColumn","middleName",2,"width","20%"],["field","middleName"],["pSortableColumn","address",2,"width","20%"],["field","address"],["pSortableColumn","cellPhone",2,"width","20%"],["field","cellPhone"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(p,s){1&p&&(e.YNc(0,y,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,I,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,N,16,0,"ng-template",7),e.YNc(9,E,11,5,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(_){return s.showDialog=_}),e.YNc(11,P,2,0,"div",0),e.TgZ(12,"div",10)(13,"div",11)(14,"label",12),e._uU(15,"RTN"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("ngModelChange",function(_){return s.costumerRTN=_}),e.qZA()()(),e.TgZ(18,"div",11)(19,"label",12),e._uU(20,"Nombre"),e.qZA(),e.TgZ(21,"div",13)(22,"input",15),e.NdJ("ngModelChange",function(_){return s.costumerName=_}),e.qZA()()(),e.TgZ(23,"div",11)(24,"label",12),e._uU(25,"Apellido"),e.qZA(),e.TgZ(26,"div",13)(27,"input",16),e.NdJ("ngModelChange",function(_){return s.costumerMiddleName=_}),e.qZA()()(),e.TgZ(28,"div",11)(29,"label",12),e._uU(30,"Celular"),e.qZA(),e.TgZ(31,"div",13)(32,"input",17),e.NdJ("ngModelChange",function(_){return s.costumerCellphone=_}),e.qZA()()(),e.TgZ(33,"div",11)(34,"label",12),e._uU(35,"Direcci\xf3n"),e.qZA(),e.TgZ(36,"div",13)(37,"input",18),e.NdJ("ngModelChange",function(_){return s.costumerAddress=_}),e.qZA()()()(),e.YNc(38,U,2,0,"ng-template",19),e.qZA()),2&p&&(e.Q6J("ngIf",s.showProgressBar),e.xp6(7),e.Q6J("value",s.costumer)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(17,D))("rowsPerPageOptions",e.DdM(18,x)),e.xp6(3),e.Akn(e.DdM(19,O)),e.Q6J("visible",s.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",s.showProgressBar),e.xp6(6),e.Q6J("ngModel",s.costumerRTN),e.xp6(5),e.Q6J("ngModel",s.costumerName),e.xp6(5),e.Q6J("ngModel",s.costumerMiddleName),e.xp6(5),e.Q6J("ngModel",s.costumerCellphone),e.xp6(5),e.Q6J("ngModel",s.costumerAddress))},dependencies:[t.O5,a.iA,d.jx,a.lQ,a.fz,u.FN,i.o,m.Hq,l.V,v.o,Z.Fj,Z.JJ,Z.On,S.R],encapsulation:2})}return r})(),w=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:R,canActivate:[f.j]}]),c.Bz]})}return r})();var J=o(4891);let B=(()=>{class r{static#e=this.\u0275fac=function(p){return new(p||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[t.ez,w,a.U$,u.EV,i.V,m.hJ,l.S,v.j,Z.u5,J.E]})}return r})()},2384:(A,h,o)=>{o.d(h,{b:()=>t});class t{}},7116:(A,h,o)=>{o.d(h,{R:()=>f});var t=o(4650),c=o(3162);let f=(()=>{class d{constructor(){}static#e=this.\u0275fac=function(g){return new(g||d)};static#t=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-progress-bar"]],decls:1,vars:0,consts:[["mode","indeterminate"]],template:function(g,C){1&g&&t._UZ(0,"mat-progress-bar",0)},dependencies:[c.pW],encapsulation:2})}return d})()},7083:(A,h,o)=>{o.d(h,{K:()=>e});var t=o(529),c=o(2340),f=o(2384),d=o(4650);const T=c.N.baseUrl;let e=(()=>{class g{constructor(a){this.http=a}addUser(a){return this.http.post(`${T}auth/register`,a)}login(a,u){var i=new f.b;return i.email=a,i.password=u,this.http.post(`${T}auth/login`,i)}GetUserPermisions(){const m={headers:new t.WM({"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImRhcmxpbm5nNUBnbWFpbC5jb20iLCJuYW1lIjoiRGFybGluIiwiRW50ZXJwcmlzZSI6IjEiLCJXYXJlSG91c2UiOiIyIiwiUG9pbnRPZlNhbGUiOiIzIiwiQ29ycmVsYXRpdmUiOiI0IiwibmJmIjoxNjYzMjExNTA1LCJleHAiOjE2NjMyOTc5MDUsImlhdCI6MTY2MzIxMTUwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MTM0In0.ZZQR0YuVwR5erkrQoErfRnlT9stXaVuDpt2SjFkl8PiAy0RP18-4nmyTRm8yYGqkPM-Eht-EbreVdHFYyRgSxQ"})};return this.http.get("http://localhost:5134/api/auth/test",m)}static#e=this.\u0275fac=function(u){return new(u||g)(d.LFG(t.eN))};static#t=this.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},1546:(A,h,o)=>{o.d(h,{j:()=>T});var t=o(4650),c=o(5384),f=o(9197),d=o(7083);let T=(()=>{class e{constructor(C,a,u){this.eventService=C,this.router=a,this._userService=u,this.isTokenValid=!1}canActivate(C,a){const u=this.eventService.getToken();return(""==u||null==u||null==u)&&this.router.navigateByUrl("/auth/login"),!0}static#e=this.\u0275fac=function(a){return new(a||e)(t.LFG(c.P),t.LFG(f.F0),t.LFG(d.K))};static#t=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},1383:(A,h,o)=>{o.d(h,{V:()=>u,o:()=>a});var t=o(4650),c=o(6895),f=o(805);function d(i,m){1&i&&t.GkF(0)}function T(i,m){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,d,1,0,"ng-container",4),t.qZA()),2&i){const l=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",l.leftTemplate)}}function e(i,m){1&i&&t.GkF(0)}function g(i,m){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,e,1,0,"ng-container",4),t.qZA()),2&i){const l=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",l.rightTemplate)}}const C=["*"];let a=(()=>{class i{constructor(l){this.el=l}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(l=>{switch(l.getType()){case"left":this.leftTemplate=l.template;break;case"right":this.rightTemplate=l.template}})}}return i.\u0275fac=function(l){return new(l||i)(t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-toolbar"]],contentQueries:function(l,v,Z){if(1&l&&t.Suo(Z,f.jx,4),2&l){let S;t.iGM(S=t.CRH())&&(v.templates=S)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:C,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(l,v){1&l&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.YNc(2,T,2,1,"div",1),t.YNc(3,g,2,1,"div",2),t.qZA()),2&l&&(t.Tol(v.styleClass),t.Q6J("ngClass","p-toolbar p-component")("ngStyle",v.style),t.xp6(2),t.Q6J("ngIf",v.leftTemplate),t.xp6(1),t.Q6J("ngIf",v.rightTemplate))},dependencies:[c.mk,c.O5,c.tP,c.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),u=(()=>{class i{}return i.\u0275fac=function(l){return new(l||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez]}),i})()}}]);
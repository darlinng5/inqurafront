"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7442],{7442:(H,m,r)=>{r.r(m),r.d(m,{UsersModule:()=>Y});var u=r(9808),c=r(7449),Z=r(1546),g=r(9783);class h{}class U{}var e=r(5e3),b=r(7747),S=r(5384),p=r(8952),_=r(7773),f=r(4534),v=r(845),T=r(5315),d=r(3075),A=r(7116),w=r(6768);function M(n,i){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",30),e._UZ(1,"p-toast"),e.TgZ(2,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openNew())}),e.qZA()()}}function x(n,i){1&n&&(e.TgZ(0,"tr")(1,"th",32),e._uU(2,"Nombre"),e._UZ(3,"p-sortIcon",33),e.qZA(),e.TgZ(4,"th",34),e._uU(5,"Apellido "),e._UZ(6,"p-sortIcon",35),e.qZA(),e.TgZ(7,"th",36),e._uU(8,"Correo "),e._UZ(9,"p-sortIcon",37),e.qZA(),e.TgZ(10,"th",38),e._uU(11,"Celular "),e._UZ(12,"p-sortIcon",37),e.qZA(),e.TgZ(13,"th",39),e._uU(14,"Rol "),e._UZ(15,"p-sortIcon",37),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Asignar Talonario"),e.qZA()())}function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",40),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.AsignarTalonario(l))}),e.qZA()()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.middleName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.cellphone),e.xp6(2),e.Oqu(t.role)}}function J(n,i){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function q(n,i){if(1&n&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function O(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA()}}function P(n,i){1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-progress-bar"),e.qZA())}function D(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"label",46),e._uU(4,"Usuario: "),e.TgZ(5,"strong"),e._uU(6),e.qZA()()()()(),e.TgZ(7,"div",43)(8,"div",44)(9,"div",45)(10,"label",46),e._uU(11,"Punto de Venta"),e.qZA(),e.TgZ(12,"app-drop-down",47),e.NdJ("ValueSelectedChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filterPointOfSale(a))}),e.qZA()(),e.TgZ(13,"div",45)(14,"label",48),e._uU(15,"Talonario"),e.qZA(),e.TgZ(16,"app-drop-down",47),e.NdJ("ValueSelectedChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.filterTalonario(a))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.AsE(" ",t.userSelectd.name," ",t.userSelectd.middleName,""),e.xp6(6),e.Q6J("IsCreating",!1)("DropDownDataSource",t.pointOfSaleValues),e.xp6(4),e.Q6J("IsCreating",!1)("DropDownDataSource",t.talonarios)}}function B(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showChangeTalonarioDialog=!1)}),e.qZA(),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveUserTalonario())}),e.qZA()}}const I=function(){return{"min-width":"50rem"}},G=function(){return[10,25,50]},C=function(){return{width:"850px"}};let Q=(()=>{class n{constructor(t,o,a){this.productService=t,this.eventService=o,this.messageService=a,this.pointOfSaleId=0,this.talonarioId=0,this.pointOfSaleValues=[],this.talonarios=[],this.showDialog=!1,this.users=[],this.user=new h,this.userSelectd=new h,this.roles=["SuperAdmin","Administrador","Vendedor"],this.showProgressBar=!1,this.showChangeTalonarioDialog=!1}ngOnInit(){this.GetSuppliers(),this.GetPointOfSaleValuesByWareHouse(),this.GetTalonariosByWareHouse()}hideDialog(){this.showDialog=!1}openNew(){this.showDialog=!0}onSubmit(t){this.user.userId=this.eventService.getToken(),t.valid&&this.AddNewUser(this.user)}AsignarTalonario(t){this.userSelectd=t,this.showChangeTalonarioDialog=!0}AddNewUser(t){this.showProgressBar=!0,this.productService.AddNewUser(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:"El usuario "+t.name+" "+t.middleName+" se ha guardado",life:3e3}),this.showDialog=!1,this.GetSuppliers()):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}GetPointOfSaleValuesByWareHouse(){this.productService.GetPoinOfSaleValues(this.eventService.getToken()).subscribe(t=>{t.data?this.pointOfSaleValues=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})}GetTalonariosByWareHouse(){this.productService.GetTalonariosValues(this.eventService.getToken()).subscribe(t=>{t.data?this.talonarios=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3})})}filterTalonario(t){null!=t&&(this.talonarioId=t)}filterPointOfSale(t){null!=t&&(this.pointOfSaleId=t)}saveUserTalonario(){var t=new U;t.pointOfSale=this.pointOfSaleId,t.talonario=this.talonarioId,t.userEmail=null==this.userSelectd.email?"":this.userSelectd.email,t.userId=this.eventService.getToken(),this.showProgressBar=!0,this.productService.AddNewUserTalonario(t).subscribe(o=>{o.data?(this.messageService.add({severity:"success",summary:"Success",detail:o.data,life:8e3}),this.showChangeTalonarioDialog=!1):this.messageService.add({severity:"error",summary:"Error",detail:o.message,life:3e3}),this.showProgressBar=!1})}GetSuppliers(){this.showProgressBar=!0,this.productService.GetUsersByWareHouse(this.eventService.getToken()).subscribe(t=>{t.data?this.users=t.data:this.messageService.add({severity:"error",summary:"Error",detail:t.message,life:3e3}),this.showProgressBar=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.M),e.Y36(S.P),e.Y36(g.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([g.ez])],decls:47,vars:29,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Nuevo Usuario",3,"visible","modal","visibleChange"],[1,"card","p-fluid"],[3,"ngSubmit"],["form","ngForm"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","middleName"],["type","text","id","middleName","name","middleName",3,"ngModel","ngModelChange"],["for","role"],["id","role","name","role","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","email"],["type","email","id","email","name","email","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$",3,"ngModel","ngModelChange"],["for","cellphone"],["type","tel","id","cellphone","name","cellphone",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","","minlength","5",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"],["pTemplate","footer"],["header","Asignar Talonario",3,"visible","modal","visibleChange"],["pTemplate","content"],[1,"my-2"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pSortableColumn","name",2,"width","20%"],["field","rtn"],["pSortableColumn","middleName",2,"width","20%"],["field","name"],["pSortableColumn","email",2,"width","20%"],["field","middleName"],["pSortableColumn","cellphone",2,"width","20%"],["pSortableColumn","role",2,"width","20%"],["pButton","","pRipple","","icon","pi pi-book",1,"p-button-rounded","p-button-help",3,"click"],[3,"value"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],[1,"field"],[1,"formgrid","grid"],[1,"field","col"],["for","user"],[3,"IsCreating","DropDownDataSource","ValueSelectedChange"],["for","point"],["pButton","","pRipple","","icon","pi pi-check","label","Guardar",1,"p-button-text",3,"click"]],template:function(t,o){if(1&t){const a=e.EpF();e.YNc(0,M,2,0,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"p-toolbar",4),e.YNc(6,N,3,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6),e.YNc(8,x,18,0,"ng-template",7),e.YNc(9,y,13,5,"ng-template",8),e.qZA()()()()(),e.TgZ(10,"p-dialog",9),e.NdJ("visibleChange",function(s){return o.showDialog=s}),e.YNc(11,J,2,0,"div",0),e.TgZ(12,"div",10)(13,"form",11,12),e.NdJ("ngSubmit",function(){e.CHM(a);const s=e.MAs(14);return e.KtG(o.onSubmit(s))}),e.TgZ(15,"div")(16,"label",13),e._uU(17,"Nombre:"),e.qZA(),e.TgZ(18,"input",14),e.NdJ("ngModelChange",function(s){return o.user.name=s}),e.qZA()(),e.TgZ(19,"div")(20,"label",15),e._uU(21,"Apellido:"),e.qZA(),e.TgZ(22,"input",16),e.NdJ("ngModelChange",function(s){return o.user.middleName=s}),e.qZA()(),e.TgZ(23,"div")(24,"label",17),e._uU(25,"Rol:"),e.qZA(),e.TgZ(26,"select",18),e.NdJ("ngModelChange",function(s){return o.user.role=s}),e.YNc(27,q,2,2,"option",19),e.qZA()(),e.TgZ(28,"div")(29,"label",20),e._uU(30,"Correo:"),e.qZA(),e.TgZ(31,"input",21),e.NdJ("ngModelChange",function(s){return o.user.email=s}),e.qZA()(),e.TgZ(32,"div")(33,"label",22),e._uU(34,"Celular:"),e.qZA(),e.TgZ(35,"input",23),e.NdJ("ngModelChange",function(s){return o.user.cellphone=s}),e.qZA()(),e.TgZ(36,"div")(37,"label",24),e._uU(38,"Contrase\xf1a:"),e.qZA(),e.TgZ(39,"input",25),e.NdJ("ngModelChange",function(s){return o.user.password=s}),e.qZA()(),e.TgZ(40,"button",26),e._uU(41,"Guardar"),e.qZA()()(),e.YNc(42,O,1,0,"ng-template",27),e.qZA(),e.TgZ(43,"p-dialog",28),e.NdJ("visibleChange",function(s){return o.showChangeTalonarioDialog=s}),e.YNc(44,P,2,0,"div",0),e.YNc(45,D,17,6,"ng-template",29),e.YNc(46,B,2,0,"ng-template",27),e.qZA()}if(2&t){const a=e.MAs(14);e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("value",o.users)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("tableStyle",e.DdM(25,I))("rowsPerPageOptions",e.DdM(26,G)),e.xp6(3),e.Akn(e.DdM(27,C)),e.Q6J("visible",o.showDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar),e.xp6(7),e.Q6J("ngModel",o.user.name),e.xp6(4),e.Q6J("ngModel",o.user.middleName),e.xp6(4),e.Q6J("ngModel",o.user.role),e.xp6(1),e.Q6J("ngForOf",o.roles),e.xp6(4),e.Q6J("ngModel",o.user.email),e.xp6(4),e.Q6J("ngModel",o.user.cellphone),e.xp6(4),e.Q6J("ngModel",o.user.password),e.xp6(1),e.Q6J("disabled",a.invalid),e.xp6(3),e.Akn(e.DdM(28,C)),e.Q6J("visible",o.showChangeTalonarioDialog)("modal",!0),e.xp6(1),e.Q6J("ngIf",o.showProgressBar)}},dependencies:[u.sg,u.O5,p.iA,g.jx,p.lQ,p.fz,_.FN,f.o,v.Hq,T.V,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.wO,d.c5,d.On,d.F,A.R,w.t],styles:['label[_ngcontent-%COMP%] {\n  color: #6b6d6e;\n  font-weight: bold;\n}\n\n\ninput[_ngcontent-%COMP%] {\n  border: 1px solid #ccc;\n  padding: 10px;\n  margin-bottom: 20px;\n  width: 100%;\n}\ninput[type="text"][_ngcontent-%COMP%] {\n  border-radius: 5px;\n}\n\ninput[type="password"][_ngcontent-%COMP%] {\n  border-radius: 15px;\n}\n\n\nbutton[type="submit"][_ngcontent-%COMP%] {\n  background-color: #0077c9;\n  color: #fff;\n  padding: 10px 20px;\n  border: none;\n  cursor: pointer;\n}\n\n\nbutton[type="submit"][disabled][_ngcontent-%COMP%] {\n  background-color: #ccc;\n  cursor: not-allowed;\n}']}),n})(),E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:Q,canActivate:[Z.j]}]),c.Bz]}),n})();var F=r(1424),V=r(4891);let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,E,p.U$,_.EV,f.V,v.hJ,T.S,F.j,d.u5,V.E]}),n})()}}]);
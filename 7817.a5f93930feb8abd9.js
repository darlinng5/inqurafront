"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[7817],{7817:(Ft,A,o)=>{o.r(A),o.d(A,{TalonarioModule:()=>xt});var p=o(9808),I=o(5077),b=o(1546),t=o(5e3),v=o(9783),P=o(4266),D=o(1726),x=o(7747),F=o(5384),n=o(3075),Q=o(9019);class q{}var m=o(845),g=o(1424),h=o(5787),_=o(6198),S=o(7531),y=o(5652),J=o(7116);function O(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}const Y=function(){return{width:"500px",height:"50px"}};function w(i,a){1&i&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Espere......"),t.qZA(),t._UZ(3,"p-progressSpinner",1),t.qZA()),2&i&&(t.xp6(3),t.Akn(t.DdM(2,Y)))}function M(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un Correlativo Inicial valido!!! "),t.qZA()())}function B(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un Correlativo Final valido!!! "),t.qZA()())}function L(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar una fecha de inicio del talonario valida!!! "),t.qZA()())}function j(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar una fecha final del talonario valida!!! "),t.qZA()())}function H(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un correlativo inicial valido "),t.qZA()())}function E(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un correlativo final valido "),t.qZA()())}function G(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un CAI valido "),t.qZA()())}function R(i,a){1&i&&(t.TgZ(0,"p")(1,"FONT",20),t._uU(2,"Debe ingresar un nombre valido "),t.qZA()())}function z(i,a){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-progress-bar"),t.qZA())}function K(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.createCorrelative())}),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5"),t._uU(6,"Correlativo de Facturas"),t.qZA(),t.TgZ(7,"div",6)(8,"label",7),t._uU(9,"Nombre"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"div",6)(12,"label",7),t._uU(13,"Numero Inicial"),t.qZA(),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17,"Numero Final"),t.qZA(),t._UZ(18,"input",10),t.qZA(),t.TgZ(19,"div",6)(20,"label",11),t._uU(21,"Fecha Inicial"),t.qZA(),t._UZ(22,"p-calendar",12),t.qZA(),t.TgZ(23,"div",6)(24,"label",11),t._uU(25,"Fecha Final"),t.qZA(),t._UZ(26,"p-calendar",13),t.qZA(),t.TgZ(27,"div",6)(28,"label",11),t._uU(29,"Correlativo Inicial"),t.qZA(),t._UZ(30,"input",14),t.qZA(),t.TgZ(31,"div",6)(32,"label",11),t._uU(33,"Correlativo Final"),t.qZA(),t._UZ(34,"input",15),t.qZA(),t.TgZ(35,"div",6)(36,"label",11),t._uU(37,"CAI"),t.qZA(),t._UZ(38,"input",16),t.qZA(),t.TgZ(39,"div",17)(40,"div",18),t.YNc(41,M,3,0,"p",0),t.YNc(42,B,3,0,"p",0),t.YNc(43,L,3,0,"p",0),t.YNc(44,j,3,0,"p",0),t.YNc(45,H,3,0,"p",0),t.YNc(46,E,3,0,"p",0),t.YNc(47,G,3,0,"p",0),t.YNc(48,R,3,0,"p",0),t.qZA()(),t._UZ(49,"button",19),t.qZA(),t.YNc(50,z,2,0,"div",0),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.correlativeForm),t.xp6(21),t.Q6J("showIcon",!0),t.xp6(4),t.Q6J("showIcon",!0),t.xp6(15),t.Q6J("ngIf",e.validate("InitialCorrelative")),t.xp6(1),t.Q6J("ngIf",e.validate("FinalCorrelative")),t.xp6(1),t.Q6J("ngIf",e.validate("InitialDate")),t.xp6(1),t.Q6J("ngIf",e.validate("FinalDate")),t.xp6(1),t.Q6J("ngIf",e.validate("completeInitialCorrelative")),t.xp6(1),t.Q6J("ngIf",e.validate("completeFinalCorrelative")),t.xp6(1),t.Q6J("ngIf",e.validate("CAI")),t.xp6(1),t.Q6J("ngIf",e.validate("name")),t.xp6(2),t.Q6J("ngIf",e.showProgressBar)}}let W=(()=>{class i{constructor(e,r,l){this.fb=e,this.eventService=r,this.productService=l,this.showProgressBar=!1,this.formSend=!1,this.isLoading=!1,this.correlativeCreated=!1,this.correlativeForm=this.fb.group({InitialCorrelative:[0,[n.kI.required,n.kI.min(0)]],FinalCorrelative:[0,[n.kI.required,n.kI.min(50)]],InitialDate:["",[n.kI.required]],FinalDate:["",n.kI.required],completeInitialCorrelative:["",[n.kI.required,n.kI.minLength(15)]],completeFinalCorrelative:["",[n.kI.required,n.kI.minLength(15)]],CAI:["",[n.kI.required,n.kI.minLength(10)]],name:["",[n.kI.required,n.kI.minLength(5)]]}),this.correlativeCreated=r.getHasCorrelative()==Q.N.SuccessResponse}validate(e){var r;return!(!(null===(r=this.correlativeForm.get(e))||void 0===r?void 0:r.invalid)||1!=this.formSend)}createCorrelative(){var e,r,l,s,d,C,T,Z;if(this.formSend=!0,this.showProgressBar=!0,this.correlativeForm.valid){var c=new q;c.CAI=null===(e=this.correlativeForm.get("CAI"))||void 0===e?void 0:e.value,c.InitialCorrelative=null===(r=this.correlativeForm.get("InitialCorrelative"))||void 0===r?void 0:r.value,c.FinalCorrelative=null===(l=this.correlativeForm.get("FinalCorrelative"))||void 0===l?void 0:l.value,c.InitialDate=null===(s=this.correlativeForm.get("InitialDate"))||void 0===s?void 0:s.value,c.FinalDate=null===(d=this.correlativeForm.get("FinalDate"))||void 0===d?void 0:d.value,c.completeInitialCorrelative=null===(C=this.correlativeForm.get("completeInitialCorrelative"))||void 0===C?void 0:C.value,c.completeFinalCorrelative=null===(T=this.correlativeForm.get("completeFinalCorrelative"))||void 0===T?void 0:T.value,c.name=null===(Z=this.correlativeForm.get("name"))||void 0===Z?void 0:Z.value,c.userId=this.eventService.getToken(),this.productService.AddCorrelative(c).subscribe(u=>{u.data?(this.eventService.setToken(u.data.token),this.eventService.setHasEnterprise(u.data.hasEnterprise),this.eventService.setHasWareHouse(u.data.hasWareHouse),this.eventService.setHasPointOfSale(u.data.hasPointOfSale),this.eventService.setHasCorrelative(u.data.hasCorrelative),alert("Se registro de forma exitosa")):alert(u.message),this.showProgressBar=!1},u=>{this.showProgressBar=!1,alert(u)})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.qu),t.Y36(F.P),t.Y36(x.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sar-correlative"]],decls:3,vars:3,consts:[[4,"ngIf"],["styleClass","custom-spinner","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s"],[1,"form-material",3,"formGroup","ngSubmit"],[1,"grid",2,"margin-left","150px"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[1,"field"],["htmlFor","email1"],["matInput","","pInputText","","placeholder","Ejemplo Talonario 1","type","text","formControlName","name",1,"form-control"],["matInput","","pInputText","","placeholder","Ejemplo 100","type","number","formControlName","InitialCorrelative",1,"form-control"],["matInput","","pInputText","","placeholder","Ejemplo 500","type","number","formControlName","FinalCorrelative"],["htmlFor","age1"],["inputId","icon","formControlName","InitialDate",3,"showIcon"],["inputId","icon","formControlName","FinalDate",3,"showIcon"],["pInputText","","id","age1","placeholder","Ejemplo 000-001-01-00000100","type","text","formControlName","completeInitialCorrelative"],["pInputText","","id","age1","placeholder","Ejemplo 000-001-01-00000500","type","text","formControlName","completeFinalCorrelative"],["pInputText","","id","age1","placeholder","CAI","type","text","formControlName","CAI"],[1,"row"],[1,"col","tex-danger"],["type","submit","pButton","","pRipple","","label","Save","icon","pi pi-check"],["COLOR","red"]],template:function(e,r){1&e&&(t.YNc(0,O,2,0,"div",0),t.YNc(1,w,4,3,"div",0),t.YNc(2,K,51,12,"div",0)),2&e&&(t.Q6J("ngIf",r.showProgressBar),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("ngIf",!r.isLoading))},dependencies:[n._Y,n.Fj,n.wV,n.JJ,n.JL,p.O5,m.Hq,g.o,h.H,n.sg,n.u,_.G,S.Nt,y.f,J.R],encapsulation:2}),i})();var f=o(8952),U=o(5315);const X=["filter"];function $(i,a){1&i&&(t.TgZ(0,"div")(1,"h4")(2,"FONT",14),t._uU(3,"Producto agregado de forma correcta!!! "),t.qZA()()())}function V(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(),s=t.MAs(6);return t.KtG(l.clear(s))}),t.qZA(),t.TgZ(2,"span",17),t._UZ(3,"i",18),t.TgZ(4,"input",19,20),t.NdJ("input",function(l){t.CHM(e);const s=t.oxw(),d=t.MAs(6);return t.KtG(s.onGlobalFilter(d,l))}),t.qZA()()()}}function k(i,a){1&i&&(t.TgZ(0,"tr")(1,"th")(2,"div",21),t._uU(3," Nombre "),t._UZ(4,"p-columnFilter",22),t.qZA()(),t.TgZ(5,"th")(6,"div",21),t._uU(7," Actual Correlativo "),t._UZ(8,"p-columnFilter",23),t.qZA()(),t.TgZ(9,"th")(10,"div",21),t._uU(11," Correlativo Inicial "),t._UZ(12,"p-columnFilter",24),t.qZA()(),t.TgZ(13,"th")(14,"div",21),t._uU(15," Correlativo Final "),t._UZ(16,"p-columnFilter",24),t.qZA()(),t.TgZ(17,"th")(18,"div",21),t._uU(19," Fecha Inicial "),t._UZ(20,"p-columnFilter",24),t.qZA()(),t.TgZ(21,"th")(22,"div",21),t._uU(23," Fecha Final "),t._UZ(24,"p-columnFilter",24),t.qZA()(),t.TgZ(25,"th")(26,"div",21),t._uU(27," CAI "),t._UZ(28,"p-columnFilter",25),t.qZA()()())}function tt(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td",26),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",28),t._uU(10),t.qZA(),t.TgZ(11,"td",28),t._uU(12),t.qZA(),t.TgZ(13,"td",28),t._uU(14),t.qZA()()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.actualCorrelative," "),t.xp6(2),t.hij(" ",e.initialCorrelative," "),t.xp6(2),t.hij(" ",e.finalCorrelative," "),t.xp6(2),t.hij(" ",e.initialDate," "),t.xp6(2),t.hij(" ",e.finalDate," "),t.xp6(2),t.hij(" ",e.cai," ")}}function et(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"No se encontraron correlativos."),t.qZA()())}function it(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",29),t._uU(2,"Obteniendo los correlativos... Espere..."),t.qZA()())}function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.showAddCorrelative=!1)}),t.qZA()}}const rt=function(){return["name","categoryName","productPrice","status"]},at=function(){return{width:"850px"}};let nt=(()=>{class i{constructor(e,r,l,s){this.customerService=e,this.productService=r,this.messageService=l,this.eventService=s,this.ProductToInvoiceSelected=new t.vpe,this.CorrelativeList=[],this.showAddCorrelative=!1,this.showProductAdded=!1,this.defaultProductQuantity=1,this.addProductDialog=!1,this.customers1=[],this.showProgressBar=!1,this.selectedCustomers1=[],this.selectedCustomer={},this.representatives=[],this.loading=!0,this.value()}ngOnChanges(e){}ngOnInit(){this.customerService.getCustomersLarge().then(e=>{this.customers1=e,this.loading=!1,this.customers1.forEach(r=>r.date=new Date(r.date))})}onSort(){this.updateRowGroupMetaData()}updateRowGroupMetaData(){this.rowGroupMetadata={}}confirmQuantity(){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}selectProduct(e){this.showProductAdded=!1,this.addProductDialog=!0,this.productSelected=e}formatCurrency(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(e,r){e.filterGlobal(r.target.value,"contains")}changeQuantity(e){this.currentQuantity=e}clear(e){e.clear(),this.filter.nativeElement.value=""}keyEnterPress(e){this.addProductDialog=!1,(0==this.currentQuantity||null==this.currentQuantity||this.currentQuantity<this.defaultProductQuantity)&&(this.currentQuantity=1),null!=this.productSelected&&this.emitProductDTO()}cancelAddQuantityDialog(){this.showProductAdded=!1,this.currentQuantity=void 0,this.addProductDialog=!1}emitProductDTO(){var e,r,l,s;this.showProductAdded=!0;var d=new P.i;d.id=null===(e=this.productSelected)||void 0===e?void 0:e.productId,d.name=null===(r=this.productSelected)||void 0===r?void 0:r.productName,d.code=null===(l=this.productSelected)||void 0===l?void 0:l.productName,d.quantity=this.currentQuantity,d.price=null===(s=this.productSelected)||void 0===s?void 0:s.productPrice,d.total=d.price*this.currentQuantity,this.productSelected=void 0,this.currentQuantity=void 0,this.ProductToInvoiceSelected.emit(d)}value(){this.productService.getCorrelative(this.eventService.getToken()).subscribe(e=>{e.data?this.CorrelativeList=e.data:alert(e.message),this.showProgressBar=!1},e=>{this.showProgressBar=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.v),t.Y36(x.M),t.Y36(v.ez),t.Y36(F.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,r){if(1&e&&t.Gf(X,5),2&e){let l;t.iGM(l=t.CRH())&&(r.filter=l.first)}},inputs:{productsToShow:"productsToShow"},outputs:{ProductToInvoiceSelected:"ProductToInvoiceSelected"},features:[t._Bn([v.ez,v.YP]),t.TTD],decls:16,vars:13,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","label","Nuevo","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["dataKey","pointOfSaleId","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","",3,"visible","modal","visibleChange"],["pTemplate","footer"],["COLOR","green"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","name","display","menu","placeholder","Buscar por codigo"],["type","text","field","cai","display","menu","placeholder","Buscar por nombre"],["type","text","field","cai","display","menu","placeholder","Buscar por precio"],["type","text","field","cai","display","menu","placeholder","Buscar por categoria"],[2,"min-width","12rem"],[2,"min-width","14rem"],[2,"min-width","10rem"],["colspan","7"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,$,4,0,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return r.showAddCorrelative=!0}),t.qZA(),t.TgZ(5,"p-table",5,6),t.YNc(7,V,6,0,"ng-template",7),t.YNc(8,k,29,0,"ng-template",8),t.YNc(9,tt,15,7,"ng-template",9),t.YNc(10,et,3,0,"ng-template",10),t.YNc(11,it,3,0,"ng-template",11),t.qZA()()(),t.TgZ(12,"p-dialog",12),t.NdJ("visibleChange",function(s){return r.showAddCorrelative=s}),t.TgZ(13,"div"),t._UZ(14,"app-sar-correlative"),t.qZA(),t.YNc(15,ot,1,0,"ng-template",13),t.qZA()()),2&e&&(t.Q6J("ngIf",r.showProductAdded),t.xp6(5),t.Q6J("value",r.CorrelativeList)("rows",10)("loading",r.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",t.DdM(11,rt)),t.xp6(7),t.Akn(t.DdM(12,at)),t.Q6J("visible",r.showAddCorrelative)("modal",!0))},dependencies:[p.O5,W,f.iA,v.jx,f.xl,m.Hq,g.o,h.H,U.V],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}form[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;width:50%}"]}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[I.Bz.forChild([{path:"",component:nt,canActivate:[b.j]}]),I.Bz]}),i})();var st=o(4891),N=o(7010),dt=o(3954),ct=o(7376),ut=o(6186),pt=o(7773),vt=o(8185),mt=o(4036),gt=o(6526),ht=o(2841),ft=o(4776),Ct=o(8018),Tt=o(5899),Zt=o(5009),At=o(4106),It=o(5245);let xt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,lt,st.E,S.c,f.U$,N.L$,It.Ps,At.lN,Zt.LD,Tt.Cv,n.u5,p.ez,n.u5,Ct.Xt,m.hJ,ft.JH,g.j,ht.KZ,h.T,gt.q4,mt.kW,vt.q,pt.EV,U.S,N.L$,n.UX,ut.K,ct.x,_.L,dt.N6,y._8]}),i})()}}]);
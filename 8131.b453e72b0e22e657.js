"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[8131],{8131:(Bt,O,a)=>{a.r(O),a.d(O,{ComprasModule:()=>wt});var d=a(9808),b=a(7449);class B{}var c=a(3075),t=a(5e3),I=a(7747),V=a(5384),M=a(845),H=a(6768),T=a(7531),Y=a(2032),g=a(3191),p=a(508),S=a(727),N=a(7579),J=a(9770),f=a(6451),G=a(9646),y=a(4968),P=a(925),v=a(1314),x=a(6731),u=a(1159),U=a(7429),w=a(2978),k=a(8675),A=a(3900),h=a(5698),C=a(9300),K=a(4004),Q=a(8505),z=a(4986),W=a(7272),j=a(4482),X=a(5403),$=a(5032),tt=a(9718),et=a(5577);function F(i,s){return s?e=>(0,W.z)(s.pipe((0,h.q)(1),function q(){return(0,j.e)((i,s)=>{i.subscribe((0,X.x)(s,$.Z))})}()),e.pipe(F(i))):(0,et.z)((e,o)=>i(e,o).pipe((0,h.q)(1),(0,tt.h)(e)))}var ot=a(5963),nt=a(226);const st=["panel"];function at(i,s){if(1&i&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&i){const e=s.id,o=t.oxw();t.Q6J("id",o.id)("ngClass",o._classList),t.uIk("aria-label",o.ariaLabel||null)("aria-labelledby",o._getPanelAriaLabelledby(e))}}const lt=["*"];let rt=0;class ct{constructor(s,e){this.source=s,this.option=e}}const pt=(0,p.Kr)(class{}),E=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function ut(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1}}});let dt=(()=>{class i extends pt{constructor(e,o,n,l){super(),this._changeDetectorRef=e,this._elementRef=o,this._activeOptionChanges=S.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+rt++,this.inertGroups=(null==l?void 0:l.SAFARI)||!1,this._autoActiveFirstOption=!!n.autoActiveFirstOption,this._autoSelectActiveOption=!!n.autoSelectActiveOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,g.Ig)(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=(0,g.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,g.du)(e).reduce((o,n)=>(o[n]=!0,o),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new Y.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const o=new ct(this,e);this.optionSelected.emit(o)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(E),t.Y36(P.t4))},i.\u0275dir=t.lG2({type:i,viewQuery:function(e,o){if(1&e&&(t.Gf(t.Rgc,7),t.Gf(st,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.template=n.first),t.iGM(n=t.CRH())&&(o.panel=n.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),i})(),ht=(()=>{class i extends dt{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return i.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(i)))(o||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-autocomplete"]],contentQueries:function(e,o,n){if(1&e&&(t.Suo(n,p.K7,5),t.Suo(n,p.ey,5)),2&e){let l;t.iGM(l=t.CRH())&&(o.optionGroups=l),t.iGM(l=t.CRH())&&(o.options=l)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:p.HF,useExisting:i}]),t.qOj],ngContentSelectors:lt,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,at,3,4,"ng-template"))},dependencies:[d.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0}),i})();const D=new t.OlP("mat-autocomplete-scroll-strategy"),gt={provide:D,deps:[v.aV],useFactory:function mt(i){return()=>i.scrollStrategies.reposition()}},ft={provide:c.JU,useExisting:(0,t.Gpc)(()=>L),multi:!0};let vt=(()=>{class i{constructor(e,o,n,l,r,m,Ft,Et,Dt,Lt,Rt){this._element=e,this._overlay=o,this._viewContainerRef=n,this._zone=l,this._changeDetectorRef=r,this._dir=Ft,this._formField=Et,this._document=Dt,this._viewportRuler=Lt,this._defaults=Rt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=S.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new N.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,J.P)(()=>{const _=this.autocomplete?this.autocomplete.options:null;return _?_.changes.pipe((0,k.O)(_),(0,A.w)(()=>(0,f.T)(..._.map(Zt=>Zt.onSelectionChange)))):this._zone.onStable.pipe((0,h.q)(1),(0,A.w)(()=>this.optionSelections))}),this._scrollStrategy=m}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,g.Ig)(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,f.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,C.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,C.h)(()=>this._overlayAttached)):(0,G.of)()).pipe((0,K.U)(e=>e instanceof p.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,f.T)((0,y.R)(this._document,"click"),(0,y.R)(this._document,"auxclick"),(0,y.R)(this._document,"touchend")).pipe((0,C.h)(e=>{const o=(0,P.sA)(e),n=this._formField?this._formField._elementRef.nativeElement:null,l=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!n||!n.contains(o))&&(!l||!l.contains(o))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(o)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const o=e.keyCode,n=(0,u.Vb)(e);if(o===u.hY&&!n&&e.preventDefault(),this.activeOption&&o===u.K5&&this.panelOpen&&!n)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const l=this.autocomplete._keyManager.activeItem,r=o===u.LH||o===u.JH;o===u.Mf||r&&!n&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):r&&this._canOpen()&&this.openPanel(),(r||this.autocomplete._keyManager.activeItem!==l)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let o=e.target,n=o.value;"number"===o.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._pendingAutoselectedOption=null,this._onChange(n),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,h.q)(1)),o=this.autocomplete.options.changes.pipe((0,Q.b)(()=>this._positionStrategy.reapplyLastPosition()),function it(i,s=z.z){const e=(0,ot.H)(i,s);return F(()=>e)}(0));return(0,f.T)(e,o).pipe((0,A.w)(()=>(this._zone.run(()=>{const n=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),n!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,h.q)(1)).subscribe(n=>this._setValueAndClose(n))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const o=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(null!=o?o:"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const o=e?e.source:this._pendingAutoselectedOption;o&&(this._clearPreviousSelectedOption(o),this._assignOptionValue(o.value),this._onChange(o.value),this.autocomplete._emitSelectEvent(o),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(o=>{o!==e&&o.selected&&o.deselect()})}_attachOverlay(){var e;let o=this._overlayRef;o?(this._positionStrategy.setOrigin(this._getConnectedElement()),o.updateSize({width:this._getPanelWidth()})):(this._portal=new U.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),o=this._overlay.create(this._getOverlayConfig()),this._overlayRef=o,this._handleOverlayEvents(o),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&o&&o.updateSize({width:this._getPanelWidth()})})),o&&!o.hasAttached()&&(o.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const n=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&n!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var e;return new v.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const o=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=this._aboveClass,l=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:n},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:n}];let r;r="above"===this.position?l:"below"===this.position?o:[...o,...l],e.withPositions(r)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}_scrollToOption(e){const o=this.autocomplete,n=(0,p.CB)(e,o.options,o.optionGroups);if(0===e&&1===n)o._setScrollTop(0);else if(o.panel){const l=o.options.toArray()[e];if(l){const r=l._getHostElement(),m=(0,p.jH)(r.offsetTop,r.offsetHeight,o._getScrollTop(),o.panel.nativeElement.offsetHeight);o._setScrollTop(m)}}}_handleOverlayEvents(e){e.keydownEvents().subscribe(o=>{var n;(o.keyCode===u.hY&&!(0,u.Vb)(o)||o.keyCode===u.LH&&(0,u.Vb)(o,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(null!==(n=this._valueBeforeAutoSelection)&&void 0!==n?n:""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),o.stopPropagation(),o.preventDefault())}),e.outsidePointerEvents().subscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(v.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(D),t.Y36(nt.Is,8),t.Y36(w.G_,9),t.Y36(d.K0,8),t.Y36(x.rL),t.Y36(E,8))},i.\u0275dir=t.lG2({type:i,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),i})(),L=(()=>{class i extends vt{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return i.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(i)))(o||i)}}(),i.\u0275dir=t.lG2({type:i,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,o){1&e&&t.NdJ("focusin",function(){return o._handleFocus()})("blur",function(){return o._onTouched()})("input",function(l){return o._handleInput(l)})("keydown",function(l){return o._handleKeydown(l)})("click",function(){return o._handleClick()}),2&e&&t.uIk("autocomplete",o.autocompleteAttribute)("role",o.autocompleteDisabled?null:"combobox")("aria-autocomplete",o.autocompleteDisabled?null:"list")("aria-activedescendant",o.panelOpen&&o.activeOption?o.activeOption.id:null)("aria-expanded",o.autocompleteDisabled?null:o.panelOpen.toString())("aria-owns",o.autocompleteDisabled||!o.panelOpen||null==o.autocomplete?null:o.autocomplete.id)("aria-haspopup",o.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[t._Bn([ft]),t.qOj]}),i})(),_t=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[gt],imports:[v.U8,p.Ng,p.BQ,d.ez,x.ZD,p.Ng,p.BQ]}),i})();var R=a(5652),yt=a(9783),Z=a(5315);function At(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"strong"),t._uU(2," Proveedor: "),t.qZA(),t.TgZ(3,"app-drop-down",13),t.NdJ("ValueSelectedChange",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.filterSupplier(n))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("showFilter",!0)("IsCreating",!1)("DropDownDataSource",e.suppliers)}}function Ct(i,s){if(1&i&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.value)("title",e.viewValue),t.xp6(1),t.hij(" ",e.viewValue," ")}}function Ot(i,s){if(1&i&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function bt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",14),t.NdJ("input",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.filterProducts(n))}),t.qZA(),t.TgZ(3,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(){const n=t.CHM(e),l=n.index,r=n.$implicit,m=t.oxw();return t.KtG(m.updateProduct(l,r))}),t.YNc(5,Ct,2,3,"mat-option",17),t.qZA()(),t.TgZ(6,"td")(7,"input",18),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.quantity=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getTotal())}),t.qZA()(),t.TgZ(8,"td")(9,"input",18),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.purchasePrice=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getTotal())}),t.qZA()(),t.TgZ(10,"td")(11,"select",19),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.taxId=n)}),t.YNc(12,Ot,2,2,"option",20),t.qZA()(),t.TgZ(13,"td")(14,"button",21),t.NdJ("click",function(){const l=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeProduct(l))}),t.qZA()()()}if(2&i){const e=s.$implicit,o=t.MAs(4),n=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",o)("formControl",e.productControl),t.xp6(3),t.Q6J("ngForOf",n.filterdProductos),t.xp6(2),t.Q6J("ngModel",e.quantity),t.xp6(2),t.Q6J("ngModel",e.purchasePrice),t.xp6(2),t.Q6J("ngModel",e.taxId),t.xp6(1),t.Q6J("ngForOf",n.availableTaxes)}}function Mt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showSaveDialog=!1)}),t.qZA(),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.confirmSaveBuy())}),t.qZA()}}const Tt=function(){return{width:"450px"}};let St=(()=>{class i{constructor(e,o){this.productService=e,this.eventService=o,this.availableTaxes=[{id:1,name:"Tax 1"},{id:2,name:"Tax 2"},{id:3,name:"Tax 3"}],this.buy=new B,this.buy.supplierId=0,this.buy.buyDate=new Date,this.buy.reference="",this.buy.productLine=[],this.buy.productLine.forEach(n=>{n.productControl=new c.NI})}ngOnInit(){this.GetSupplierValuesByEnterprise(),this.getProductValues()}removeProduct(e){this.buy.productLine.splice(e,1)}updateProduct(e,o){const n=o.productControl.value,l=this.products.find(r=>r.value===n);l?(o.productId=n,o.productControl.setValue(l.viewValue)):(o.productId=0,o.productControl.setValue(""))}addProduct(){this.buy.productLine.push({productId:0,quantity:0,purchasePrice:0,taxId:0,productControl:new c.NI}),console.log(this.buy.productLine)}getTotal(){let e=0;for(let o of this.buy.productLine)e+=o.quantity*o.purchasePrice;return e}filterSupplier(e){this.buy.supplierId=e}getProductValues(){this.isLoading=!0,this.productService.GetProductsValues(this.eventService.getToken()).subscribe(e=>{e.data&&(this.products=e.data),this.isLoading=!1})}filterProducts(e){const n=(e.target.value||"").toLowerCase();this.filterdProductos=this.products.filter(l=>l.viewValue.toLowerCase().includes(n))}GetSupplierValuesByEnterprise(){this.productService.GetSupplierValues(this.eventService.getToken()).subscribe(e=>{e.data&&(this.suppliers=e.data)})}save(){this.showSaveDialog=!0}confirmSaveBuy(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.M),t.Y36(V.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:39,vars:11,consts:[["style","margin-bottom: 10px;",4,"ngIf"],["inputId","icon","formControlName","buy.buyDate",2,"margin-left","25px",3,"showIcon"],[2,"margin-top","10px"],["type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngModelChange"],[2,"margin-top","20px"],[4,"ngFor","ngForOf"],["pButton","","pRipple","","label","Agregar","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-save",1,"p-button-help",3,"click"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],["pTemplate","footer"],[2,"margin-bottom","10px"],[3,"showFilter","IsCreating","DropDownDataSource","ValueSelectedChange"],["type","text","placeholder","Product","aria-label","Product","matInput","",1,"large-input",3,"matAutocomplete","formControl","input"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","title",4,"ngFor","ngForOf"],["type","number",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[3,"value","title"],[3,"value"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,At,4,3,"div",0),t.TgZ(2,"strong"),t._uU(3,"Fecha: "),t.qZA(),t._UZ(4,"p-calendar",1)(5,"br"),t.TgZ(6,"div",2)(7,"strong"),t._uU(8,"Referencia: "),t.qZA(),t.TgZ(9,"input",3),t.NdJ("ngModelChange",function(l){return o.buy.reference=l}),t.qZA()(),t.TgZ(10,"h6")(11,"em"),t._uU(12,"Favor en el precio de compra incluya el precio final incluyendo el impuesto"),t.qZA()(),t.TgZ(13,"table",4)(14,"tr")(15,"th"),t._uU(16,"Product"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Quantity"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Purchase Price"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Tax"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Actions"),t.qZA()(),t.YNc(25,bt,15,7,"tr",5),t.qZA(),t.TgZ(26,"h3"),t._uU(27),t.qZA(),t.TgZ(28,"button",6),t.NdJ("click",function(){return o.addProduct()}),t.qZA(),t.TgZ(29,"button",7),t.NdJ("click",function(){return o.save()}),t.qZA()(),t.TgZ(30,"p-dialog",8),t.NdJ("visibleChange",function(l){return o.showSaveDialog=l}),t.TgZ(31,"div",9),t._UZ(32,"i",10),t.TgZ(33,"span"),t._uU(34,"Esta seguro desea agregar esta compra por un total de: "),t.TgZ(35,"b"),t._uU(36),t.qZA(),t._uU(37,"?"),t.qZA()(),t.YNc(38,Mt,2,0,"ng-template",11),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!o.isLoading),t.xp6(3),t.Q6J("showIcon",!0),t.xp6(5),t.Q6J("ngModel",o.buy.reference),t.xp6(16),t.Q6J("ngForOf",o.buy.productLine),t.xp6(2),t.hij("Total L. ",o.getTotal(),""),t.xp6(3),t.Akn(t.DdM(10,Tt)),t.Q6J("visible",o.showSaveDialog)("modal",!0),t.xp6(6),t.Oqu(o.getTotal()))},dependencies:[d.sg,d.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.Q7,c.On,M.Hq,H.t,T.Nt,ht,L,p.ey,c.oH,c.u,R.f,yt.jx,Z.V],styles:['[_ngcontent-%COMP%]:root {\n    --primary-color: #4CAF50;\n    --secondary-color: #45a049;\n    --tertiary-color: #f1f1f1;\n    --quaternary-color: #f9f9f9;\n  }\n\n  \n  th[_ngcontent-%COMP%] {\n    background-color: var(--tertiary-color);\n    font-weight: bold;\n  }\n\n  tr[_ngcontent-%COMP%]:nth-child(even) {\n    background-color: var(--quaternary-color);\n  }\n\n  tr[_ngcontent-%COMP%]:hover {\n    background-color: var(--tertiary-color);\n  }\n\n  button[_ngcontent-%COMP%] {\n    background-color: var(--primary-color);\n    \n  }\n\n  button[_ngcontent-%COMP%]:hover {\n    background-color: var(--secondary-color);\n  }\n\n  \n  input[type="number"][_ngcontent-%COMP%], input[type="text"][_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\n    font-size: 14px;\n    padding: 4px 8px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    outline: none;\n  }\n\n  input[type="number"][_ngcontent-%COMP%]:focus, input[type="text"][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 4px rgba(76, 175, 80, 0.5);\n  }\n  .large-input[_ngcontent-%COMP%] {\n  width: 300px; \n}']}),i})(),Pt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[b.Bz.forChild([{path:"",component:St}]),b.Bz]}),i})();var xt=a(4891);let wt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,Pt,c.u5,M.hJ,xt.E,w.lN,T.c,_t,c.UX,R._8,Z.S]}),i})()}}]);